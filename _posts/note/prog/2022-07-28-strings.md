---
layout: post
title: "编程与调试 C++ -- 字符串快速检索"
author: yqh
location: "珠海"
categories: ["编程与调试"]
tags: ["编程", "C/C++"]
toc: true
toclistyle:
comments:
visibility: hidden
mathjax:
mermaid:
glslcanvas:
codeprint:
---

* [AC 自动机](https://oi-wiki.org/string/ac-automaton/)
* [ACM / 字符串 {% include relref_github.html %}](https://github.com/eecrazy/ACM/tree/master/%E5%AD%97%E7%AC%A6%E4%B8%B2)
* [多模匹配之 AC 自动机 {% include relref_github.html %}](https://forrestsu.github.io/posts/algorithm/ac-automation/)


## Windbg 中使用查找内存并设置访问断点

在 windbg 中通过 `s` 命令在内存中查找字符串或者关键字节码信息
```
0:005> s -u 00c00000 L1000000 "你好 20:15 2012/6/620:15 2012/6/6"
01960d28  4f60 597d 0020 0032 0030 003a 0031 0035  `O}Y .2.0.:.1.5.
```

查看内存 `01960d28`
```
01960d28 00 00 00 00 00 00 00 00 30 00 3a 00 31 00 35 00 20 00  ........0.:.1.5. .
01960d3a 32 00 30 00 31 00 32 00 2f 00 36 00 2f 00 36 00 32 00  2.0.1.2./.6./.6.2.
01960d4c 30 00 3a 00 31 00 35 00 20 00 32 00 30 00 31 00 32 00  0.:.1.5. .2.0.1.2.

01960d5e 2f 00 36 00 2f 00 36 00 00 00 00 00 00 00 00 00 00 00  /.6./.6...........
```

找到内容之后通过 `ba` 设置访问断点在任何函数访问该内存时将会中断
```
0:005> ba r4 01960d28

0:005> bl
 0 du             0001 (0001) (@@masm(`ItemOperation.cpp:60+`))
 1 e 01960d28 r 4 0001 (0001)  0:****
 2 e 771c3540     0001 (0001)  0:**** ntdll!DbgBreakPoint
```

如此在程序访问该地址时将会中断到调试器
```
0:005> g
Breakpoint 1 hit
eax=019607d0 ebx=00000023 ecx=00000003 edx=0000002c esi=019607d0 edi=01960cd0
eip=76d29c9c esp=000fefa4 ebp=000fefa8 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000206
msvcrt!_VEC_memcpy+0x125:
76d29c9c 660f7f4760      movdqa  xmmword ptr [edi+60h],xmm0 ds:0023:01960d30=003100300032002000350031003a0030
```

当然也可以根据自身需要查找相应的其他内容来实现设置相应的访问断点 [note](http://t.zoukankan.com/SkyMouse-p-2538745.html)


### 跟踪

E:\wp\en_fqa.pdf

120.53.130.57
ip.dst==120.53.130.57

convert_req_id
s -a 00400000 L009bf000 "convert_req_id"

0:002> s -a  00400000 L009bf000  "convert_req_id"
006c76e4  63 6f 6e 76 65 72 74 5f-72 65 71 5f 69 64 00 00  convert_req_id..
006c7858  63 6f 6e 76 65 72 74 5f-72 65 71 5f 69 64 00 00  convert_req_id..
006c7af8  63 6f 6e 76 65 72 74 5f-72 65 71 5f 69 64 00 00  convert_req_id..

ba r4 006c76e4
ba r4 006c7858
ba r4 006c7af8


## [Keywords Search](https://vjudge.net/problem/HDU-2222)

hdu 2222-Keywords Search



<hr class='reviewline'/>
<p class='reviewtip'><script type='text/javascript' src='{% include relref.html url="/assets/reviewjs/blogs/2022-07-28-strings.md.js" %}'></script></p>
<font class='ref_snapshot'>参考资料快照</font>

- [https://oi-wiki.org/string/ac-automaton/]({% include relrefx.html url="/backup/2022-07-28-strings.md/oi-wiki.org/df3d369c.html" %})
- [https://github.com/eecrazy/ACM/tree/master/%E5%AD%97%E7%AC%A6%E4%B8%B2]({% include relrefx.html url="/backup/2022-07-28-strings.md/github.com/7367506a.html" %})
- [https://forrestsu.github.io/posts/algorithm/ac-automation/]({% include relrefx.html url="/backup/2022-07-28-strings.md/forrestsu.github.io/0c28480c.html" %})
- [http://t.zoukankan.com/SkyMouse-p-2538745.html]({% include relrefx.html url="/backup/2022-07-28-strings.md/t.zoukankan.com/4a0ff432.html" %})
- [https://vjudge.net/problem/HDU-2222]({% include relrefx.html url="/backup/2022-07-28-strings.md/vjudge.net/105ecdaf.html" %})

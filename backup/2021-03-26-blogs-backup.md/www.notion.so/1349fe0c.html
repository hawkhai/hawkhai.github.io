---
title : è‡ªåŠ¨å¿«ç…§å­˜æ¡£
---

* TIME: 2021-04-26 15:57:27
* URL: <https://www.notion.so/ce300124a4444c2cacc90a5ea0a5a19b>

-----

![ğŸ–¥ï¸](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

å›¾å½¢å­¦å¸¸è§çš„å˜æ¢æ¨å¯¼

Comment

Search

Notion

![ğŸ–¥ï¸](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)![ğŸ–¥ï¸](https://notion-
emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f5a5-fe0f.svg)

å›¾å½¢å­¦å¸¸è§çš„å˜æ¢æ¨å¯¼

[çº¿æ€§å˜æ¢](/ce300124a4444c2cacc90a5ea0a5a19b#b59e4db5bbde455d8e421e15adc19bb5)

[Scale
Matrix](/ce300124a4444c2cacc90a5ea0a5a19b#5f15f48ec8c04e3da5c73bf2206971a7)

[Scale (Non-
Uniform)](/ce300124a4444c2cacc90a5ea0a5a19b#de9948afa648452ababbd63c4372486e)

[Reflection
Matrix](/ce300124a4444c2cacc90a5ea0a5a19b#ebbcf20f33464d7989fb0551adc58c5d)

[Shear
Matrix](/ce300124a4444c2cacc90a5ea0a5a19b#3c22d5d6b6a04bdaaee740cc67f814ff)

[2D Rotation
Matrix](/ce300124a4444c2cacc90a5ea0a5a19b#0db715ab789641cc83732bdbdd98a041)

[é½æ¬¡åæ ‡](/ce300124a4444c2cacc90a5ea0a5a19b#3b3965ff8a2e4189b043c73b4eb9b66d)

[Translation](/ce300124a4444c2cacc90a5ea0a5a19b#280149e3e8c540c3902266d0731df7f2)

[Affine Transformations
ä»¿å°„å˜æ¢](/ce300124a4444c2cacc90a5ea0a5a19b#bf9521b471d941619c3d82f1f78ea792)

[2D
Transformations](/ce300124a4444c2cacc90a5ea0a5a19b#db4f0888917b4a3f860360b72394f968)

[Scale](/ce300124a4444c2cacc90a5ea0a5a19b#00e1b3579ff34a379a9070b69146a351)

[Rotation](/ce300124a4444c2cacc90a5ea0a5a19b#8095f06432334637906024c157c5cfdb)

[Translation](/ce300124a4444c2cacc90a5ea0a5a19b#7850801daa88456880f1330c48261d1a)

[é€†å˜æ¢](/ce300124a4444c2cacc90a5ea0a5a19b#6a4bc9014a9e4601bee3c686e75f5904)

[ä¸‰ç»´å˜æ¢](/ce300124a4444c2cacc90a5ea0a5a19b#8e4fd54efcda492ebe5b581fad72c440)

[Scale](/ce300124a4444c2cacc90a5ea0a5a19b#0d42c61c549a44489bc425b9f06e9e9d)

[Translation](/ce300124a4444c2cacc90a5ea0a5a19b#7b03d850f5d74117a4db7fbf6cab6886)

[Rotation](/ce300124a4444c2cacc90a5ea0a5a19b#945cfe73c6ea4b84ae579287a848a9a2)

[ç»•è½´æ—‹è½¬](/ce300124a4444c2cacc90a5ea0a5a19b#2ea467948c0049c1b67c3ee48c172f3a)

[Rodrigues' Rotation Formula
](/ce300124a4444c2cacc90a5ea0a5a19b#8fa6a1bfb55a49879c98fb50cfefc86f)

[å››å…ƒæ•°ç›¸å…³](/ce300124a4444c2cacc90a5ea0a5a19b#24d93566d37f4a97b9d89e96f75a5a99)

[View/Camera Transformation
è§†å›¾å˜æ¢](/ce300124a4444c2cacc90a5ea0a5a19b#904735b521574f03b472d5735bf02415)

[å®šä¹‰ç›¸æœº](/ce300124a4444c2cacc90a5ea0a5a19b#a5772602b24d4f54b7b5212e9f430615)

[è§†å›¾å˜æ¢](/ce300124a4444c2cacc90a5ea0a5a19b#ec74629744234b4aa404ebcefecf4fa9)

[æ±‚è§†å›¾å˜æ¢çŸ©é˜µ](/ce300124a4444c2cacc90a5ea0a5a19b#a1ff2ff4354c40439365e216c3fea9f0)

[Projection Transformation
æŠ•å½±å˜æ¢](/ce300124a4444c2cacc90a5ea0a5a19b#249a4c171a4f48738c41333454ae1153)

[Perspective projection vs. orthographic
projection](/ce300124a4444c2cacc90a5ea0a5a19b#1f706ff5650c4db6a8ad842e06f2b78f)

[Orthographic Projection
æ­£äº¤æŠ•å½±](/ce300124a4444c2cacc90a5ea0a5a19b#4e7373e7334c40eba2a39541431a0366)

[æ–¹æ³•ä¸€](/ce300124a4444c2cacc90a5ea0a5a19b#f859cfcec1c248aea04f5d70e63b066f)

[æ–¹æ³•äºŒ](/ce300124a4444c2cacc90a5ea0a5a19b#55359a2141474721b66897c6746be505)

[Perspective Projection
é€è§†æŠ•å½±](/ce300124a4444c2cacc90a5ea0a5a19b#d18d16d33d894c8daf995bcf571568a9)

[Recall](/ce300124a4444c2cacc90a5ea0a5a19b#6a1c645e086a451896ab318721deafda)

[æ€ä¹ˆåšé€è§†æŠ•å½±](/ce300124a4444c2cacc90a5ea0a5a19b#63885745f5fe4c6492e46f3f2d28346a)

[æ±‚å‡ºä»»ä½•ä¸€ä¸ªç‚¹æŒ¤å‹åçš„ x', y'
å€¼](/ce300124a4444c2cacc90a5ea0a5a19b#0dac07bcd6534cefbb83b350f46bc936)

[æ±‚å‡ºä»»ä½•ä¸€ä¸ªç‚¹æŒ¤å‹åçš„ zâ€™
å€¼](/ce300124a4444c2cacc90a5ea0a5a19b#20174e242e20427296f363a3c7074552)

[å®šä¹‰è§†é”¥](/ce300124a4444c2cacc90a5ea0a5a19b#ac9b618e71c54fae80c51076d64d3918)

[å®Œæˆæ¨å¯¼æ­£äº¤æŠ•å½±çŸ©é˜µ](/ce300124a4444c2cacc90a5ea0a5a19b#c95d1b178ac14e46a42b3411a3da389e)

[å®Œæˆæ¨å¯¼é€è§†æŠ•å½±çŸ©é˜µ](/ce300124a4444c2cacc90a5ea0a5a19b#521e50b0b80a438580dc6971f050bb7f)

[åè®°](/ce300124a4444c2cacc90a5ea0a5a19b#a2b26d93d23c48b8af9fa8ab5d518d2f)

æœ¬æ–‡æ˜¯ Games101-ç°ä»£è®¡ç®—æœºå›¾å½¢å­¦å…¥é—¨ ç¬¬ä¸‰ç¬¬å››èŠ‚è¯¾çš„ç¬”è®°ï¼Œç›¸å…³è§†é¢‘åœ¨ä¸‹æ–¹ã€‚

[www.bilibili.comhttps://www.bilibili.com/video/BV1X7411F744?p=3](https://www.bilibili.com/video/BV1X7411F744?p=3)

[www.bilibili.comhttps://www.bilibili.com/video/BV1X7411F744?p=4](https://www.bilibili.com/video/BV1X7411F744?p=4)

æœ¬æ–‡åŒæ—¶å‚è€ƒäº†ã€ŠUnity Shader å…¥é—¨ç²¾è¦ã€‹çš„ç¬¬å››ç« ï¼Œä½œè€…å…¬å¼€äº†ç¬¬å››ç« çš„ PDFï¼Œå¯ä»¥åœ¨ä¸‹é¢ä¸‹è½½åˆ°ã€‚

[candycat1992/Unity_Shaders_Bookæœ¬é¡¹ç›®æ˜¯ä¹¦ç±ã€ŠUnity Shaderå…¥é—¨ç²¾è¦ã€‹çš„é…å¥—æºä»£ç ã€‚æœ€æ–°ç‰ˆæœ¬è¯·ç§»æ­¥
æœ¬é¡¹ç›®çš„Githubé¡µé¢ ã€‚ æˆ‘ä»¬æ¨èæ‚¨ä»Githubä¸Šcloneé¡¹ç›®æºç å¹¶åŠæ—¶æ£€æŸ¥æ›´æ–°ã€‚å¦‚æœä¸‹è½½é€Ÿåº¦è¿‡æ…¢å¯ä»¥ç§»æ­¥ ç™¾åº¦ç½‘ç›˜åœ°å€ ã€‚
æˆ‘ä»¬æä¾›äº†åŒ…å«ä¹¦ä¸­æ‰€æœ‰æ’å›¾çš„å½©è‰²ç‰ˆæ’å›¾é›†é”¦ï¼š HTMLï¼Œ PDF ã€‚ å½“å¹´ä¹è§‚åœ°ä»¥ä¸ºè‡ªå·±æœ‰æ—¶é—´å†™ç¬¬äºŒç‰ˆï¼Œæ˜¯æˆ‘å¤ªå¹´è½»äº†......
ç¬¬ä¸€ç‰ˆç”±äºæˆ‘èƒ½åŠ›æœ‰é™çš„ç¡®æœ‰å¾ˆå¤šé—®é¢˜ï¼Œæ„Ÿè°¢å¤§å®¶ä¸€ç›´ä»¥æ¥çš„æ”¯æŒã€‚å½“å¹´åœ¨æˆ‘æœ‰æ—¶é—´çš„æ—¶å€™æ›¾ç»èŠ±äº†ä¸€äº›æ—¶é—´é‡å†™äº†ç¬¬18ç« ï¼Œæœ¬æ¥æ˜¯æƒ³è¦æ”¾åˆ°ç¬¬äºŒç‰ˆé‡Œçš„ï¼Œä½†æ˜¯ç›®å‰ç¬¬äºŒç‰ˆé¥é¥æ— æœŸï¼Œç´¢æ€§ç›´æ¥æŠŠæ”¹ç‰ˆåçš„ç¬¬18ç« ç›´æ¥æ”¾å‡ºæ¥ï¼Œå¸Œæœ›èƒ½è®©è¯»è€…æœ‰æ–°çš„æ”¶è·ï¼š
æ”¹ç‰ˆåçš„ç¬¬18ç«  ã€‚ ç”±äºæ•°å­¦ç« æ˜¯å…¨ä¹¦çš„é‡è¦åŸºç¡€ï¼Œæˆ‘ä»¬å†³å®šæŠŠç¬¬å››ç« å…¬å¼€ï¼Œæ¥åŠæ—¶è®©è¯»è€…è·å–æœ€æ–°çš„ç¬¬å››ç« æ•°å­¦ç« çš„å†…å®¹ï¼š PDF ã€‚ æ³¨æ„
ï¼šæˆ‘ä»¬å¯èƒ½ä¼šæ ¹æ®è¯»è€…å‹˜è¯¯éšæ—¶æ›´æ–°è¯¥æ–‡æ¡£ï¼Œå†…å®¹å’Œé¡µå·å¯èƒ½ä¼šä¸è¯»è€…æ‰‹ä¸­çš„ç‰ˆæœ¬ä¸åŒï¼Œå®ä½“ä¹¦ä¸­çš„å‹˜è¯¯ä¼šåœ¨æ¯æ¬¡é‡å°æ—¶è¿›è¡Œä¿®æ­£ã€‚
å°½ç®¡æˆ‘ä»¬åœ¨æœ¬ä¹¦çš„ç¼–å†™è¿‡ç¨‹ä¸­å¤šæ¬¡æ£€æŸ¥å†…å®¹çš„æ­£ç¡®æ€§ï¼Œä½†ä¸å¯é¿å…ä¹¦ä¸­ä»ç„¶ä¼šå‡ºç°ä¸€äº›é”™è¯¯ï¼Œæ¬¢è¿è¯»è€…æ‰¹è¯„æŒ‡æ­£ã€‚ä»»ä½•å…³äºæœ¬ä¹¦å†…å®¹ã€æºç ç­‰æ–¹é¢çš„é—®é¢˜ï¼Œæ¬¢è¿è¯»è€…åæ˜ åˆ°æœ¬ä¹¦æºç æ‰€åœ¨çš„
Githubè®¨è®ºé¡µï¼Œä¹Ÿå¯ä»¥å‘é‚®ä»¶ï¼ˆ lelefeng1992@gmail.com ï¼‰è”ç³»ç¬”è€…ã€‚ å…³äºç›®å‰ å·²å‘ç°çš„é”™è¯¯æˆ‘ä»¬ä¼šåŠæ—¶åœ¨ç½‘ä¸Šæ›´æ–°ï¼š å‹˜è¯¯åˆ—è¡¨ ã€‚
æˆ‘ä»¬ä¹Ÿç»´æŠ¤äº†è¯»è€…åé¦ˆçš„é—®é¢˜åˆ—è¡¨ï¼š FAQ ã€‚ æˆ‘ä»¬ æ¨èä½¿ç”¨Unity 5.0ä»¥ä¸Šçš„ç‰ˆæœ¬æ¥ç¼–è¯‘æœ¬é¡¹ç›®ã€‚å¦‚æœä½ æ‰“ç®—
ä½¿ç”¨æ›´ä½ç‰ˆæœ¬çš„Unityï¼Œé‚£ä¹ˆåœ¨å­¦ä¹ æœ¬ä¹¦æ—¶å¯èƒ½å°±ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ ï¼š
ä½ å¯èƒ½å‘ç°ä¼šæœ‰äº›èœå•æˆ–å˜é‡åœ¨ä½ çš„Unityä¸­æ‰¾ä¸åˆ°ï¼Œè¿™å¯èƒ½å°±æ˜¯ç”±äºUnityç‰ˆæœ¬ä¸åŒé€ æˆçš„ã€‚ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæœ¬ä¹¦çš„ä»£ç å’ŒæŒ‡ä»¤ä»ç„¶å¯ä»¥å·¥ä½œè‰¯å¥½ï¼Œä½†åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼ŒUnityå¯èƒ½ä¼šæ›´æ”¹åº•å±‚çš„å®ç°ç»†èŠ‚ï¼Œé€ æˆåŒæ ·çš„ä»£ç ä¼šå¾—åˆ°ä¸ä¸€æ ·çš„æ•ˆæœï¼ˆä¾‹å¦‚ï¼Œåœ¨éç»Ÿä¸€ç¼©æ”¾æ—¶å¯¹æ³•çº¿è¿›è¡Œå˜æ¢ï¼‰ã€‚
è¿˜æœ‰ä¸€äº›é—®é¢˜æ˜¯Unityæä¾›çš„å†…ç½®å˜é‡ã€å®å’Œå‡½æ•°ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨ä¹¦ä¸­ç»å¸¸ä¼šä½¿ç”¨UnityObjectToWorldNormalå†…ç½®å‡½æ•°æŠŠæ³•çº¿ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°ä¸–ç•Œç©ºé—´ä¸­ï¼Œä½†è¿™ä¸ªå‡½æ•°æ˜¯åœ¨Unity
5ä¸­æ‰è¢«å¼•å…¥çš„ï¼Œå› æ­¤å¦‚æœè¯»è€…ä½¿ç”¨çš„æ˜¯Unity 5ä¹‹å‰çš„ç‰ˆæœ¬å°±ä¼šæŠ¥é”™ã€‚ç±»ä¼¼çš„æƒ…å†µè¿˜æœ‰å’Œé˜´å½±ç›¸å…³çš„å®å’Œå˜é‡ç­‰ã€‚ å’ŒUnity 4.xç‰ˆæœ¬ç›¸æ¯”ï¼ŒUnity
5.xæœ€å¤§çš„å˜åŒ–ä¹‹ä¸€å°±æ˜¯å¾ˆå¤šä»¥å‰åªæœ‰åœ¨ä¸“ä¸šç‰ˆæ‰æ”¯æŒçš„åŠŸèƒ½ï¼Œåœ¨å…è´¹ç‰ˆä¹ŸåŒæ ·æä¾›äº†ã€‚å› æ­¤ï¼Œå¦‚æœè¯»è€…ä½¿ç”¨çš„æ˜¯Unity
4.xå…è´¹ç‰ˆï¼Œå¯èƒ½ä¼šå‘ç°æœ¬ä¹¦ä¸­çš„æŸäº›æè´¨ä¼šå‡ºé”™ã€‚ åœ¨æœ¬ä¹¦ç¼–å†™æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯Unity 5.3ï¼Œå› æ­¤ä½¿ç”¨è¿™äº›Unityç‰ˆæœ¬çš„è¯»è€…è¯·ä½¿ç”¨æœ¬é¡¹ç›®
master åˆ†æ”¯çš„ç›¸å…³ä»£ç ã€‚ Unity 5.4å¯¹Shaderéƒ¨åˆ†è¿›è¡Œäº†ä¸€äº›æ¯”è¾ƒå¤§çš„æ›´æ–°ï¼Œæ¯”è¾ƒæ˜æ˜¾çš„å˜åŒ–æœ‰ï¼š
ä½¿ç”¨äº†unity_XXXæ¥ä»£æ›¿åŸæœ‰çš„XXXå˜æ¢çŸ©é˜µï¼Œä¾‹å¦‚_Object2Worldè¢«æ›¿æ¢æˆäº†unity_ObjectToWorldï¼Œ_World2Objectè¢«æ›¿æ¢æˆäº†unity_WorldToObjectï¼ˆå‡åœ¨UnityShaderVariables.cgincæ–‡ä»¶ä¸­è¢«å£°æ˜ï¼‰ï¼Œ_LightMatrix0è¢«æ›¿æ¢æˆäº†unity_WorldToLightï¼ˆåœ¨AutoLight.cgincæ–‡ä»¶ä¸­è¢«å£°æ˜ï¼‰ã€‚
ä½¿ç”¨äº†ä¸€äº›å†…ç½®å‡½æ•°æ¥ä»£æ›¿æŸäº›è¿ç®—ï¼Œä¾‹å¦‚mul(UNITY_MATRIX_MVP,)ç›¸å…³è®¡ç®—è¢«æ›¿æ¢æˆäº†UnityObjectToClipPos()ã€‚
åœ¨å­¦ä¹ æœ¬ä¹¦æ—¶ï¼Œè¯»è€…éœ€è¦æ³¨æ„ä»£ç ä¸­ä¸€äº›ç”±äºæ›´æ–°é€ æˆçš„å˜åŒ–ã€‚ ä»Unity 5.5å¼€å§‹ï¼ŒUnityåœ¨æŸäº›å¹³å°ï¼ˆå¦‚DX11ã€DX12ã€PS4ã€Xbox
Oneã€Metalï¼‰ç­‰å¹³å°å¯¹æ·±åº¦ç¼“å­˜è¿›è¡Œäº†åè½¬æ“ä½œï¼Œä½¿å¾—åœ¨è¿‘å¹³é¢å¤„çš„æ·±åº¦å€¼ä¸º1ï¼Œè€Œè¿œå¹³é¢å¤„ä¸º0ã€‚è¿™æ ·åšçš„åŸå› ä¸»è¦æ˜¯ä¸ºäº†æ›´åŠ å……åˆ†å¾—åˆ©ç”¨æµ®ç‚¹æ·±åº¦ç¼“å­˜ï¼Œå…·ä½“åŸå› å¯ä»¥å‚è§NVIDIAçš„ç›¸å…³åšå®¢
Depth Precision Visualizedã€‚Unityåœ¨ Upgrading to Unity 5.5å’Œ Platform-specific
rendering differences æ–‡æ¡£ä¸­å¯¹æ­¤è¿›è¡Œäº†è¯´æ˜ã€‚
åœ¨æœ¬ä¹¦ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ç¬¬13ç« ç”¨åˆ°äº†æ·±åº¦çº¹ç†ï¼Œå…¶ä¸­å¯¹äºä½¿ç”¨äº†Linear01Depthã€LinearEyeDepthç­‰Unityå†…ç½®å‡½æ•°çš„éƒ¨åˆ†ä¸å—æ­¤å˜åŒ–å½±å“ï¼Œä½†æˆ‘ä»¬åœ¨Chapter13-MotionBlurWithDepthTextureä¸­ç›´æ¥è®¿é—®äº†æ·±åº¦å€¼æ¥è®¡ç®—ä¸–ç•Œç©ºé—´ä¸‹çš„åæ ‡ï¼š
// Get the depth buffer value at this
pixel.![](/image/https%3A%2F%2Fgithub.com%2Ffavicon.ico?table=block&id=b6fee874-d7c1-4012-9f78-377e08077b09&userId=&cache=v2)https://github.com/candycat1992/Unity_Shaders_Book#%E7%AC%AC%E5%9B%9B%E7%AB%A0%E5%8B%98%E8%AF%AF![](https://avatars1.githubusercontent.com/u/5907064?s=400&v=4)](https://github.com/candycat1992/Unity_Shaders_Book#%E7%AC%AC%E5%9B%9B%E7%AB%A0%E5%8B%98%E8%AF%AF)

é—«è€å¸ˆçš„æ¨å¯¼ååˆ†ç®€æ´æ˜“æ‡‚ï¼Œæˆ‘ä¹Ÿå°½é‡æŠŠè¿‡ç¨‹è¡¥å……åˆ°æ–‡ç« ä¸­ï¼Œè¯»è€…çœ‹äº†æˆ‘ç›¸ä¿¡è‚¯å®šä¹Ÿèƒ½è·Ÿç€æ€è·¯æŠŠå˜æ¢å…¬å¼æ¨å¯¼å‡ºæ¥ã€‚

åœ¨è¯»æœ¬æ–‡çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿæ¨èå‚è€ƒä¸Šé¢æåˆ°çš„è§†é¢‘å’Œ pdf äº’ç›¸å‚è€ƒï¼Œæœ¬æ–‡æ˜¯è§†é¢‘ä¸­æ¨å¯¼çš„è¯¦ç»†ç¬”è®°ï¼Œå†¯ä¹ä¹çš„ pdf
ä¸­è™½ç„¶æ²¡æœ‰æŠ•å½±å˜æ¢çš„æ¨å¯¼ï¼Œä½†æ˜¯åœ¨å¾ˆå¤šåœ°æ–¹éƒ½æŠŠç†è®ºè®²çš„ååˆ†æ¸…æ™°ï¼Œä¾‹å¦‚å¿…è¦çš„æ•°å­¦åŸºç¡€å’Œå„ç§å›¾å½¢å­¦æ¦‚å¿µçš„è®²è§£ã€‚

çº¿æ€§å˜æ¢

xâ€²=ax+byyâ€²=cx+dy\begin{array}{l}x^{\prime}=a x+b y \\\ y^{\prime}=c x+d
y\end{array}xâ€²=ax+byyâ€²=cx+dyâ€‹

å¦‚æœæˆ‘ä»¬å¯ä»¥æŠŠå˜æ¢å†™æˆè¿™æ ·ä¸€ç§å½¢å¼ï¼ŒçŸ©é˜µä¹˜ä»¥è¾“å…¥åæ ‡ç­‰äºè¾“å‡ºåæ ‡ï¼Œè¿™æ ·å¯ä»¥å«åšçº¿æ€§å˜æ¢ã€‚

[xâ€²yâ€²]=[abcd][xy]\left[\begin{array}{l}x^{\prime} \\\
y^{\prime}\end{array}\right]=\left[\begin{array}{ll}a & b \\\ c &
d\end{array}\right]\left[\begin{array}{l}x \\\
y\end{array}\right][xâ€²yâ€²â€‹]=[acâ€‹bdâ€‹][xyâ€‹]

xâ€²=Mx\mathbf{x}^{\prime}=\mathbf{M} \mathbf{x}xâ€²=Mx

Scale Matrix

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F7980791e-d4d5-459e-92a7-dc873238b93d%2FUntitled.png?table=block&id=6c54d524-cd13-4bc0-943e-d5335afa2508&width=4580&userId=&cache=v2)

xâ€²=sxyâ€²=sy\begin{array}{l}x^{\prime}=s x \\\ y^{\prime}=s
y\end{array}xâ€²=sxyâ€²=syâ€‹

å…¶å˜æ¢çŸ©é˜µï¼š

[xâ€²yâ€²]=[s00s][xy]\left[\begin{array}{l}x^{\prime} \\\
y^{\prime}\end{array}\right]=\left[\begin{array}{ll}s & 0 \\\ 0 &
s\end{array}\right]\left[\begin{array}{l}x \\\
y\end{array}\right][xâ€²yâ€²â€‹]=[s0â€‹0sâ€‹][xyâ€‹]

Scale (Non-Uniform)

x y å¯ä»¥ä¸å‡åŒ€åœ°ç¼©æ”¾

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2Fbf5e9ed4-c0cc-4b1e-8871-918810c0295b%2FUntitled.png?table=block&id=de235101-40b5-4830-aaca-3779e9228df4&width=4560&userId=&cache=v2)

[xâ€²yâ€²]=[sx00sy][xy]\left[\begin{array}{l}x^{\prime} \\\
y^{\prime}\end{array}\right]=\left[\begin{array}{ll}s_{x} & 0 \\\ 0 &
s_{y}\end{array}\right]\left[\begin{array}{l}x \\\
y\end{array}\right][xâ€²yâ€²â€‹]=[sxâ€‹0â€‹0syâ€‹â€‹][xyâ€‹]

Reflection Matrix

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F0019d9e0-5276-4fdb-8959-113624c42c51%2FUntitled.png?table=block&id=f61a183f-e92c-4178-aab6-07a330c7d0f7&width=4440&userId=&cache=v2)

Horizontal reflection:

xâ€²=âˆ’xyâ€²=y\begin{array}{l}x^{\prime}=-x \\\ y^{\prime}=y\end{array}xâ€²=âˆ’xyâ€²=yâ€‹

[xâ€²yâ€²]=[âˆ’1001][xy]\left[\begin{array}{l}x^{\prime} \\\
y^{\prime}\end{array}\right]=\left[\begin{array}{cc}-1 & 0 \\\ 0 &
1\end{array}\right]\left[\begin{array}{l}x \\\
y\end{array}\right][xâ€²yâ€²â€‹]=[âˆ’10â€‹01â€‹][xyâ€‹]

Shear Matrix

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F32529a83-94b1-45a5-b395-f5b500260cb2%2FUntitled.png?table=block&id=b359667c-b183-4ca1-9d7b-b455b0f0f645&width=2230&userId=&cache=v2)

2D Rotation Matrix

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F5a2649b5-4b3d-4b42-bfbc-2e4cf2118e84%2FUntitled.png?table=block&id=f2ea72d5-2355-4361-a753-b5f140596af0&width=2280&userId=&cache=v2)

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2Fce8cb656-0bc3-4f0d-b34f-cc7fa06f61fd%2FUntitled.png?table=block&id=a1c0da52-be95-4887-8e03-5edcdfb1c979&width=2160&userId=&cache=v2)

é½æ¬¡åæ ‡

Translation

å¹³ç§»å˜æ¢éå¸¸ç‰¹æ®Šã€‚

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F0fc232ed-4f78-4c20-a3fe-6c934f75d3d1%2FUntitled.png?table=block&id=33ad5eab-98a0-4d95-8315-dfbbb9ea76db&width=4510&userId=&cache=v2)

xâ€²=x+txyâ€²=y+ty\begin{array}{l}x^{\prime}=x+t_{x} \\\
y^{\prime}=y+t_{y}\end{array}xâ€²=x+txâ€‹yâ€²=y+tyâ€‹â€‹

å†™å‡ºæ¥ç®€å•ï¼Œä½†æ˜¯ä¸¤ä¸ªå¼å­ä¸èƒ½å†™æˆçº¿æ€§å˜æ¢çš„å½¢å¼ã€‚

[xâ€²yâ€²]=[abcd][xy]\left[\begin{array}{l}x^{\prime} \\\
y^{\prime}\end{array}\right]=\left[\begin{array}{ll}a & b \\\ c &
d\end{array}\right]\left[\begin{array}{l}x \\\
y\end{array}\right][xâ€²yâ€²â€‹]=[acâ€‹bdâ€‹][xyâ€‹]

åªèƒ½å†™æˆï¼š

[xâ€²yâ€²]=[abcd][xy]+[txty]\left[\begin{array}{l}x^{\prime} \\\
y^{\prime}\end{array}\right]=\left[\begin{array}{ll}a & b \\\ c &
d\end{array}\right]\left[\begin{array}{l}x \\\
y\end{array}\right]+\left[\begin{array}{l}t_{x} \\\
t_{y}\end{array}\right][xâ€²yâ€²â€‹]=[acâ€‹bdâ€‹][xyâ€‹]+[txâ€‹tyâ€‹â€‹]

å› æ­¤å¹³ç§»å˜æ¢å¹¶ä¸æ˜¯çº¿æ€§å˜æ¢ã€‚

ä½†æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›å°†å¹³ç§»å˜æ¢çœ‹ä½œä¸€ä¸ªç‰¹æ®Šçš„ä¾‹å­ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•å°†ç¼©æ”¾ã€é”™åˆ‡ã€å¹³ç§»ç­‰å˜æ¢ç”¨ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥è¡¨ç¤ºï¼Ÿ

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

åœ¨è®¡ç®—æœºç§‘å­¦ï¼Œæ°¸è¿œè¦è€ƒè™‘â€œTrade-
Offâ€ã€‚æ•°æ®ç»“æ„ä¸­ä¸åŒé™ä½æ—¶é—´å¤æ‚åº¦çš„åŠæ³•éƒ½ä¼šå¼•å…¥ç©ºé—´å¤æ‚åº¦ã€‚å¦‚æœä¸¤è€…éƒ½èƒ½ä½å°±å¾ˆå¥½ï¼Œä½†æ›´å¤šæ—¶å€™æ˜¯éæ­¤å³å½¼çš„äº‹æƒ…ã€‚â€œNo Free Lunch
Theoryâ€ã€‚

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F789fbf68-a4dd-4c42-8d17-4d1db7b08a58%2FUntitled.png?table=block&id=f5ad08b5-eb33-48d6-9bab-393048a16adb&width=1950&userId=&cache=v2)

å¼•å…¥é½æ¬¡åæ ‡ï¼Œå¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªç»´åº¦æ¥å°†å¹³ç§»å˜æ¢ä¹Ÿå†™æˆçŸ©é˜µä¹˜ä¸€ä¸ªç‚¹çš„å½¢å¼ã€‚

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

å‘é‡å…·æœ‰å¹³ç§»ä¸å˜æ€§ï¼Œå› æ­¤åé¢æ˜¯ (x, y, 0)ï¼Œå¹³ç§»å˜æ¢åä¹Ÿä¸å˜ã€‚

æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ w åˆ†é‡æ¥æ¨å‡ºæˆ‘ä»¬æ“ä½œçš„ç»“æœï¼š

Valid operation if w-coordinate of result is 1 or 0

â€¢

vector + vector = vector

â€¢

point â€“ point = vector

â€¢

point + vector = point

â€¢

point + point = ??

Affine Transformations ä»¿å°„å˜æ¢

Affine map = linear map + translation

(xâ€²yâ€²)=(abcd)â‹…(xy)+(txty)\left(\begin{array}{l}x^{\prime} \\\
y^{\prime}\end{array}\right)=\left(\begin{array}{ll}a & b \\\ c &
d\end{array}\right) \cdot\left(\begin{array}{l}x \\\
y\end{array}\right)+\left(\begin{array}{l}t_{x} \\\
t_{y}\end{array}\right)(xâ€²yâ€²â€‹)=(acâ€‹bdâ€‹)â‹…(xyâ€‹)+(txâ€‹tyâ€‹â€‹)

Using homogenous coordinates:

(xâ€²yâ€²1)=(abtxcdty001)â‹…(xy1)\left(\begin{array}{l}x^{\prime} \\\ y^{\prime} \\\
1\end{array}\right)=\left(\begin{array}{ccc}a & b & t_{x} \\\ c & d & t_{y}
\\\ 0 & 0 & 1\end{array}\right) \cdot\left(\begin{array}{l}x \\\ y \\\
1\end{array}\right)ââ›â€‹xâ€²yâ€²1â€‹â ââ€‹=ââ›â€‹ac0â€‹bd0â€‹txâ€‹tyâ€‹1â€‹â ââ€‹â‹…ââ›â€‹xy1â€‹â ââ€‹

2D Transformations

Scale

S(sx,sy)=(sx000sy000 1 )\mathbf{S}\left(s_{x},
s_{y}\right)=\left(\begin{array}{ccc}s_{x} & 0 & 0 \\\ 0 & s_{y} & 0 \\\ 0 & 0
& \text { 1 }\end{array}\right)S(sxâ€‹,syâ€‹)=ââ›â€‹sxâ€‹00â€‹0syâ€‹0â€‹00 1 â€‹â ââ€‹

Rotation

R(Î±)=(cosâ¡Î±âˆ’sinâ¡Î±0sinâ¡Î±cosâ¡Î±0001)\mathbf{R}(\alpha)=\left(\begin{array}{ccc}\cos
\alpha & -\sin \alpha & 0 \\\ \sin \alpha & \cos \alpha & 0 \\\ 0 & 0 &
1\end{array}\right)R(Î±)=ââ›â€‹cosÎ±sinÎ±0â€‹âˆ’sinÎ±cosÎ±0â€‹001â€‹â ââ€‹

Translation

T(tx,ty)=(10tx01ty001)\mathbf{T}\left(t_{x},
t_{y}\right)=\left(\begin{array}{ccc}1 & 0 & t_{x} \\\ 0 & 1 & t_{y} \\\ 0 & 0
& 1\end{array}\right)T(txâ€‹,tyâ€‹)=ââ›â€‹100â€‹010â€‹txâ€‹tyâ€‹1â€‹â ââ€‹

é€†å˜æ¢

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F442dd652-02ee-4412-a2cb-
dba9ce724635%2FUntitled.png?table=block&id=9545ccd1-3646-47f5-9498-dfbe259746ed&width=2150&userId=&cache=v2)

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F324b9f09-3c22-45e3-93ac-c63834fbbd60%2FUntitled.png?table=block&id=16800608-c22f-4a01-95d1-934132ecadef&width=2290&userId=&cache=v2)

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F14e201af-
dcab-416a-8342-9b877c6c2912%2FUntitled.png?table=block&id=cc30360b-7c01-4548-8c01-93857e1ee05a&width=2290&userId=&cache=v2)

å› æ­¤å˜æ¢é¡ºåºæ˜¯å¾ˆé‡è¦çš„ï¼Œä¸æ»¡è¶³äº¤æ¢å¾‹ã€‚

R45â‹…T(1,0)â‰ T(1,0)â‹…R45R_{45} \cdot T_{(1,0)} \neq T_{(1,0)} \cdot
R_{45}R45â€‹â‹…T(1,0)â€‹î€ =T(1,0)â€‹â‹…R45â€‹

çŸ©é˜µæ˜¯ä»å³åˆ°å·¦è¿ç®—çš„ï¼š

T(1,0)â‹…R45[xy1]=[101010001][cosâ¡45âˆ˜âˆ’sinâ¡45âˆ˜0sinâ¡45âˆ˜cosâ¡45âˆ˜0001][xy1]T_{(1,0)}
\cdot R_{45}\left[\begin{array}{l}x \\\ y \\\
1\end{array}\right]=\left[\begin{array}{ccc}1 & 0 & 1 \\\ 0 & 1 & 0 \\\ 0 & 0
& 1\end{array}\right]\left[\begin{array}{ccc}\cos 45^{\circ} & -\sin
45^{\circ} & 0 \\\ \sin 45^{\circ} & \cos 45^{\circ} & 0 \\\ 0 & 0 &
1\end{array}\right]\left[\begin{array}{l}x \\\ y \\\
1\end{array}\right]T(1,0)â€‹â‹…R45â€‹â£â¡â€‹xy1â€‹â¦â¤â€‹=â£â¡â€‹100â€‹010â€‹101â€‹â¦â¤â€‹â£â¡â€‹cos45âˆ˜sin45âˆ˜0â€‹âˆ’sin45âˆ˜cos45âˆ˜0â€‹001â€‹â¦â¤â€‹â£â¡â€‹xy1â€‹â¦â¤â€‹

çŸ©é˜µæ²¡æœ‰äº¤æ¢å¾‹ï¼Œä½†æœ‰ç»“åˆå¾‹ã€‚

An(â€¦A2(A1(x)))=Anâ‹¯A2â‹…A1â‹…(xy1)A_{n}\left(\ldots
A_{2}\left(A_{1}(\mathbf{x})\right)\right)=\mathbf{A}_{n} \cdots
\mathbf{A}_{2} \cdot \mathbf{A}_{1} \cdot\left(\begin{array}{l}x \\\ y \\\
1\end{array}\right)Anâ€‹(â€¦A2â€‹(A1â€‹(x)))=Anâ€‹â‹¯A2â€‹â‹…A1â€‹â‹…ââ›â€‹xy1â€‹â ââ€‹

å°† Anâ‹¯A2â‹…A1\mathbf{A}_{n} \cdots \mathbf{A}_{2} \cdot \mathbf{A}_{1}
Anâ€‹â‹¯A2â€‹â‹…A1â€‹ï»¿ ç»“åˆæˆä¸€ä¸ªå˜æ¢çŸ©é˜µã€‚

ä¸‰ç»´å˜æ¢

é½æ¬¡åæ ‡ç³»ä¸‹çš„ä¸‰ç»´å˜æ¢å¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼

(xâ€²yâ€²zâ€²1)=(abctxdeftyghitz0001)â‹…(xyz1)\left(\begin{array}{l}x^{\prime} \\\
y^{\prime} \\\ z^{\prime} \\\ 1\end{array}\right)=\left(\begin{array}{llll}a &
b & c & t_{x} \\\ d & e & f & t_{y} \\\ g & h & i & t_{z} \\\ 0 & 0 & 0 &
1\end{array}\right) \cdot\left(\begin{array}{l}x \\\ y \\\ z \\\
1\end{array}\right)ââ›â€‹xâ€²yâ€²zâ€²1â€‹â ââ€‹=ââ›â€‹adg0â€‹beh0â€‹cfi0â€‹txâ€‹tyâ€‹tzâ€‹1â€‹â ââ€‹â‹…ââ›â€‹xyz1â€‹â ââ€‹

Scale

S(sx,sy,sz)=(sx0000sy0000sz00001)\mathbf{S}\left(s_{x}, s_{y},
s_{z}\right)=\left(\begin{array}{cccc}s_{x} & 0 & 0 & 0 \\\ 0 & s_{y} & 0 & 0
\\\ 0 & 0 & s_{z} & 0 \\\ 0 & 0 & 0 &
1\end{array}\right)S(sxâ€‹,syâ€‹,szâ€‹)=ââ›â€‹sxâ€‹000â€‹0syâ€‹00â€‹00szâ€‹0â€‹0001â€‹â ââ€‹

Translation

T(tx,ty,tz)=(100tx010ty001tz0001)\mathbf{T}\left(t_{x}, t_{y},
t_{z}\right)=\left(\begin{array}{cccc}1 & 0 & 0 & t_{x} \\\ 0 & 1 & 0 & t_{y}
\\\ 0 & 0 & 1 & t_{z} \\\ 0 & 0 & 0 &
1\end{array}\right)T(txâ€‹,tyâ€‹,tzâ€‹)=ââ›â€‹1000â€‹0100â€‹0010â€‹txâ€‹tyâ€‹tzâ€‹1â€‹â ââ€‹

Rotation

ç»•è½´æ—‹è½¬

Rotation around x-, y-, or z-axis

Rx(Î±)=(10000cosâ¡Î±âˆ’sinâ¡Î±00sinâ¡Î±cosâ¡Î±00001)\mathbf{R}_{x}(\alpha)=\left(\begin{array}{cccc}1
& 0 & 0 & 0 \\\ 0 & \cos \alpha & -\sin \alpha & 0 \\\ 0 & \sin \alpha & \cos
\alpha & 0 \\\ 0 & 0 & 0 &
1\end{array}\right)Rxâ€‹(Î±)=ââ›â€‹1000â€‹0cosÎ±sinÎ±0â€‹0âˆ’sinÎ±cosÎ±0â€‹0001â€‹â ââ€‹

Ry(Î±)=(cosâ¡Î±0sinâ¡Î±00100âˆ’sinâ¡Î±0cosâ¡Î±00001)\mathbf{R}_{y}(\alpha)=\left(\begin{array}{cccc}\cos
\alpha & 0 & \sin \alpha & 0 \\\ 0 & 1 & 0 & 0 \\\ -\sin \alpha & 0 & \cos
\alpha & 0 \\\ 0 & 0 & 0 &
1\end{array}\right)Ryâ€‹(Î±)=ââ›â€‹cosÎ±0âˆ’sinÎ±0â€‹0100â€‹sinÎ±0cosÎ±0â€‹0001â€‹â ââ€‹

Rz(Î±)=(cosâ¡Î±âˆ’sinâ¡Î±00sinâ¡Î±cosâ¡Î±0000100001)\mathbf{R}_{z}(\alpha)=\left(\begin{array}{cccc}\cos
\alpha & -\sin \alpha & 0 & 0 \\\ \sin \alpha & \cos \alpha & 0 & 0 \\\ 0 & 0
& 1 & 0 \\\ 0 & 0 & 0 &
1\end{array}\right)Rzâ€‹(Î±)=ââ›â€‹cosÎ±sinÎ±00â€‹âˆ’sinÎ±cosÎ±00â€‹0010â€‹0001â€‹â ââ€‹

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F607945bd-0ec9-445b-bbe9-a2a9cbe42a7a%2FUntitled.png?table=block&id=3eb5ad06-e917-4026-8424-b0e490631bdd&width=810&userId=&cache=v2)

ç»•ç€ x è½´æ—‹è½¬ï¼Œè¯´æ˜ y å’Œ z éƒ½æ˜¯åœ¨è¿›è¡Œæ—‹è½¬çš„ï¼Œä½† x ä¸å˜ã€‚å› æ­¤ç»• x è½´çš„æ—‹è½¬çŸ©é˜µç›¸æ¯”äºŒç»´çš„æ—‹è½¬çŸ©é˜µï¼Œç¬¬ä¸€è¡Œæ˜¯ä¸å˜çš„ã€‚ä¸­é—´éƒ¨åˆ†å’ŒäºŒç»´æ—‹è½¬çŸ©é˜µä¸€æ ·ã€‚

ç»• y è½´æ—‹è½¬ä¸ä¸€æ ·ï¼Œè¿™é‡Œæ¶‰åŠåˆ°æˆ‘ä»¬è¦å¦‚ä½•æ€è€ƒè½´çš„ç›¸äº’é¡ºåºã€‚

æ ¹æ®å³æ‰‹èºæ—‹å®šåˆ™ï¼Œx å‰ä¹˜ y å¾—åˆ° zï¼Œy å‰ä¹˜ z å¾—åˆ° xã€‚ä½† z å‰ä¹˜ x æ‰èƒ½å¾—åˆ° yï¼Œæ˜¯åçš„ï¼Œå› æ­¤ Ry éƒ¨åˆ†ä¸ä¸€æ ·ã€‚

Rodrigues' Rotation Formula

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

æˆ‘ä»¬èƒ½å¤Ÿè§£å†³ä¸€äº›ç®€å•çš„é—®é¢˜ï¼Œå¤æ‚çš„é—®é¢˜å¯ä»¥è½¬åŒ–æˆä¸€äº›ç®€å•é—®é¢˜çš„ç»„åˆã€‚

ç»™å®šæ ¹æ®ä¸‰ä¸ªè½´çš„æ—‹è½¬ï¼Œèƒ½å¦å°†æŸä¸€ä¸ªæ–¹å‘æ—‹è½¬åˆ°ä»»æ„ä¸€ä¸ªæ–¹å‘ä¸Šå»ï¼Ÿ

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F611047f3-405d-48f4-9f3c-d7ea806bc2ad%2FUntitled.png?table=block&id=8be61fba-7904-453f-9975-787da9b687ee&width=2080&userId=&cache=v2)

Rotation by angle Î± round axis n

æœ‰äººå°†ä»»æ„ä¸€ä¸ªæ—‹è½¬åˆ†è§£æˆé€šè¿‡ x y z è½´åˆ†åˆ«åšæ—‹è½¬ã€‚

R(n,Î±)=cosâ¡(Î±)I+(1âˆ’cosâ¡(Î±))nnT+sinâ¡(Î±)(0âˆ’nznynz0âˆ’nxâˆ’nynx0)\mathbf{R}(\mathbf{n},
\alpha)=\cos (\alpha) \mathbf{I}+(1-\cos (\alpha)) \mathbf{n}
\mathbf{n}^{T}+\sin (\alpha)\left(\begin{array}{ccc}0 & -n_{z} & n_{y} \\\
n_{z} & 0 & -n_{x} \\\ -n_{y} & n_{x} &
0\end{array}\right)R(n,Î±)=cos(Î±)I+(1âˆ’cos(Î±))nnT+sin(Î±)ââ›â€‹0nzâ€‹âˆ’nyâ€‹â€‹âˆ’nzâ€‹0nxâ€‹â€‹nyâ€‹âˆ’nxâ€‹0â€‹â ââ€‹

è¯æ˜è¿‡ç¨‹å¯ä»¥å‚è€ƒé—«ä»¤çªè€å¸ˆçš„è¯æ˜ï¼š

GAMES101_Lecture_04_supp.pdf

660.9KB

å…¬å¼ç»™äº†æˆ‘ä»¬ä¸€ä¸ªæ—‹è½¬çŸ©é˜µï¼Œå®šä¹‰ä¸­ç»™äº†æˆ‘ä»¬ä¸€ä¸ªæ—‹è½¬è½´ n å’Œæ—‹è½¬è§’åº¦
Î±ã€‚æ—‹è½¬è§’åº¦å¥½ç†è§£ï¼Œä½†æ—‹è½¬è½´ä¼¼ä¹ä¸èƒ½è¿™ä¹ˆç®€å•åœ°å®šä¹‰ã€‚å› ä¸ºä¸€ä¸ªæ—‹è½¬è½´é¦–å…ˆè·Ÿèµ·ç‚¹æœ‰å…³ç³»ï¼Œç„¶åè·Ÿæ–¹å‘æœ‰å…³ç³»ï¼Œåªç»™ä¸€ä¸ªå‘é‡æ˜¯ä¸æ˜¯ä¸å¤ªåˆé€‚ï¼Ÿ

å‡å¦‚è¯´æ²¿ç€ y è½´æ—‹è½¬ï¼Œè·Ÿæ²¿ç€ xxxï»¿ å’Œ nnnï»¿ å„ç­‰äº 1 å¹¶ä¸”ä¹Ÿæ˜¯æ²¿ç€ y
æ–¹å‘çš„å‘é‡ã€‚æ–¹å‘ä¸€æ ·ï¼Œä½†èµ·ç‚¹ä¸ä¸€æ ·ï¼Œç»“æœè‚¯å®šä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚å› æ­¤æˆ‘ä»¬è¯´æ²¿ç€æŸä¸ªè½´çš„æ–¹å‘æ—‹è½¬ï¼Œå°±é»˜è®¤äº†æ˜¯è¿‡åŸç‚¹çš„ï¼Œè¿™æ ·èµ·ç‚¹å°±åœ¨åŸç‚¹ä¸Šï¼Œæ–¹å‘å°±æ˜¯ nnnï»¿ æ–¹å‘ã€‚

é‚£ä¹ˆå¦‚æœè½´ n
å¯ä»¥å¹³ç§»æ€ä¹ˆåŠï¼Ÿé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†å…¶è¿›è¡Œå˜æ¢çš„åˆ†è§£ã€‚å¦‚æœæˆ‘ä»¬è¦æ²¿ç€ä»»æ„è½´æ—‹è½¬ä¸”è½´çš„èµ·ç‚¹ä¸åœ¨åŸç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„ä¸œè¥¿ç§»åˆ°èµ·ç‚¹ä¸ºåŸç‚¹çš„æ¡ä»¶ä¸‹ï¼Œå†æ—‹è½¬ï¼Œå†ç§»å›å»ã€‚

å››å…ƒæ•°ç›¸å…³

æˆ‘ä»¬ä¸Šé¢æ‰€ç”¨åˆ°çš„æ—‹è½¬çŸ©é˜µæ˜¯ä¸å¤ªé€‚åˆåšæ’å€¼çš„ï¼Œä¾‹å¦‚äºŒç»´æ—‹è½¬ 10 åº¦çš„æ—‹è½¬çŸ©é˜µåŠ äºŒç»´æ—‹è½¬ 20 åº¦çš„æ—‹è½¬çŸ©é˜µæ±‚å¹³å‡ï¼Œä¸èƒ½å¾—åˆ°äºŒç»´æ—‹è½¬ 15
åº¦çš„æ—‹è½¬çŸ©é˜µã€‚å››å…ƒæ•°åœ¨è¿™æ–¹é¢æ–¹ä¾¿å¾ˆå¤šã€‚

View/Camera Transformation è§†å›¾å˜æ¢

å®šä¹‰ç›¸æœº

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F2332df3b-7a09-49fd-93dc-55db9277d2f6%2FUntitled.png?table=block&id=f33bc6a2-8a49-436d-9e45-ef44577c2bf2&width=4550&userId=&cache=v2)

å®šä¹‰ä¸€ä¸ªç›¸æœºéœ€è¦ä¸‰ä¸ªå˜é‡ï¼Œä½ç½®ï¼Œæœå‘ï¼Œå’Œä¸€ä¸ªå‘ä¸Šçš„æ–¹å‘ã€‚

è§†å›¾å˜æ¢

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F2dbd3f56-afbd-4662-8b6b-308c947e6d9c%2FUntitled.png?table=block&id=96c4a7cb-e9be-4737-b1fa-279445a16b52&width=4490&userId=&cache=v2)

å½“ç›¸æœºå’Œè¦æ‹çš„ä¸œè¥¿ä¸€èµ·ç§»åŠ¨çš„æ—¶å€™ï¼Œé‚£æ‹å‡ºæ¥çš„ç›¸ç‰‡æ˜¯ä¸€æ ·çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬ç§»åŠ¨ç‰©ä½“æ—¶ï¼Œåªè¦åŒæ—¶ä»¥ç›¸åŒçš„æ–¹å¼ç§»åŠ¨ç›¸æœºï¼Œæ²¡æœ‰ç›¸å¯¹ä½ç½®ï¼Œé‚£ä¹ˆå¾—å‡ºæ¥çš„ç»“æœå°±æ˜¯ä¸€æ ·çš„ã€‚

å¦‚æœæˆ‘ä»¬å°†ç›¸æœºæ”¾åœ¨ä¸€ä¸ªå›ºå®šçš„ä½ç½®ä¸Šï¼Œé‚£ä¹ˆæ‰€æœ‰ä¸œè¥¿åœ¨ç§»åŠ¨æ—¶ï¼Œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯å…¶ä»–ä¸œè¥¿åœ¨ç§»åŠ¨ï¼Œè€Œç›¸æœºä¸€ç›´åœ¨åŸç‚¹ä¸åŠ¨ã€‚ç›¸æœºæ°¸è¿œå¾€ âˆ’z-zâˆ’zï»¿ æ–¹å‘çœ‹ï¼Œä»¥ yyyï»¿
è½´ä¸ºå‘ä¸Šæ–¹å‘ï¼ˆå³æ‰‹åæ ‡ç³»ï¼Œç¬¦åˆ OpenGL ä¼ ç»Ÿï¼‰ã€‚è¿™æ˜¯çº¦å®šä¿—æˆçš„ã€‚ç›¸æœºæ”¾åœ¨åŸç‚¹æœ‰å¾ˆå¤šå¥½å¤„ï¼Œèƒ½ç®€åŒ–è®¡ç®—ã€‚

ä»åæ ‡ç©ºé—´çš„è§’åº¦æ¥çœ‹ï¼Œå°±æ˜¯å°†ç‰©ä½“å’Œç›¸æœºä»ä¸–ç•Œç©ºé—´è½¬åˆ°è§‚å¯Ÿç©ºé—´ï¼ˆæ‘„åƒæœºç©ºé—´ï¼‰ã€‚

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F1ff99d52-c5c1-4820-8a85-393663a179a3%2FUntitled.png?table=block&id=7a75b8b1-0a5c-49ce-b9da-
efdb930a9eda&width=4430&userId=&cache=v2)

æˆ‘ä»¬è¦å°†ç›¸æœºç§»åˆ°åŸç‚¹ï¼Œå°±éœ€è¦å…ˆæŠŠç›¸æœºä¸­å¿ƒ eeeï»¿ å¹³ç§»åˆ°åŸç‚¹ï¼Œè¿˜å¾—æŠŠè§‚å¯Ÿçš„æ–¹å‘ gggï»¿ ç§»åˆ° âˆ’z-zâˆ’zï»¿ ä¸Šï¼Œå†æŠŠå‘ä¸Šæ–¹å‘ tttï»¿ æ—‹è½¬åˆ°
yyyï»¿ æ–¹å‘ä¸Šï¼ŒæŠŠ g^Ã—t^\hat{g}\times \hat{t}g^â€‹Ã—t^ï»¿ çš„æ–¹å‘ç§»åˆ° xxxï»¿ æ–¹å‘ä¸Šã€‚

ä¸‹é¢å°†è¿™ç³»åˆ—æ“ä½œè½¬ä¸ºçŸ©é˜µæ“ä½œã€‚

æ±‚è§†å›¾å˜æ¢çŸ©é˜µ

1.

å…ˆæŠŠç›¸æœºä¸­å¿ƒ eeeï»¿ å¹³ç§»åˆ°åŸç‚¹

MviewM_{v i e w}Mviewâ€‹ï»¿ in math?

â€¢

Letâ€™s write Mview=RviewTviewM_{v i e w}=R_{v i e w} T_{v i e
w}Mviewâ€‹=Rviewâ€‹Tviewâ€‹ï»¿

â€¢

Translate eeeï»¿ to origin

Tview=[100âˆ’xe010âˆ’ye001âˆ’ze0001]T_{v i e w}=\left[\begin{array}{cccc}1 & 0 & 0 &
-x_{e} \\\ 0 & 1 & 0 & -y_{e} \\\ 0 & 0 & 1 & -z_{e} \\\ 0 & 0 & 0 &
1\end{array}\right]Tviewâ€‹=â£â¡â€‹1000â€‹0100â€‹0010â€‹âˆ’xeâ€‹âˆ’yeâ€‹âˆ’zeâ€‹1â€‹â¦â¤â€‹

å¹³ç§»çŸ©é˜µå†™å¥½åï¼Œæ¥ä¸‹æ¥å†™æ—‹è½¬çŸ©é˜µã€‚

2\. æŠŠè§‚å¯Ÿçš„æ–¹å‘ g^\hat{g}g^â€‹ï»¿ æ—‹è½¬åˆ° âˆ’z-zâˆ’zï»¿ ä¸Šï¼ŒæŠŠå‘ä¸Šæ–¹å‘ t^\hat{t}t^ï»¿ æ—‹è½¬åˆ° yyyï»¿
æ–¹å‘ä¸Šï¼Œg^Ã—t^\hat{g}\times \hat{t}g^â€‹Ã—t^ï»¿ çš„æ–¹å‘æ—‹è½¬åˆ° xxxï»¿ æ–¹å‘ä¸Š

â€¢

Rotate g^\hat{g}g^â€‹ï»¿ to âˆ’Z-Zâˆ’Zï»¿ , t^\hat{t}t^ï»¿ to YYYï»¿, g^Ã—t^\hat{g}\times
\hat{t}g^â€‹Ã—t^ï»¿ To XXXï»¿ ï¼ˆä¸–ç•Œç©ºé—´åˆ°è§‚å¯Ÿç©ºé—´ï¼‰

â€¢

Consider its inverse rotation: XXXï»¿ to g^Ã—t^\hat{g}\times \hat{t}g^â€‹Ã—t^ï»¿ ,
YYYï»¿ to t^\hat{t}t^ï»¿, ZZZï»¿ to âˆ’g^-\hat{g}âˆ’g^â€‹ï»¿ ï¼ˆè§‚å¯Ÿç©ºé—´åˆ°ä¸–ç•Œç©ºé—´ï¼‰

æˆ‘ä»¬å¯ä»¥åè¿‡æ¥å†™ï¼Œä¾‹å¦‚æŠŠ xxxï»¿ è½´ (1,0,0)\left( 1,0,0 \right) (1,0,0)ï»¿ æ—‹è½¬åˆ°
g^Ã—t^\hat{g}\times \hat{t}g^â€‹Ã—t^ï»¿ æ–¹å‘ä¸Šçš„æ—‹è½¬çŸ©é˜µï¼Œå°±æ¯” g^Ã—t^\hat{g}\times
\hat{t}g^â€‹Ã—t^ï»¿ ç§»åˆ° xxxï»¿ è½´çš„æ—‹è½¬çŸ©é˜µè¦å¥½å†™å¾ˆå¤šï¼Œè€Œè¿™ä¸¤ä¸ªæ—‹è½¬çŸ©é˜µæ˜¯äº’é€†çš„ã€‚å†™å‡º xxxï»¿ è½´æ—‹è½¬åˆ°
g^Ã—t^\hat{g}\times \hat{t}g^â€‹Ã—t^ï»¿ æ–¹å‘çš„æ—‹è½¬çŸ©é˜µåï¼Œå†æ±‚å…¶é€†å˜æ¢å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ g^Ã—t^\hat{g}\times
\hat{t}g^â€‹Ã—t^ï»¿ ç§»åˆ° xxxï»¿ è½´çš„æ—‹è½¬çŸ©é˜µã€‚

XXXï»¿ to g^Ã—t^\hat{g}\times \hat{t}g^â€‹Ã—t^ï»¿ , YYYï»¿ to t^\hat{t}t^ï»¿, ZZZï»¿ to
âˆ’g^-\hat{g}âˆ’g^â€‹ï»¿ çš„æ—‹è½¬çŸ©é˜µå°±æ˜¯ï¼š

![âš ï¸](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

è¿™é‡Œ ZZZï»¿ to âˆ’g^-\hat{g}âˆ’g^â€‹ï»¿ æ˜¯å› ä¸ºæˆ‘ä»¬å®šä¹‰ç›¸æœºçš„åæ ‡ç©ºé—´ä¸ºå³æ‰‹åæ ‡ç³»ã€‚

Rviewâˆ’1=[xg^Ã—t^xtxâˆ’g0yg^Ã—t^ytyâˆ’g0zg^Ã—t^ztzâˆ’g00001]R_{v i e
w}^{-1}=\left[\begin{array}{cccc}x_{\hat{g} \times \hat{t}} & x_{t} & x_{-g} &
0 \\\ y_{\hat{g} \times \hat{t}} & y_{t} & y_{-g} & 0 \\\ z_{\hat{g} \times
\hat{t}} & z_{t} & z_{-g} & 0 \\\ 0 & 0 & 0 &
1\end{array}\right]Rviewâˆ’1â€‹=â£â¡â€‹xg^â€‹Ã—t^â€‹yg^â€‹Ã—t^â€‹zg^â€‹Ã—t^â€‹0â€‹xtâ€‹ytâ€‹ztâ€‹0â€‹xâˆ’gâ€‹yâˆ’gâ€‹zâˆ’gâ€‹0â€‹0001â€‹â¦â¤â€‹

è¦éªŒè¯ä¹Ÿå¾ˆç®€å•ï¼Œç”¨è¯¥æ—‹è½¬çŸ©é˜µå˜æ¢ xxxï»¿ è½´å°±èƒ½å¾—åˆ° g^Ã—t^\hat{g}\times \hat{t}g^â€‹Ã—t^ï»¿ çš„æ–¹å‘ã€‚

[xg^Ã—t^xtxâˆ’g0yg^Ã—t^ytyâˆ’g0zg^Ã—t^ztzâˆ’g00001][1000]=[xg^Ã—t^yg^Ã—t^zg^Ã—t^0]\left[
\begin{matrix} x_{\hat{g}\times \hat{t}}& x_t& x_{-g}& 0\\\ y_{\hat{g}\times
\hat{t}}& y_t& y_{-g}& 0\\\ z_{\hat{g}\times \hat{t}}& z_t& z_{-g}& 0\\\ 0& 0&
0& 1\\\ \end{matrix} \right] \left[ \begin{array}{c} 1\\\ 0\\\ 0\\\ 0\\\
\end{array} \right] =\left[ \begin{array}{c} \begin{array}{c} x_{\hat{g}\times
\hat{t}}\\\ y_{\hat{g}\times \hat{t}}\\\ \end{array}\\\ z_{\hat{g}\times
\hat{t}}\\\ 0\\\ \end{array} \right]
â£â¡â€‹xg^â€‹Ã—t^â€‹yg^â€‹Ã—t^â€‹zg^â€‹Ã—t^â€‹0â€‹xtâ€‹ytâ€‹ztâ€‹0â€‹xâˆ’gâ€‹yâˆ’gâ€‹zâˆ’gâ€‹0â€‹0001â€‹â¦â¤â€‹â£â¡â€‹1000â€‹â¦â¤â€‹=â£â¡â€‹xg^â€‹Ã—t^â€‹yg^â€‹Ã—t^â€‹â€‹zg^â€‹Ã—t^â€‹0â€‹â¦â¤â€‹

é‚£ä¹ˆæˆ‘ä»¬çš„æ—‹è½¬çŸ©é˜µå°±èƒ½é€šè¿‡å¯¹ä¸Šé¢çš„çŸ©é˜µæ±‚é€†å¾—å‡ºï¼š

å› ä¸ºæ—‹è½¬çŸ©é˜µæ˜¯æ­£äº¤çŸ©é˜µï¼Œå› æ­¤è¦æ±‚é€†çŸ©é˜µï¼Œå¯¹å…¶è½¬ç½®å³å¯ã€‚

Rview=[xg^Ã—t^yg^Ã—t^zg^Ã—t^0xtytzt0xâˆ’gyâˆ’gzâˆ’g00001]R_{v i e
w}=\left[\begin{array}{cccc}x_{\hat{g} \times \hat{t}} & y_{\hat{g} \times
\hat{t}} & z_{\hat{g} \times \hat{t}} & 0 \\\ x_{t} & y_{t} & z_{t} & 0 \\\
x_{-g} & y_{-g} & z_{-g} & 0 \\\ 0 & 0 & 0 &
1\end{array}\right]Rviewâ€‹=â£â¡â€‹xg^â€‹Ã—t^â€‹xtâ€‹xâˆ’gâ€‹0â€‹yg^â€‹Ã—t^â€‹ytâ€‹yâˆ’gâ€‹0â€‹zg^â€‹Ã—t^â€‹ztâ€‹zâˆ’gâ€‹0â€‹0001â€‹â¦â¤â€‹

è¿™æ ·æˆ‘ä»¬ä¸–ç•Œç©ºé—´åˆ°è§‚å¯Ÿç©ºé—´çš„å˜æ¢çŸ©é˜µå°±èƒ½å¾—å‡ºæ¥äº†ï¼šMview=RviewTviewM_{v i e w}=R_{v i e w} T_{v i e
w}Mviewâ€‹=Rviewâ€‹Tviewâ€‹ï»¿

Mview=RviewTview=[xg^Ã—t^yg^Ã—t^zg^Ã—t^0xtytzt0xâˆ’gyâˆ’gzâˆ’g00001][100âˆ’xe010âˆ’ye001âˆ’ze0001]=[xg^Ã—t^yg^Ã—t^zg^Ã—t^âˆ’Vg^Ã—t^Vextytztâˆ’Vt^Vexâˆ’gyâˆ’gzâˆ’gâˆ’Vâˆ’gVe0001]=[xg^Ã—t^yg^Ã—t^zg^Ã—t^âˆ’Vg^Ã—t^Vextytztâˆ’Vt^Veâˆ’xgâˆ’ygâˆ’zgVgVe0001]M_{view}=R_{view}T_{view}
\\\ =\left[ \begin{matrix} x_{\hat{g}\times \hat{t}}& y_{\hat{g}\times
\hat{t}}& z_{\hat{g}\times \hat{t}}& 0\\\ x_t& y_t& z_t& 0\\\ x_{-g}& y_{-g}&
z_{-g}& 0\\\ 0& 0& 0& 1\\\ \end{matrix} \right] \left[ \begin{matrix} 1& 0& 0&
-x_e\\\ 0& 1& 0& -y_e\\\ 0& 0& 1& -z_e\\\ 0& 0& 0& 1\\\ \end{matrix} \right]
\\\ =\left[ \begin{matrix} x_{\hat{g}\times \hat{t}}& y_{\hat{g}\times
\hat{t}}& z_{\hat{g}\times \hat{t}}& -V_{\hat{g}\times \hat{t}}V_e\\\ x_t&
y_t& z_t& -V_{\hat{t}}V_e\\\ x_{-g}& y_{-g}& z_{-g}& -V_{-g}V_e\\\ 0& 0& 0&
1\\\ \end{matrix} \right] \\\ =\left[ \begin{matrix} x_{\hat{g}\times
\hat{t}}& y_{\hat{g}\times \hat{t}}& z_{\hat{g}\times \hat{t}}&
-V_{\hat{g}\times \hat{t}}V_e\\\ x_t& y_t& z_t& -V_{\hat{t}}V_e\\\ -x_g& -y_g&
-z_g& V_gV_e\\\ 0& 0& 0& 1\\\ \end{matrix} \right]
Mviewâ€‹=Rviewâ€‹Tviewâ€‹=â£â¡â€‹xg^â€‹Ã—t^â€‹xtâ€‹xâˆ’gâ€‹0â€‹yg^â€‹Ã—t^â€‹ytâ€‹yâˆ’gâ€‹0â€‹zg^â€‹Ã—t^â€‹ztâ€‹zâˆ’gâ€‹0â€‹0001â€‹â¦â¤â€‹â£â¡â€‹1000â€‹0100â€‹0010â€‹âˆ’xeâ€‹âˆ’yeâ€‹âˆ’zeâ€‹1â€‹â¦â¤â€‹=â£â¡â€‹xg^â€‹Ã—t^â€‹xtâ€‹xâˆ’gâ€‹0â€‹yg^â€‹Ã—t^â€‹ytâ€‹yâˆ’gâ€‹0â€‹zg^â€‹Ã—t^â€‹ztâ€‹zâˆ’gâ€‹0â€‹âˆ’Vg^â€‹Ã—t^â€‹Veâ€‹âˆ’Vt^â€‹Veâ€‹âˆ’Vâˆ’gâ€‹Veâ€‹1â€‹â¦â¤â€‹=â£â¡â€‹xg^â€‹Ã—t^â€‹xtâ€‹âˆ’xgâ€‹0â€‹yg^â€‹Ã—t^â€‹ytâ€‹âˆ’ygâ€‹0â€‹zg^â€‹Ã—t^â€‹ztâ€‹âˆ’zgâ€‹0â€‹âˆ’Vg^â€‹Ã—t^â€‹Veâ€‹âˆ’Vt^â€‹Veâ€‹Vgâ€‹Veâ€‹1â€‹â¦â¤â€‹

å…¶ä¸­ Vg^Ã—t^V_{\hat{g}\times \hat{t}}Vg^â€‹Ã—t^â€‹ï»¿ ä¸º g^Ã—t^\hat{g}\times
\hat{t}g^â€‹Ã—t^ï»¿ çš„å‘é‡ï¼ŒVeV_eVeâ€‹ï»¿ ä¸ºç›¸æœºåŸç‚¹ã€‚

ç›¸æœºéœ€è¦è¿›è¡Œè¿™ç§å˜æ¢ï¼Œå˜æ¢åˆ°çº¦å®šä¿—æˆçš„ä½ç½®ï¼ˆåŸç‚¹ï¼‰ä¸Šå»ï¼Œé‚£ä¹ˆå…¶ä»–æ‰€æœ‰ç‰©ä½“ä¹Ÿéœ€è¦åšè¿™æ ·çš„å˜æ¢ï¼Œè¿™æ ·ç›¸å¯¹è¿åŠ¨ä¸å˜ã€‚è¿™ä¸ªå°±æ˜¯è§†å›¾å˜æ¢ã€‚

æ¨¡å‹å˜æ¢å’Œè§†å›¾å˜æ¢ç»å¸¸ä¸€èµ·è¢«ç§°ä¸ºæ¨¡å‹è§†å›¾å˜æ¢ï¼ˆModelView Transformationï¼‰ã€‚

Projection Transformation æŠ•å½±å˜æ¢

Projection in Computer Graphics

â€¢

3D to 2D

â€¢

Orthographic projection

â€¢

Perspective projection

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F6dd18a74-9191-45cd-
ac0d-431c7f012ed1%2FUntitled.png?table=block&id=af80fc15-a5b9-4eef-a61b-65a5942cfa8a&width=4110&userId=&cache=v2)

Perspective projection vs. orthographic projection

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F88831512-c3fe-4721-a196-65861d8de4ae%2FUntitled.png?table=block&id=080d8a96-484e-49b8-b290-7ee94fa2b651&width=3340&userId=&cache=v2)

Orthographic Projection æ­£äº¤æŠ•å½±

æ–¹æ³•ä¸€

A simple way of understanding

â€¢

Camera located at origin, looking at -Z, up at Y (looks familiar?)

â€¢

Drop Z coordinate

â€¢

Translate and scale the resulting rectangle to [âˆ’1,1]2[-1,1]^{2}[âˆ’1,1]2ï»¿

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F536df52b-0f0a-4774-9060-706480f4c0a6%2FUntitled.png?table=block&id=3664fd41-76a3-4953-b355-23b850c9eaac&width=1430&userId=&cache=v2)

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

å°†åæ ‡ä¸­çš„ z æ‰”æ‰ï¼Œå¦‚ä½•åŒºåˆ†ç‰©ä½“çš„å‰å’Œåï¼Ÿ

æ„Ÿå…´è¶£å¯ä»¥å‚è€ƒ [Catlikecoding Render
1](https://catlikecoding.com/unity/tutorials/rendering/part-1/) ä¸­ Orthographic
Camera éƒ¨åˆ†ã€‚

æ–¹æ³•äºŒ

In general, we want to map a cuboid [l, r] x [b, t] x [f, n] to the â€œcanonical
(æ­£åˆ™ã€è§„èŒƒã€æ ‡å‡†)â€ cube [âˆ’1,1]3[-1,1]^{3}[âˆ’1,1]3ï»¿

æˆ‘ä»¬åœ¨ xxxï»¿ è½´ä¸Šå®šä¹‰å·¦å’Œå³ [l,r][l, r][l,r]ï»¿ ï¼ˆå·¦æ¯”å³å°ï¼‰ï¼Œyyyï»¿ è½´ä¸Šå®šä¹‰ä¸‹å’Œä¸Š [b,t][b,
t][b,t]ï»¿ï¼ˆä¸‹æ¯”ä¸Šå°ï¼‰ï¼Œzzzï»¿ è½´ä¸Šå®šä¹‰è¿œå’Œè¿‘ [f,n][f, n][f,n]ï»¿ï¼ˆè¿œæ¯”è¿‘å°ï¼‰ã€‚

ä¸ç®¡ x, y å¤šå¤§ï¼Œéƒ½å°†å…¶æ˜ å°„åˆ° [âˆ’1,1][-1, 1][âˆ’1,1]ï»¿
ä¹‹é—´ã€‚è¿™ä¹Ÿæ˜¯ä¸ªçº¦å®šä¿—æˆçš„äº‹æƒ…ï¼Œèƒ½æ–¹ä¾¿è®¡ç®—ã€‚è¿™æ ·ä»»ä½•ç©ºé—´ä¸­çš„é•¿æ–¹ä½“ï¼Œéƒ½å¯ä»¥æ˜ å°„æˆä¸€ä¸ªæ ‡å‡†çš„ç«‹æ–¹ä½“ã€‚

è¿™ä¹Ÿæ˜¯æ ‡å‡†åŒ–è®¾å¤‡åæ ‡ï¼ˆNDCï¼‰çš„å®šä¹‰ã€‚

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

ä¸Šé¢çš„å·¦æ¯”å³å°æ˜¯ç›¸å¯¹äº xxxï»¿ è½´æ¥è¯´çš„ï¼Œä¸‹æ¯”ä¸Šå°æ˜¯ç›¸å¯¹äº yyyï»¿ è½´è¯´çš„ï¼Œä½† zzzï»¿ è½´ä¸Šä¸å¤ªç›´è§‚ï¼Œå› ä¸ºæˆ‘ä»¬æ¨å¯¼çš„ NDC
æ˜¯å³æ‰‹åæ ‡ç³»ï¼Œï¼ˆç›¸æœºï¼‰çœ‹çš„æ˜¯ âˆ’z-zâˆ’zï»¿ æ–¹å‘ï¼Œå› æ­¤ä¸€ä¸ªé¢ç¦»æˆ‘ä»¬è¿œï¼Œè¯´æ˜ zzzï»¿ å€¼æ›´å°ã€‚ç¦»æˆ‘ä»¬è¿‘ï¼Œè¯´æ˜ zzzï»¿ å€¼æ›´å¤§ã€‚

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F5ac5fe17-fe23-4091-8038-3f1f02e8d649%2FUntitled.png?table=block&id=dd8178a5-3ab3-4d6f-b82d-ac501e6ae333&width=4510&userId=&cache=v2)

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

åœ¨æ ‡å‡†åŒ–è®¾å¤‡åæ ‡ç³»ä¸­ OpenGL ä½¿ç”¨çš„æ˜¯å·¦æ‰‹åæ ‡ç³»ï¼Œå› ä¸ºå·¦æ‰‹ç³»åœ¨è¿™ä¸€ç‚¹ä¸Šä¼šæ¯”è¾ƒæ–¹ä¾¿ã€‚ä½†ä¹Ÿä¼šé€ æˆåˆ«çš„é—®é¢˜ï¼ŒxÃ—yâ‰ zx\times y\ne
zxÃ—yî€ =zï»¿

[learnopengl-cn.github.iohttps://learnopengl-
cn.github.io/01%20Getting%20started/08%20Coordinate%20Systems/#3d](https://learnopengl-
cn.github.io/01%20Getting%20started/08%20Coordinate%20Systems/#3d)

Slightly different orders (to the â€œsimple wayâ€)

â€¢

Center cuboid by translating ç§»åˆ°åŸç‚¹

â€¢

Scale into â€œcanonicalâ€ cube æ˜ å°„åˆ° [-1, 1]ï¼Œä¹Ÿå°±æ˜¯ç¼©æ”¾

Translate (center to origin) first, then scale (length/width/height to 2) å› ä¸º
-1 åˆ° 1 çš„é•¿åº¦å°±æ˜¯ 2ã€‚

å› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå¹³ç§»çŸ©é˜µå’Œç¼©æ”¾çŸ©é˜µæ¥æ±‚å‡ºæ­£äº¤æŠ•å½±çŸ©é˜µï¼Œå…ˆå¹³ç§»ï¼Œå†ç¼©æ”¾ï¼š

Mortho=[2râˆ’l00002tâˆ’b00002nâˆ’f00001][100âˆ’r+l2010âˆ’t+b2001âˆ’n+f20001]=[2râˆ’l00âˆ’r+lrâˆ’l02tâˆ’b0âˆ’t+btâˆ’b002nâˆ’fâˆ’n+fnâˆ’f0001]M_{\text{ortho}}=\left[
\begin{matrix} \frac{2}{r-l}& 0& 0& 0\\\ 0& \frac{2}{t-b}& 0& 0\\\ 0& 0&
\frac{2}{n-f}& 0\\\ 0& 0& 0& 1\\\ \end{matrix} \right] \left[ \begin{matrix}
1& 0& 0& -\frac{r+l}{2}\\\ 0& 1& 0& -\frac{t+b}{2}\\\ 0& 0& 1&
-\frac{n+f}{2}\\\ 0& 0& 0& 1\\\ \end{matrix} \right] \\\ =\left[
\begin{matrix} \frac{2}{r-l}& 0& 0& -\frac{r+l}{r-l}\\\ 0& \frac{2}{t-b}& 0&
-\frac{t+b}{t-b}\\\ 0& 0& \frac{2}{n-f}& -\frac{n+f}{n-f}\\\ 0& 0& 0& 1\\\
\end{matrix} \right]
Morthoâ€‹=â£â¡â€‹râˆ’l2â€‹000â€‹0tâˆ’b2â€‹00â€‹00nâˆ’f2â€‹0â€‹0001â€‹â¦â¤â€‹â£â¡â€‹1000â€‹0100â€‹0010â€‹âˆ’2r+lâ€‹âˆ’2t+bâ€‹âˆ’2n+fâ€‹1â€‹â¦â¤â€‹=â£â¡â€‹râˆ’l2â€‹000â€‹0tâˆ’b2â€‹00â€‹00nâˆ’f2â€‹0â€‹âˆ’râˆ’lr+lâ€‹âˆ’tâˆ’bt+bâ€‹âˆ’nâˆ’fn+fâ€‹1â€‹â¦â¤â€‹

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

å¦‚æœæŠŠé•¿æ–¹ä½“èŒƒå›´ç¼©æˆç«‹æ–¹ä½“ï¼Œç‰©ä½“ä¸ä¼šè¢«æ‹‰ä¼¸å—ï¼Ÿ ä¼šï¼Œè¿™å°±æ¶‰åŠåˆ°å¦å¤–ä¸€ä¸ªå˜æ¢ã€‚åœ¨æ‰€æœ‰å˜æ¢åšå®Œä¹‹åï¼Œè¿˜è¦åšä¸€ä¸ªè§†å£å˜æ¢ï¼Œè¿˜è¦åšä¸€æ¬¡æ‹‰ä¼¸ã€‚

Perspective Projection é€è§†æŠ•å½±

â€¢

Most common in Computer Graphics, art, visual system

â€¢

Further objects are smaller

â€¢

Parallel lines not parallel; converge to single point

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2Fbdb2c7c6-302e-42f2-a386-cbf4f2fd0a7b%2FUntitled.png?table=block&id=da7ac371-e368-4b7d-8213-d4a86e7de721&width=860&userId=&cache=v2)

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F62cd1940-77ff-494c-a90d-7882275d6d4a%2FUntitled.png?table=block&id=6e9c1123-1cea-49e0-9eb4-05f636044675&width=4300&userId=&cache=v2)

å¹³è¡Œçº¿å°±æ˜¯æ°¸ä¸ç›¸äº¤çš„ä¸¤æ¡çº¿ï¼Œä½†ç…§ç‰‡ä¸Šé“è½¨æ˜¯å¹³è¡Œçš„ï¼Œå´äº¤äºä¸€ç‚¹ã€‚é€è§†æŠ•å½±çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¹³é¢ç›¸å½“äºè¢«æŠ•å½±åˆ°äº†å¦å¤–ä¸€ä¸ªå¹³é¢ä¸Šï¼Œè¿™ç§æƒ…å†µä¸‹å°±ä¸æ˜¯å¹³è¡Œçº¿äº†ã€‚

Recall

â€¢

Before we move on

â€¢

Recall: property of homogeneous coordinates

â€¢

(x,y,z,1),(kx,ky,kz,k!=0),(xz,yz,z2,z!=0)(x, y, z, 1),(k x, k y, k z, k
!=0),\left(x z, y z, z^{2}, z
!=0\right)(x,y,z,1),(kx,ky,kz,k!=0),(xz,yz,z2,z!=0)ï»¿ all represent the same
point (x, y, z) in 3D

â€¢

åªè¦ä¸€ä¸ªç‚¹ä¹˜äºä¸€ä¸ªä¸ä¸ºé›¶çš„ kï¼Œé‚£ä¹ˆå®ƒä»¬è¿˜æ˜¯ä¸€ä¸ªç‚¹ã€‚é‚£ä¹ˆæˆ‘ä»¬è¿˜å¯ä»¥å°†å…¶ä¹˜ä»¥ zï¼Œå…¶è¡¨ç¤ºçš„ç‚¹è¿˜æ˜¯ç©ºé—´ä¸­åŒæ ·çš„ç‚¹ã€‚ä¸‹é¢æˆ‘ä»¬ä¼šç”¨åˆ°ã€‚

â€¢

e.g. (1, 0, 0, 1) and (2, 0, 0, 2) both represent (1, 0, 0)

â€¢

Simple, but useful

æ€ä¹ˆåšé€è§†æŠ•å½±

How to do perspective projection

â€¢

First â€œsquishâ€ the frustum into a cuboid (nâ†’n,fâ†’f)(Mperspâ†’ortho)\left(
\text{n}\rightarrow \text{n},\text{f}\rightarrow \text{f} \right) \left(
\text{M}_{\text{persp}\rightarrow \text{ortho}} \right)
(nâ†’n,fâ†’f)(Mperspâ†’orthoâ€‹)ï»¿

â€¢

Do orthographic projection ( Mortho\text{M}_{ortho}Morthoâ€‹ï»¿, already known!)

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2Fd1cb86e3-8c18-44c9-82c7-e48e895bf8a6%2FUntitled.png?table=block&id=314cd078-2dde-478e-aafb-5ae92a7fcded&width=3920&userId=&cache=v2)

é€è§†æŠ•å½±çš„è§†é”¥ä½“ä¸­ï¼Œè¿œçš„å¹³é¢æ¯”è¿‘çš„å¹³é¢è¦å¤§ã€‚

æˆ‘ä»¬å¯ä»¥æŠŠè¿œçš„å¹³é¢å¾€é‡Œâ€œæŒ¤â€ï¼Œâ€œæŒ¤â€åˆ°åŒä¸€é«˜åº¦ä¸”åŒè¿‘å¹³é¢å¤§å°ï¼Œâ€œæŒ¤â€æˆç©ºé—´ä¸­çš„é•¿æ–¹ä½“ï¼Œå†åšæ­£äº¤æŠ•å½±å°±è§£å†³äº†ã€‚

æˆ‘ä»¬å·²ç»çŸ¥é“æ­£äº¤æŠ•å½±æ€ä¹ˆåšäº†ï¼Œå› æ­¤å‰©ä¸‹çš„å°±æ˜¯â€œæŒ¤â€è¿™ä¸ªæ“ä½œã€‚

åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œéœ€è¦è§„å®šï¼š

â€¢

è¿‘å¹³é¢ä¸Šä»»ä½•ä¸€ä¸ªç‚¹ä¸å˜ã€‚

â€¢

Z å€¼ä¸å˜

â€¢

è¿œå¹³é¢çš„ä¸­å¿ƒä¹Ÿä¸ä¼šå‘ç”Ÿå˜åŒ–

æ±‚å‡ºä»»ä½•ä¸€ä¸ªç‚¹æŒ¤å‹åçš„ xâ€²,yâ€²x', y'xâ€²,yâ€²ï»¿ å€¼

è¦åšâ€œæŒ¤â€çš„æ“ä½œï¼Œé¦–å…ˆè¦çŸ¥é“ä»»ä½•ä¸€ä¸ªç‚¹çš„ x,yx, yx,yï»¿ å€¼æ˜¯æ€ä¹ˆå˜åŒ–çš„ã€‚å› ä¸ºæˆ‘ä»¬ä»»ä½•ä¸€ä¸ªé¢éƒ½è¦æŒ¤æˆè¿‘å¹³é¢å¤§å°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†(x,y,z)
(x,y,z) (x,y,z)ï»¿æŠ•å½±åˆ°è¿‘å¹³é¢ä¸Šæ±‚å‡ºå˜æ¢åçš„ xâ€²,yâ€²x', y'xâ€²,yâ€²ï»¿ å€¼ã€‚å¯¹äº x,yx, yx,yï»¿ å€¼æ¥è¯´ï¼Œè¿™ç§å˜æ¢æ˜¯çº¿æ€§çš„ã€‚

å› æ­¤ï¼Œåœ¨è§†é”¥ä½“çš„ä¸Šé¢ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›¸ä¼¼ä¸‰è§’å½¢æ±‚å‡ºå˜æ¢åçš„ xâ€²,yâ€²x', y'xâ€²,yâ€²ï»¿ å€¼ã€‚ï¼ˆzâ€²z'zâ€²ï»¿ å€¼ä¸æ˜¯çº¿æ€§å˜åŒ–çš„ï¼Œåé¢ä¼šæåˆ°ï¼‰

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2Fdc3ebabf-23a3-46e6-aaf1-7069160aab6e%2FUntitled.png?table=block&id=a287558b-e5dd-457e-8d9e-50b5737cd82f&width=4620&userId=&cache=v2)

ä¸Šå›¾ä¸­ï¼Œnnnï»¿ ä¸ºè¿‘å¹³é¢çš„ zzzï»¿ å€¼ï¼Œzzzï»¿ ä¸ºä»»ä½•ä¸€ä¸ªç‚¹(x,y,z)(x,y,z)(x,y,z)ï»¿ä¸­çš„ zzzï»¿ å€¼ã€‚

æŒ¤å‹åçš„ yâ€™yâ€™yâ€™ï»¿ å€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›¸ä¼¼ä¸‰è§’å½¢åŸç†å¾—å‡ºï¼š

yâ€²=nzyy^{\prime}=\frac{n}{z} yyâ€²=znâ€‹y

åŒç†å¯å¾—æŒ¤å‹åçš„ xâ€™xâ€™xâ€™ï»¿ å€¼ï¼š

xâ€²=nzxx^{\prime}=\frac{n}{z} xxâ€²=znâ€‹x

åœ¨é½æ¬¡åæ ‡ç³»ä¸­ï¼Œå¯¹äºå˜æ¢åçš„ (xâ€™,yâ€™,zâ€™)(xâ€™, yâ€™, zâ€™) (xâ€™,yâ€™,zâ€™)ï»¿ æˆ‘ä»¬åªå‰©ä¸‹ zâ€™zâ€™zâ€™ï»¿ æœªçŸ¥ã€‚

è¿™é‡Œç»™çŸ©é˜µä¹˜äº† zï¼Œå…¶è¡¨ç¤ºçš„ç‚¹è¿˜æ˜¯ç©ºé—´ä¸­åŒæ ·çš„ç‚¹ã€‚

(xyz1)â‡’(xâ€™yâ€™zâ€™1)=(nx/zny/z unknown1)=mult by z=(nxny still unknownz)\left(
\begin{array}{l} x\\\ y\\\ z\\\ 1\\\ \end{array} \right) \Rightarrow \left(
\begin{array}{l} xâ€™\\\ yâ€™\\\ zâ€™\\\ 1\\\ \end{array} \right) =\left(
\begin{array}{c} nx/z\\\ ny/z\\\ \,\,\text{unknown}\\\ 1\\\ \end{array}
\right) =mult\,\,by\,\,z=\left( \begin{array}{c} nx\\\ ny\\\ \,\,\text{still }
\text{unknown}\\\ z\\\ \end{array} \right)
ââ›â€‹xyz1â€‹â ââ€‹â‡’ââ›â€‹xâ€™yâ€™zâ€™1â€‹â ââ€‹=ââ›â€‹nx/zny/zunknown1â€‹â ââ€‹=multbyz=ââ›â€‹nxnystill
unknownzâ€‹â ââ€‹

ä¹Ÿå°±æ˜¯è¯´ (x,y,z,1)(x,y,z,1)(x,y,z,1)ï»¿ ç»è¿‡ Mperspâ†’ortho(4Ã—4)M_{persp\rightarrow
ortho}^{\left( 4\times 4 \right)}Mperspâ†’ortho(4Ã—4)â€‹ï»¿ çŸ©é˜µâ€œæŒ¤å‹â€åï¼Œä¼šè¢«æ˜ å°„åˆ°
(nx,ny,??,z)(nx,ny,??,z)(nx,ny,??,z)ï»¿ï¼š

Mperspâ†’ortho(4Ã—4)(xyz1)=(nxny unknown z)M_{p e r s p \rightarrow o r t h
o}^{(4 \times 4)}\left(\begin{array}{c}x \\\ y \\\ z \\\
1\end{array}\right)=\left(\begin{array}{c}n x \\\ n y \\\ \text { unknown }
\\\ z\end{array}\right)Mperspâ†’ortho(4Ã—4)â€‹ââ›â€‹xyz1â€‹â ââ€‹=ââ›â€‹nxny unknown zâ€‹â ââ€‹

æ ¹æ®ä¸Šå¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºéƒ¨åˆ†çš„ Mperspâ†’orthoM_{p e r s p \rightarrow o r t h o}Mperspâ†’orthoâ€‹ï»¿
çŸ©é˜µï¼š

Mperspâ†’ortho=(n0000n00????0010)M_{p e r s p \rightarrow o r t h
o}=\left(\begin{array}{llll}n & 0 & 0 & 0 \\\ 0 & n & 0 & 0 \\\ ? & ? & ? & ?
\\\ 0 & 0 & 1 & 0\end{array}\right)Mperspâ†’orthoâ€‹=ââ›â€‹n0?0â€‹0n?0â€‹00?1â€‹00?0â€‹â ââ€‹

å¯¹äº zzzï»¿ï¼Œæˆ‘ä»¬ä¸çŸ¥é“ zzzï»¿ ä¼šæ€ä¹ˆå˜ï¼Œæˆ‘ä»¬åªè§„å®šäº†è¿‘çš„å¹³é¢ä¸Šå’Œè¿œçš„å¹³é¢ä¸Š zzzï»¿ ä¸å˜ã€‚

Observation: the third row is responsible for zâ€™

â€¢

Any point on the near plane will not change

â€¢

è¿‘å¹³é¢çš„ç‚¹ä¸å˜ï¼Œå¯¹äºä»»ä½• (x,y,n,1)(x,y,n,1)(x,y,n,1)ï»¿ è¿ç®—å®Œäº†ä¸€å®šè¿˜æ˜¯
(x,y,n,1)(x,y,n,1)(x,y,n,1)ï»¿

â€¢

Any pointâ€™s z on the far plane will not change

â€¢

è¿œå¹³é¢çš„ç‚¹ï¼Œè™½ç„¶ x,yx, yx,yï»¿ ä¼šå˜åŒ–ï¼Œä½†æ˜¯ zzzï»¿ æ²¡æœ‰å˜ã€‚

æ±‚å‡ºä»»ä½•ä¸€ä¸ªç‚¹æŒ¤å‹åçš„ zâ€™zâ€™zâ€™ï»¿ å€¼

ç”±â€œè¿‘å¹³é¢çš„ç‚¹ä¸å˜ï¼Œå¯¹äºä»»ä½• (x,y,n,1)(x,y,n,1)(x,y,n,1)ï»¿ è¿ç®—å®Œäº†ä¸€å®šè¿˜æ˜¯
(x,y,n,1)(x,y,n,1)(x,y,n,1)ï»¿â€å¯å¾—ï¼š

è¿™é‡Œç»™çŸ©é˜µä¹˜äº† nï¼Œå…¶è¡¨ç¤ºçš„ç‚¹è¿˜æ˜¯ç©ºé—´ä¸­åŒæ ·çš„ç‚¹ã€‚

(xyn1)â‡’(xyn1)=mult by n=(nxnyn2n)\left( \begin{array}{l} x\\\ y\\\ n\\\ 1\\\
\end{array} \right) \Rightarrow \left( \begin{array}{l} x\\\ y\\\ n\\\ 1\\\
\end{array} \right) =mult\,\,by\,\,n=\left( \begin{array}{l} nx\\\ ny\\\
n^2\\\ n\\\ \end{array} \right) ââ›â€‹xyn1â€‹â ââ€‹â‡’ââ›â€‹xyn1â€‹â ââ€‹=multbyn=ââ›â€‹nxnyn2nâ€‹â ââ€‹

å› æ­¤ Mperspâ†’orthoM_{p e r s p \rightarrow o r t h o}Mperspâ†’orthoâ€‹ï»¿ ç¬¬ä¸‰è¡Œä¸€å®šæ˜¯
(0,0,A,B)(0,0,A,B)(0,0,A,B)ï»¿ çš„å½¢å¼ï¼Œå› ä¸ºï¼š

(00AB)(xyn1)=n2\left(\begin{array}{llll}0 & 0 & A &
B\end{array}\right)\left(\begin{array}{l}x \\\ y \\\ n \\\
1\end{array}\right)=n^{2}(0â€‹0â€‹Aâ€‹Bâ€‹)ââ›â€‹xyn1â€‹â ââ€‹=n2

ç”±ä¸Šå¼å¯å¾—ï¼š

An+B=n2A n+B=n^{2}An+B=n2

å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“ç¬¬ä¸‰è¡Œå‰ä¸¤ä¸ªæ•°æ˜¯ 0ã€‚

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

æˆ‘ä»¬å‰é¢å·²ç»è§„å®šäº†è¿œå¹³é¢çš„ä¸­å¿ƒç»è¿‡ Mperspâ†’ortho\text{M}_{\text{persp}\rightarrow
\text{ortho}}Mperspâ†’orthoâ€‹ï»¿ å˜æ¢åä¹Ÿä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚

å¦å¤–ä¸€ä¸ªç­‰å¼å¯ä»¥ç”¨è¿œå¹³é¢å¯ä»¥ç”¨å…¶ç‰¹æ®Šçš„ä¸­å¿ƒç‚¹å¾—å‡ºï¼Œç»™ä¸­å¿ƒç‚¹å†ä¹˜ä¸ª fffï»¿ å¯å¾—ï¼š

(00f1)â‡’(00f1)=mult by f=(00f2f)\left( \begin{array}{l} 0\\\ 0\\\ f\\\ 1\\\
\end{array} \right) \Rightarrow \left( \begin{array}{l} 0\\\ 0\\\ f\\\ 1\\\
\end{array} \right) =mult\,\,by\,\,f=\left( \begin{array}{c} 0\\\ 0\\\ f^2\\\
f\\\ \end{array} \right) ââ›â€‹00f1â€‹â ââ€‹â‡’ââ›â€‹00f1â€‹â ââ€‹=multbyf=ââ›â€‹00f2fâ€‹â ââ€‹

ç”±ä¸Šå¼å¯å¾—ï¼š

Af+B=f2Af+B=f^2Af+B=f2

æ ¹æ®ä¸¤å¼å¯å¾— Mperspâ†’ortho\text{M}_{\text{persp}\rightarrow
\text{ortho}}Mperspâ†’orthoâ€‹ï»¿ ï¼š

An+B=n2Af+B=f2â‡’ A=n+fB=âˆ’nf\begin{array}{c} An+B=n^2\\\
Af+B=f^2\\\\\end{array}\Rightarrow \,\,\begin{array}{c} A=n+f\\\
B=-nf\\\\\end{array}An+B=n2Af+B=f2â€‹â‡’A=n+fB=âˆ’nfâ€‹

Mperspâ†’ortho=(n0000n0000n+fâˆ’nf0010)M_{persp\rightarrow ortho}=\left(
\begin{matrix} n& 0& 0& 0\\\ 0& n& 0& 0\\\ 0& 0& n+f& -nf\\\ 0& 0& 1&
0\\\\\end{matrix} \right) Mperspâ†’orthoâ€‹=ââ›â€‹n000â€‹0n00â€‹00n+f1â€‹00âˆ’nf0â€‹â ââ€‹

Mpersp=MorthoMperspâ†’orthoM_{p e r s p}=M_{o r t h o} M_{p e r s p \rightarrow
o r t h o}Mperspâ€‹=Morthoâ€‹Mperspâ†’orthoâ€‹

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

å¹³æˆªå¤´ä½“ï¼ˆFrustumï¼‰è¢«å‹ç¼©æˆé•¿æ–¹ä½“ä»¥åï¼Œå†…éƒ¨çš„ç‚¹çš„ zzzï»¿ å€¼æ˜¯æ›´åå‘äºè¿‘å¹³é¢è¿˜æ˜¯æ›´åå‘äºè¿œå¹³é¢ï¼Ÿ

å¯ä»¥å‚è€ƒ ScratchAPixel çš„ [The Perspective and Orthographic Projection
Matrix](https://www.scratchapixel.com/lessons/3d-basic-rendering/perspective-
and-orthographic-projection-matrix/building-basic-perspective-projection-
matrix)

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F9a4c47e3-0c29-43ee-8bef-989141ee5a13%2FUntitled.png?table=block&id=17073006-870b-4bfd-
bb9b-138a8ab1d581&width=1340&userId=&cache=v2)

[Depth Precision VisualizedDepth precision is a pain in the ass that every
graphics programmer has to struggle with sooner or later. Many articles and
papers have been written on the topic, and a variety of different depth buffer
formats and setups are found across different games, engines, and
devices.![](/image/https%3A%2F%2Fdeveloper.nvidia.com%2Fsites%2Fall%2Fthemes%2Fgameworks%2Ffavicon.ico?table=block&id=791e0ef4-75d3-4c04-b97a-d82782f400a8&userId=&cache=v2)https://developer.nvidia.com/content/depth-
precision-
visualized![](/image/https%3A%2F%2Fdeveloper.nvidia.com%2Fsites%2Fdefault%2Ffiles%2Fakamai%2Fgameworks%2Fblog%2FDepthprecision%2Fgraph.jpg?table=block&id=791e0ef4-75d3-4c04-b97a-d82782f400a8&width=500&userId=&cache=v2)](https://developer.nvidia.com/content/depth-
precision-visualized)

å®šä¹‰è§†é”¥

å‰é¢æåˆ°äº†é•¿æ–¹ä½“è¿‘å¹³é¢çš„ l, r, b, tï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å»å®šä¹‰è¿™äº›å‘¢ï¼Ÿ

vertical field-of-view (fovY) and aspect ratio

æˆ‘ä»¬ç°å®ä¸­ç›¸æœºæœ‰è§†è§’çš„å®šä¹‰ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥çœ‹åˆ°çš„è§’åº¦çš„èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯ field of viewã€‚å¹¿è§’ç›¸æœºå°±æ˜¯å¯è§†è§’åº¦æ¯”è¾ƒå¤§ï¼Œå¯¹äºè§†é”¥ä½“æ¥è¯´ï¼Œå°±æ˜¯å¼ çš„æ¯”è¾ƒå¼€ã€‚

å‚ç›´çš„å¯è§†è§’åº¦å°±æ˜¯ fovYã€‚è€Œç›¸æœºçš„é•¿å®½æ¯”å°±æ˜¯ aspect ratioã€‚

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ fovY å’Œ aspect ratioï¼Œæ¥æ¨å‡ºæ°´å¹³çš„å¯è§†è§’åº¦ã€‚

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F81699bf8-ca5f-455e-9b95-dc5804f8b8c1%2FUntitled.png?table=block&id=6c8a6544-7fce-42bb-9809-132ba60b7a92&width=2500&userId=&cache=v2)

How to convert from fovY and aspect to l, r, b, t?

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2Fd9002e7d-85de-4df2-acc8-dc0f2d3e53f0%2FUntitled.png?table=block&id=d06f6a8f-73b3-4a2a-a8a4-c5b857ca2f5f&width=3210&userId=&cache=v2)

ä¸Šå›¾ä¸­ï¼Œå¤¹è§’ä¸º fovY2\frac{fovY}{2}2fovYâ€‹ï»¿ï¼Œçº¢ç‚¹åæ ‡ä¸º(0,t,n)(0,t,n)(0,t,n)ï»¿ï¼Œtttï»¿
ä¸ºå±å¹•é«˜åº¦çš„ä¸€åŠï¼Œé‚£ä¹ˆæ ¹æ®ä¸‰è§’å‡½æ•°çš„å®šä¹‰å°±å¯ä»¥å¾—å‡ºï¼š

tanâ¡fovY2=tâˆ£nâˆ£cotâ¡fovY2=âˆ£nâˆ£t aspect=rt\begin{aligned} \tan
\frac{fovY}{2}&=\frac{t}{|n|}\\\ \cot \frac{fovY}{2}&=\frac{|n|}{t}\\\ \,\,
aspect&=\frac{r}{t}\\\ \end{aligned}tan2fovYâ€‹cot2fovYâ€‹aspectâ€‹=âˆ£nâˆ£tâ€‹=tâˆ£nâˆ£â€‹=trâ€‹â€‹

å®Œæˆæ¨å¯¼æ­£äº¤æŠ•å½±çŸ©é˜µ

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F479f6ecc-a6ea-4de3-8948-bf66d4018d6c%2FUntitled.png?table=block&id=70a7cb0c-c411-4683-8bbb-6785de66fd2c&width=960&userId=&cache=v2)

æ­£äº¤æŠ•å½±æ²¡æœ‰ fovYï¼Œåœ¨ Unity ä¸­ï¼Œæ­£äº¤æŠ•å½±çš„å‚æ•°ç”± Camera ç»„ä»¶ä¸­çš„å‚æ•° Size, Near, Farï¼ˆViewport Rect
æš‚æ—¶å¿½ç•¥ï¼‰å’Œ Game è§†å›¾çš„æ¨ªçºµæ¯”ï¼ˆaspect ratioï¼‰å…±åŒå†³å®šã€‚

è¿™é‡Œçš„ Near æ˜¯è¿‘è£é¢çš„è·ç¦»ï¼Œä¹Ÿå°±æ˜¯ âˆ’n-nâˆ’nï»¿ï¼ŒFar åŒç†ï¼Œç­‰äº âˆ’f-fâˆ’fï»¿ã€‚

Size å±æ€§ç”¨æ¥æ›´æ”¹è§†é”¥ä½“ç«–ç›´æ–¹å‘ä¸Šé«˜åº¦çš„ä¸€åŠï¼Œä¹Ÿå°±æ˜¯å‰é¢è¿‘å¹³é¢çš„é«˜åº¦ tttï»¿ã€‚

ç”±æ­¤å¯å¾—æ­£äº¤æŠ•å½±è¿‘è¿œå¹³é¢çš„é«˜åº¦ tâˆ’bt-btâˆ’bï»¿ ä¸ºï¼š2â‹…Size=2â‹…t2\cdot Size=2\cdot t2â‹…Size=2â‹…tï»¿

æ­£äº¤æŠ•å½±è¿‘è¿œå¹³é¢çš„å®½åº¦ râˆ’lr-lrâˆ’lï»¿ ä¸ºï¼š

Aspectâ‹…è¿‘è¿œå¹³é¢çš„é«˜åº¦=2â‹…Aspectâ‹…Size=2â‹…Aspectâ‹…tAspect\cdot \text{è¿‘è¿œå¹³é¢çš„é«˜åº¦}=2\cdot
Aspect\cdot Size=2\cdot Aspect\cdot tAspectâ‹…è¿‘è¿œå¹³é¢çš„é«˜åº¦=2â‹…Aspectâ‹…Size=2â‹…Aspectâ‹…tï»¿

![](/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-
static.com%2F309aff06-3fdb-4904-8bb2-03220be30a2b%2FUntitled.png?table=block&id=97726ee4-b851-4435-83a8-4f5b063f3b29&width=2220&userId=&cache=v2)

Mortho=[2râˆ’l00âˆ’r+lrâˆ’l02tâˆ’b0âˆ’t+btâˆ’b002nâˆ’fâˆ’n+fnâˆ’f0001]=[1Aspectâ‹…Size00âˆ’r+lrâˆ’l01Size0âˆ’t+btâˆ’b002nâˆ’fâˆ’n+fnâˆ’f0001]M_{\text{ortho}}=\left[
\begin{matrix} \frac{2}{r-l}& 0& 0& -\frac{r+l}{r-l}\\\ 0& \frac{2}{t-b}& 0&
-\frac{t+b}{t-b}\\\ 0& 0& \frac{2}{n-f}& -\frac{n+f}{n-f}\\\ 0& 0& 0& 1\\\
\end{matrix} \right] =\left[ \begin{matrix} \frac{1}{Aspect\cdot Size}& 0& 0&
-\frac{r+l}{r-l}\\\ 0& \frac{1}{Size}& 0& -\frac{t+b}{t-b}\\\ 0& 0&
\frac{2}{n-f}& -\frac{n+f}{n-f}\\\ 0& 0& 0& 1\\\ \end{matrix} \right]
Morthoâ€‹=â£â¡â€‹râˆ’l2â€‹000â€‹0tâˆ’b2â€‹00â€‹00nâˆ’f2â€‹0â€‹âˆ’râˆ’lr+lâ€‹âˆ’tâˆ’bt+bâ€‹âˆ’nâˆ’fn+fâ€‹1â€‹â¦â¤â€‹=â£â¡â€‹Aspectâ‹…Size1â€‹000â€‹0Size1â€‹00â€‹00nâˆ’f2â€‹0â€‹âˆ’râˆ’lr+lâ€‹âˆ’tâˆ’bt+bâ€‹âˆ’nâˆ’fn+fâ€‹1â€‹â¦â¤â€‹

æ³¨æ„ï¼šè¿™é‡Œçš„ nnnï»¿ å’Œ fffï»¿ æ˜¯ âˆ’z-zâˆ’zï»¿ è½´ä¸Šçš„ï¼Œä»£è¡¨è¿‘è£é¢å’Œè¿œè£é¢çš„ zzzï»¿ å€¼ï¼Œå€¼ä¸ºè´Ÿæ•°ã€‚

å®Œæˆæ¨å¯¼é€è§†æŠ•å½±çŸ©é˜µ

å‰é¢å·²ç»å¾—å‡ºï¼š

Mperspâ†’ortho=(n0000n0000n+fâˆ’nf0010)M_{persp\rightarrow ortho}=\left(
\begin{matrix} n& 0& 0& 0\\\ 0& n& 0& 0\\\ 0& 0& n+f& -nf\\\ 0& 0& 1&
0\\\\\end{matrix} \right) Mperspâ†’orthoâ€‹=ââ›â€‹n000â€‹0n00â€‹00n+f1â€‹00âˆ’nf0â€‹â ââ€‹

Mpersp=MorthoMperspâ†’ortho=[1Aspectâ‹…Size00âˆ’r+lrâˆ’l01Size0âˆ’t+btâˆ’b002nâˆ’fâˆ’n+fnâˆ’f0001]
[n0000n0000n+fâˆ’nf0010]=[nAspectâ‹…Size0âˆ’r+l2â‹…Aspectâ‹…Size00nSize0000n+fnâˆ’fâˆ’2nfnâˆ’f0010]M_{persp}=M_{ortho}M_{persp\rightarrow
ortho} \\\ =\left[ \begin{matrix} \frac{1}{Aspect\cdot Size}& 0& 0&
-\frac{r+l}{r-l}\\\ 0& \frac{1}{Size}& 0& -\frac{t+b}{t-b}\\\ 0& 0&
\frac{2}{n-f}& -\frac{n+f}{n-f}\\\ 0& 0& 0& 1\\\ \end{matrix} \right]
\,\,\left[ \begin{matrix} n& 0& 0& 0\\\ 0& n& 0& 0\\\ 0& 0& n+f& -nf\\\ 0& 0&
1& 0\\\ \end{matrix} \right] \\\ =\left[ \begin{matrix} \frac{n}{Aspect\cdot
Size}& 0& -\frac{r+l}{2\cdot Aspect\cdot Size}& 0\\\ 0& \frac{n}{Size}& 0&
0\\\ 0& 0& \frac{n+f}{n-f}& \frac{-2nf}{n-f}\\\ 0& 0& 1& 0\\\ \end{matrix}
\right]
Mperspâ€‹=Morthoâ€‹Mperspâ†’orthoâ€‹=â£â¡â€‹Aspectâ‹…Size1â€‹000â€‹0Size1â€‹00â€‹00nâˆ’f2â€‹0â€‹âˆ’râˆ’lr+lâ€‹âˆ’tâˆ’bt+bâ€‹âˆ’nâˆ’fn+fâ€‹1â€‹â¦â¤â€‹â£â¡â€‹n000â€‹0n00â€‹00n+f1â€‹00âˆ’nf0â€‹â¦â¤â€‹=â£â¡â€‹Aspectâ‹…Sizenâ€‹000â€‹0Sizenâ€‹00â€‹âˆ’2â‹…Aspectâ‹…Sizer+lâ€‹0nâˆ’fn+fâ€‹1â€‹00nâˆ’fâˆ’2nfâ€‹0â€‹â¦â¤â€‹

æ³¨æ„ï¼šè¿™é‡Œçš„ nnnï»¿ å’Œ fffï»¿ æ˜¯ âˆ’z-zâˆ’zï»¿ è½´ä¸Šçš„ï¼Œä»£è¡¨è¿‘è£é¢å’Œè¿œè£é¢çš„ zzzï»¿ å€¼ï¼Œå€¼ä¸ºè´Ÿæ•°ã€‚

é€šå¸¸æˆ‘ä»¬é€è§†æŠ•å½±çš„å‚æ•°é™¤äº†è¿‘è£é¢è¿œè£é¢çš„è·ç¦»å¤–ï¼Œè¿˜ä¼šæœ‰ fovfovfovï»¿ å’Œ AspectAspectAspectï»¿ï¼Œä¸”
r+l=0r+l=0r+l=0ï»¿ï¼Œå› æ­¤æ•´ç†å…¬å¼å¯å¾—ï¼š

Mpersp=[nAspectâ‹…Size0000nSize0000n+fnâˆ’fâˆ’2nfnâˆ’f0010]
=[1Aspectâ‹…âˆ’âˆ£nâˆ£t0000âˆ’âˆ£nâˆ£t0000n+fnâˆ’fâˆ’2nfnâˆ’f0010]
=[âˆ’cotâ¡fovY2Aspect0000âˆ’cotâ¡fovY20000n+fnâˆ’fâˆ’2nfnâˆ’f0010] M_{persp}=\left[
\begin{matrix} \frac{n}{Aspect\cdot Size}& 0& 0& 0\\\ 0& \frac{n}{Size}& 0&
0\\\ 0& 0& \frac{n+f}{n-f}& \frac{-2nf}{n-f}\\\ 0& 0& 1& 0\\\\\end{matrix}
\right] \\\=\left[ \begin{matrix} \frac{1}{Aspect}\cdot \frac{-\left| n
\right|}{t}& 0& 0& 0\\\ 0& \frac{-\left| n \right|}{t}& 0& 0\\\ 0& 0&
\frac{n+f}{n-f}& \frac{-2nf}{n-f}\\\ 0& 0& 1& 0\\\\\end{matrix} \right]
\\\=\left[ \begin{matrix} \frac{-\cot \frac{fovY}{2}}{Aspect}& 0& 0& 0\\\ 0&
-\cot \frac{fovY}{2}& 0& 0\\\ 0& 0& \frac{n+f}{n-f}& \frac{-2nf}{n-f}\\\ 0& 0&
1& 0\\\\\end{matrix} \right]
Mperspâ€‹=â£â¡â€‹Aspectâ‹…Sizenâ€‹000â€‹0Sizenâ€‹00â€‹00nâˆ’fn+fâ€‹1â€‹00nâˆ’fâˆ’2nfâ€‹0â€‹â¦â¤â€‹
=â£â¡â€‹Aspect1â€‹â‹…tâˆ’âˆ£nâˆ£â€‹000â€‹0tâˆ’âˆ£nâˆ£â€‹00â€‹00nâˆ’fn+fâ€‹1â€‹00nâˆ’fâˆ’2nfâ€‹0â€‹â¦â¤â€‹
=â£â¡â€‹Aspectâˆ’cot2fovYâ€‹â€‹000â€‹0âˆ’cot2fovYâ€‹00â€‹00nâˆ’fn+fâ€‹1â€‹00nâˆ’fâˆ’2nfâ€‹0â€‹â¦â¤â€‹

![ğŸ’¡](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

ä»çŸ©é˜µæ¥çœ‹ï¼Œè¿™ä¸ªçŸ©é˜µå¯¹äºx, y åæ ‡åšäº†ä¸åŒæ¯”ä¾‹çš„ç¼©æ”¾ï¼Œå¯¹äº z åæ ‡åšäº†ä¸€ä¸ªç¼©æ”¾å’Œä¸€ä¸ªå¹³ç§»ã€‚... [å›¾å½¢å­¦åŸºç¡€æ‹¾é— -
é‡æ–°è®¤è¯†å‰ªä¸æ–­ç†è¿˜ä¹±çš„çŸ©é˜µå˜æ¢](https://zhuanlan.zhihu.com/p/223033896)

åè®°

å‰©ä¸‹çš„åº”è¯¥è¿˜å‰©è§†å£å˜æ¢è¿˜æ²¡å†™ï¼Œæ”¹å¤©å†è¡¥å……ã€‚å¯¹æŠ•å½±å˜æ¢çš„ä¸¤ç§å˜æ¢çš„æ¨å¯¼ï¼Œå¤§å®¶å¯ä»¥ç”¨ n, f ä»£è¡¨è¿‘è¿œå¹³é¢çš„è·ç¦»æ¥å†æ¨ä¸€éã€‚

æœ‰äº†æœ¬æ–‡çš„åŸºç¡€ï¼Œå°±èƒ½å¼€å§‹å°è¯•å†™ä¸€ä¸ªç®€å•çš„è½¯ä»¶å…‰æ …æ¸²æŸ“å™¨ï¼Œæˆ‘ä¹Ÿåœ¨å°è¯•å†™ä¸€ä¸ªè½¯å…‰æ …ï¼Œå¹¶æŠŠå¿…è¦çš„è¿‡ç¨‹éƒ½æ¨å¯¼ä¸€éï¼Œåˆ°æ—¶å€™å†æ€»ç»“æˆæ–‡ã€‚


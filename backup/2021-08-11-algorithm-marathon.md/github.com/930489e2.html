---
title : 自动快照存档
---

* TIME: 2021-08-31 01:36:47
* URL: <https://github.com/JustasMasiulis/xorstr>

-----

Skip to content

[ ](https://github.com/)

[ Sign up
](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E&source=header-repo)

  * Why GitHub? 

[Features →](/features)

    * [Mobile →](/mobile)
    * [Actions →](/features/actions)
    * [Codespaces →](/features/codespaces)
    * [Packages →](/features/packages)
    * [Security →](/features/security)
    * [Code review →](/features/code-review/)
    * [Issues →](/features/issues/)
    * [Integrations →](/features/integrations)
    * [GitHub Sponsors →](/sponsors)
    * [Customer stories→](/customer-stories)

  * [Team](/team)
  * [Enterprise](/enterprise)
  * Explore 

    * [Explore GitHub →](/explore)

#### Learn and contribute

    * [Topics →](/topics)
    * [Collections →](/collections)
    * [Trending →](/trending)
    * [Learning Lab →](https://lab.github.com/)
    * [Open source guides →](https://opensource.guide)

#### Connect with others

    * [The ReadME Project →](https://github.com/readme)
    * [Events →](https://github.com/events)
    * [Community forum →](https://github.community)
    * [GitHub Education →](https://education.github.com)
    * [GitHub Stars program →](https://stars.github.com)

  * [Marketplace](/marketplace)
  * Pricing 

[Plans →](/pricing)

    * [Compare plans →](/pricing#feature-comparison)
    * [Contact Sales →](https://enterprise.github.com/contact)
    * [Education →](https://education.github.com)

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

  * No suggested jump to results

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this user  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

[ Sign in
](/login?return_to=https%3A%2F%2Fgithub.com%2FJustasMasiulis%2Fxorstr)

[ Sign up
](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E&source=header-
repo&source_repo=JustasMasiulis%2Fxorstr)

{{ message }}

#  [JustasMasiulis](/JustasMasiulis) / **[xorstr](/JustasMasiulis/xorstr) **

  * [ Notifications ](/login?return_to=%2FJustasMasiulis%2Fxorstr)
  * [ Star ](/login?return_to=%2FJustasMasiulis%2Fxorstr) [ 556 ](/JustasMasiulis/xorstr/stargazers)
  * [ Fork ](/login?return_to=%2FJustasMasiulis%2Fxorstr) [ 110 ](/JustasMasiulis/xorstr/network/members)

heavily vectorized c++17 compile time string encryption.

[ Apache-2.0 License ](/JustasMasiulis/xorstr/blob/master/LICENSE)

[ 556 stars ](/JustasMasiulis/xorstr/stargazers) [ 110 forks
](/JustasMasiulis/xorstr/network/members)

[ Star ](/login?return_to=%2FJustasMasiulis%2Fxorstr)

[ Notifications ](/login?return_to=%2FJustasMasiulis%2Fxorstr)

  * [ Code ](/JustasMasiulis/xorstr)
  * [ Issues 2 ](/JustasMasiulis/xorstr/issues)
  * [ Pull requests 0 ](/JustasMasiulis/xorstr/pulls)
  * [ Actions ](/JustasMasiulis/xorstr/actions)
  * [ Projects 0 ](/JustasMasiulis/xorstr/projects)
  * [ Wiki ](/JustasMasiulis/xorstr/wiki)
  * [ Security ](/JustasMasiulis/xorstr/security)
  * [ Insights ](/JustasMasiulis/xorstr/pulse)

More

  * [ Code ](/JustasMasiulis/xorstr)
  * [ Issues ](/JustasMasiulis/xorstr/issues)
  * [ Pull requests ](/JustasMasiulis/xorstr/pulls)
  * [ Actions ](/JustasMasiulis/xorstr/actions)
  * [ Projects ](/JustasMasiulis/xorstr/projects)
  * [ Wiki ](/JustasMasiulis/xorstr/wiki)
  * [ Security ](/JustasMasiulis/xorstr/security)
  * [ Insights ](/JustasMasiulis/xorstr/pulse)

master

Switch branches/tags

Branches Tags

Could not load branches

Nothing to show

[ {{ refName }} default ](https://github.com/JustasMasiulis/xorstr/tree/{{
urlEncodedRefName }}) [View all branches](/JustasMasiulis/xorstr/branches)

Could not load tags

Nothing to show

[ {{ refName }} default ](https://github.com/JustasMasiulis/xorstr/tree/{{
urlEncodedRefName }})

[View all tags](/JustasMasiulis/xorstr/tags)

[ **1** branch ](/JustasMasiulis/xorstr/branches) [ **0** tags
](/JustasMasiulis/xorstr/tags)

[ Go to file ](/JustasMasiulis/xorstr/find/master) Code

  * [ ](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone

HTTPS  GitHub CLI

Use Git or checkout with SVN using the web URL.

Work fast with our official CLI. [Learn more](https://cli.github.com).

  * [ Open with GitHub Desktop ](https://desktop.github.com)
  * [ Download ZIP ](/JustasMasiulis/xorstr/archive/refs/heads/master.zip)

#### Launching GitHub Desktop

If nothing happens, [download GitHub Desktop](https://desktop.github.com/) and
try again.

Go back

#### Launching GitHub Desktop

If nothing happens, [download GitHub Desktop](https://desktop.github.com/) and
try again.

Go back

#### Launching Xcode

If nothing happens, [download Xcode](https://developer.apple.com/xcode/) and
try again.

Go back

#### Launching Visual Studio Code

Your codespace will open once ready.

There was a problem preparing your codespace, please try again.

## Latest commit

[
![@JustasMasiulis](https://avatars.githubusercontent.com/u/16763439?s=48&v=4)
](/JustasMasiulis)

[JustasMasiulis](/JustasMasiulis/xorstr/commits?author=JustasMasiulis "View
all commits by JustasMasiulis") [Update
README.md](/JustasMasiulis/xorstr/commit/8ab293225374e16cbae9a54b6a1bed3ee0bf9681
"Update README.md")

…

[ 8ab2932
](/JustasMasiulis/xorstr/commit/8ab293225374e16cbae9a54b6a1bed3ee0bf9681) [ on
17 Apr
](/JustasMasiulis/xorstr/commit/8ab293225374e16cbae9a54b6a1bed3ee0bf9681)

[Update
README.md](/JustasMasiulis/xorstr/commit/8ab293225374e16cbae9a54b6a1bed3ee0bf9681)

`8ab2932`

## Git stats

  * [ **66** commits  ](/JustasMasiulis/xorstr/commits/master)

## Files

[Permalink](/JustasMasiulis/xorstr/tree/8ab293225374e16cbae9a54b6a1bed3ee0bf9681)

Failed to load latest commit information.

Type

Name

Latest commit message

Commit time

[include](/JustasMasiulis/xorstr/tree/master/include "include")

[Partial ARM
support](/JustasMasiulis/xorstr/commit/fb0d6b8fba0366c2ed223a0ba876f7433861a786
"Partial ARM support

#39")

5 months ago

[.gitignore](/JustasMasiulis/xorstr/blob/master/.gitignore ".gitignore")

[Initial
commit](/JustasMasiulis/xorstr/commit/6cad21226c83fa24410f77c2029d08fe17d9ad2e
"Initial commit")

4 years ago

[LICENSE](/JustasMasiulis/xorstr/blob/master/LICENSE "LICENSE")

[Initial
commit](/JustasMasiulis/xorstr/commit/6cad21226c83fa24410f77c2029d08fe17d9ad2e
"Initial commit")

4 years ago

[README.md](/JustasMasiulis/xorstr/blob/master/README.md "README.md")

[Update
README.md](/JustasMasiulis/xorstr/commit/8ab293225374e16cbae9a54b6a1bed3ee0bf9681
"Update README.md")

5 months ago

View code

xorstr quick example API noteworthy things supported compilers and platforms
example assembly output

##  README.md

## xorstr

A heavily vectorized c++17 compile time string encryption.

# quick example

    
    
    int main() {
        std::puts(xorstr_("an extra long hello_world"));
    }

# API

    
    
    // This macro creates an encrypted xor_string string instance.
    #define xorstr(string) xor_string<...>{string}
    
    // For convenience sake there is also a macro to instantly decrypt the string
    #define xorstr_(string) xorstr(string).crypt_get()
    
    struct xor_string<CharType, ...> {
        using size_type     = std::size_t;
        using value_type    = CharT;
        using pointer       = value_type*;
        using const_pointer = const value_type*;
        
        // Returns string size in characters, not including null terminator.
        constexpr size_type size() const;
        
        // Runs the encryption/decryption algorithm on the internal storage.
        void crypt() noexcept;
        
        // Returns const pointer to the storage, without doing any modifications to it.
        const_pointer get() const;
        
        // Returns non const pointer to the storage, without doing any modifications to it.
        pointer get();
    
        // Runs crypt() and returns the pointer to the internal storage.
        pointer crypt_get();
    }

# noteworthy things

  * All keys are 64bit and generated during compile time.
  * Data blocks go in increments of 16 bytes so some space may be wasted.
  * The code has been crafted so that all the data would be embedded directly into code and not stored on .rdata and such.
  * The entirety of string encryption and decryption will be inlined.

# supported compilers and platforms

Tested to be working on clang 5.0+, gcc 7.1+ and MSVC v141. If your CPU does
not support AVX define JM_XORSTR_DISABLE_AVX_INTRINSICS to only use SSE.

# example assembly output

Output of gcc (trunk) from the quick example

    
    
    main:
      movabs rax, -4762152789334367252
      push rbp
      mov rbp, rsp
      and rsp, -32
      sub rsp, 64
      mov QWORD PTR [rsp], rax
      mov rdi, rsp
      movabs rax, -6534519754492314190
      mov QWORD PTR [rsp+8], rax
      movabs rax, -2862143164529545214
      mov QWORD PTR [rsp+16], rax
      movabs rax, -4140208776682645948
      mov QWORD PTR [rsp+24], rax
      vmovdqa ymm1, YMMWORD PTR [rsp]
      movabs rax, -2550414817236710003
      mov QWORD PTR [rsp+32], rax
      movabs rax, -4595755740016602734
      mov QWORD PTR [rsp+40], rax
      movabs rax, -5461194525092864914
      mov QWORD PTR [rsp+48], rax
      movabs rax, -4140208776682645984
      mov QWORD PTR [rsp+56], rax
      vpxor ymm0, ymm1, YMMWORD PTR [rsp+32]
      vmovdqa YMMWORD PTR [rsp], ymm0
      vzeroupper
      call puts
      xor eax, eax
      leave
      ret

## About

heavily vectorized c++17 compile time string encryption.

### Topics

[ template ](/topics/template "Topic: template") [ encryption
](/topics/encryption "Topic: encryption") [ cpp ](/topics/cpp "Topic: cpp") [
string ](/topics/string "Topic: string") [ cpp17 ](/topics/cpp17 "Topic:
cpp17") [ compile-time ](/topics/compile-time "Topic: compile-time") [ xor
](/topics/xor "Topic: xor") [ vectorized ](/topics/vectorized "Topic:
vectorized")

### Resources

Readme

### License

[ Apache-2.0 License ](/JustasMasiulis/xorstr/blob/master/LICENSE)

##  [ Releases ](/JustasMasiulis/xorstr/releases)

No releases published

##  [ Packages 0 ](/users/JustasMasiulis/packages?repo_name=xorstr)

No packages published  

##  [ Contributors 4 ](/JustasMasiulis/xorstr/graphs/contributors)

  * [ ![@JustasMasiulis](https://avatars.githubusercontent.com/u/16763439?v=4) ](https://github.com/JustasMasiulis) [ **JustasMasiulis** Justas Masiulis ](https://github.com/JustasMasiulis)
  * [ ![@Randshot](https://avatars.githubusercontent.com/u/7832423?v=4) ](https://github.com/Randshot) [ **Randshot** kuhaku ](https://github.com/Randshot)
  * [ ![@aleks-s](https://avatars.githubusercontent.com/u/42058587?v=4) ](https://github.com/aleks-s) [ **aleks-s** ](https://github.com/aleks-s)
  * [ ![@vmcall](https://avatars.githubusercontent.com/u/16375807?v=4) ](https://github.com/vmcall) [ **vmcall** Carl Schou ](https://github.com/vmcall)

## Languages

  * [ C++ 100.0% ](/JustasMasiulis/xorstr/search?l=c%2B%2B)

  * © 2021 GitHub, Inc.
  * [Terms](https://docs.github.com/en/github/site-policy/github-terms-of-service)
  * [Privacy](https://docs.github.com/en/github/site-policy/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Docs](https://docs.github.com)

[ ](https://github.com "GitHub")

  * [Contact GitHub](https://support.github.com)
  * [Pricing](https://github.com/pricing)
  * [API](https://docs.github.com)
  * [Training](https://services.github.com)
  * [Blog](https://github.blog)
  * [About](https://github.com/about)

You can’t perform that action at this time.

You signed in with another tab or window. [Reload]() to refresh your session.
You signed out in another tab or window. [Reload]() to refresh your session.


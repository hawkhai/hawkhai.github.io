<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=11" />
<meta name="generator" content="Doxygen 1.9.3" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OpenCL C++ Bindings: OpenCL C++ Bindings</title>
<link href="tabs.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script id="navtreeindex2" type="text/javascript" src="navtreeindex2.js"></script></head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OpenCL C++ Bindings
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div class="sm sm-dox"><input id="main-menu-state" type="checkbox" /><label class="main-menu-btn" for="main-menu-state"><span class="main-menu-btn-icon"></span> Toggle main menu visibility</label><span id="searchBoxPos1" style="position:absolute;right:8px;top:8px;height:36px;"></span></div><div id="main-nav"><ul class="sm sm-dox" id="main-menu" data-smartmenus-id="16505395780542896"><li><a href="index.html">Main Page</a></li><li><a href="namespaces.html" class="has-submenu" id="sm-16505395780542896-1" aria-haspopup="true" aria-controls="sm-16505395780542896-2" aria-expanded="false">Namespaces<span class="sub-arrow"></span></a><ul id="sm-16505395780542896-2" role="group" aria-hidden="true" aria-labelledby="sm-16505395780542896-1" aria-expanded="false"><li><a href="namespaces.html">Namespace List</a></li><li><a href="namespacemembers.html" class="has-submenu" id="sm-16505395780542896-3" aria-haspopup="true" aria-controls="sm-16505395780542896-4" aria-expanded="false">Namespace Members<span class="sub-arrow"></span></a><ul id="sm-16505395780542896-4" role="group" aria-hidden="true" aria-labelledby="sm-16505395780542896-3" aria-expanded="false"><li><a href="namespacemembers.html">All</a></li><li><a href="namespacemembers_func.html">Functions</a></li><li><a href="namespacemembers_type.html">Typedefs</a></li></ul></li></ul></li><li><a href="annotated.html" class="has-submenu" id="sm-16505395780542896-5" aria-haspopup="true" aria-controls="sm-16505395780542896-6" aria-expanded="false">Classes<span class="sub-arrow"></span></a><ul id="sm-16505395780542896-6" role="group" aria-hidden="true" aria-labelledby="sm-16505395780542896-5" aria-expanded="false"><li><a href="annotated.html">Class List</a></li><li><a href="classes.html">Class Index</a></li><li><a href="hierarchy.html">Class Hierarchy</a></li><li><a href="functions.html" class="has-submenu" id="sm-16505395780542896-7" aria-haspopup="true" aria-controls="sm-16505395780542896-8" aria-expanded="false">Class Members<span class="sub-arrow"></span></a><ul id="sm-16505395780542896-8" role="group" aria-hidden="true" aria-labelledby="sm-16505395780542896-7" aria-expanded="false"><li><a href="functions.html" class="has-submenu" id="sm-16505395780542896-9" aria-haspopup="true" aria-controls="sm-16505395780542896-10" aria-expanded="false">All<span class="sub-arrow"></span></a><ul id="sm-16505395780542896-10" role="group" aria-hidden="true" aria-labelledby="sm-16505395780542896-9" aria-expanded="false"><li><a href="functions.html#index_a">a</a></li><li><a href="functions_b.html#index_b">b</a></li><li><a href="functions_c.html#index_c">c</a></li><li><a href="functions_d.html#index_d">d</a></li><li><a href="functions_e.html#index_e">e</a></li><li><a href="functions_g.html#index_g">g</a></li><li><a href="functions_i.html#index_i">i</a></li><li><a href="functions_k.html#index_k">k</a></li><li><a href="functions_m.html#index_m">m</a></li><li><a href="functions_n.html#index_n">n</a></li><li><a href="functions_o.html#index_o">o</a></li><li><a href="functions_p.html#index_p">p</a></li><li><a href="functions_r.html#index_r">r</a></li><li><a href="functions_s.html#index_s">s</a></li><li><a href="functions_t.html#index_t">t</a></li><li><a href="functions_u.html#index_u">u</a></li><li><a href="functions_w.html#index_w">w</a></li></ul></li><li><a href="functions_func.html" class="has-submenu" id="sm-16505395780542896-11" aria-haspopup="true" aria-controls="sm-16505395780542896-12" aria-expanded="false">Functions<span class="sub-arrow"></span></a><ul id="sm-16505395780542896-12" role="group" aria-hidden="true" aria-labelledby="sm-16505395780542896-11" aria-expanded="false"><li><a href="functions_func.html#index_a">a</a></li><li><a href="functions_func_b.html#index_b">b</a></li><li><a href="functions_func_c.html#index_c">c</a></li><li><a href="functions_func_d.html#index_d">d</a></li><li><a href="functions_func_e.html#index_e">e</a></li><li><a href="functions_func_g.html#index_g">g</a></li><li><a href="functions_func_i.html#index_i">i</a></li><li><a href="functions_func_k.html#index_k">k</a></li><li><a href="functions_func_m.html#index_m">m</a></li><li><a href="functions_func_n.html#index_n">n</a></li><li><a href="functions_func_o.html#index_o">o</a></li><li><a href="functions_func_p.html#index_p">p</a></li><li><a href="functions_func_r.html#index_r">r</a></li><li><a href="functions_func_s.html#index_s">s</a></li><li><a href="functions_func_u.html#index_u">u</a></li><li><a href="functions_func_w.html#index_w">w</a></li></ul></li><li><a href="functions_type.html">Typedefs</a></li></ul></li></ul></li><li><a href="files.html" class="has-submenu" id="sm-16505395780542896-13" aria-haspopup="true" aria-controls="sm-16505395780542896-14" aria-expanded="false">Files<span class="sub-arrow"></span></a><ul id="sm-16505395780542896-14" role="group" aria-hidden="true" aria-labelledby="sm-16505395780542896-13" aria-expanded="false"><li><a href="files.html">File List</a></li></ul></li><li id="searchBoxPos2" style="float:right"><div id="MSearchBox" class="MSearchBoxInactive"><span class="left"><img id="MSearchSelect" src="search/mag_sel.svg" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" alt="" /><input type="text" id="MSearchField" value="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)" /></span><span class="right"><a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt="" /></a></span></div></li></ul></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable" style="height: 763px; width: 250px;">
  <div id="nav-tree" style="height: 763px;">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync" style="top: 30px;"><img src="sync_on.png" title="click to disable panel synchronisation" /></div>
    <ul style="display: block;"><li><div class="item selected" id="selected"><a href="javascript:void(0)"><span class="arrow" style="padding-left: 0px;">▼</span></a><span class="label"><a class="index.html" href="index.html">OpenCL C++ Bindings</a></span></div><ul class="children_ul" style=""><li><div class="item"><span class="arrow" style="width: 32px;"> </span><span class="label"><a class="index.html:intro" href="index.html#intro">Introduction</a></span></div></li><li><div class="item"><span class="arrow" style="width: 32px;"> </span><span class="label"><a class="index.html:compatibility" href="index.html#compatibility">Compatibility</a></span></div></li><li><div class="item"><span class="arrow" style="width: 32px;"> </span><span class="label"><a class="index.html:parameterization" href="index.html#parameterization">Parameters</a></span></div></li><li><div class="item"><span class="arrow" style="width: 32px;"> </span><span class="label"><a class="index.html:example" href="index.html#example">Example</a></span></div></li><li><div class="item"><a href="javascript:void(0)"><span class="arrow" style="padding-left: 16px;">►</span></a><span class="label"><a class="namespaces.html" href="namespaces.html">Namespaces</a></span></div></li><li><div class="item"><a href="javascript:void(0)"><span class="arrow" style="padding-left: 16px;">►</span></a><span class="label"><a class="annotated.html" href="annotated.html">Classes</a></span></div></li><li><div class="item"><a href="javascript:void(0)"><span class="arrow" style="padding-left: 16px;">►</span></a><span class="label"><a class="files.html" href="files.html">Files</a></span></div></li></ul></li></ul></div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" class="ui-resizable-handle">
  </div>
<div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90;"></div></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content" style="margin-left: 256px; height: 763px;">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" onclick="searchBox.OnSelectItem(0)" href="javascript:void(0)"><span class="SelectionMark">•</span>All</a><a class="SelectItem" onclick="searchBox.OnSelectItem(1)" href="javascript:void(0)"><span class="SelectionMark"> </span>Classes</a><a class="SelectItem" onclick="searchBox.OnSelectItem(2)" href="javascript:void(0)"><span class="SelectionMark"> </span>Namespaces</a><a class="SelectItem" onclick="searchBox.OnSelectItem(3)" href="javascript:void(0)"><span class="SelectionMark"> </span>Files</a><a class="SelectItem" onclick="searchBox.OnSelectItem(4)" href="javascript:void(0)"><span class="SelectionMark"> </span>Functions</a><a class="SelectItem" onclick="searchBox.OnSelectItem(5)" href="javascript:void(0)"><span class="SelectionMark"> </span>Typedefs</a><a class="SelectItem" onclick="searchBox.OnSelectItem(6)" href="javascript:void(0)"><span class="SelectionMark"> </span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">OpenCL C++ Bindings </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>For many large applications C++ is the language of choice and so it seems reasonable to define C++ bindings for OpenCL.</p>
<p>The interface is contained with a single C++ header file <em><a class="el" href="opencl_8hpp.html" title="C++ bindings for OpenCL 1.0, OpenCL 1.1, OpenCL 1.2, OpenCL 2.0, OpenCL 2.1, OpenCL 2....">opencl.hpp</a></em> and all definitions are contained within the namespace <em>cl</em>. There is no additional requirement to include <em>cl.h</em> and to use either the C++ or original C bindings; it is enough to simply include <em><a class="el" href="opencl_8hpp.html" title="C++ bindings for OpenCL 1.0, OpenCL 1.1, OpenCL 1.2, OpenCL 2.0, OpenCL 2.1, OpenCL 2....">opencl.hpp</a></em>.</p>
<p>The bindings themselves are lightweight and correspond closely to the underlying C API. Using the C++ bindings introduces no additional execution overhead.</p>
<p>There are numerous compatibility, portability and memory management fixes in the new header as well as additional OpenCL 2.0 features. As a result the header is not directly backward compatible and for this reason we release it as <a class="el" href="opencl_8hpp.html" title="C++ bindings for OpenCL 1.0, OpenCL 1.1, OpenCL 1.2, OpenCL 2.0, OpenCL 2.1, OpenCL 2....">opencl.hpp</a> rather than a new version of cl.hpp.</p>
<h1><a class="anchor" id="compatibility"></a>
Compatibility</h1>
<p>Due to the evolution of the underlying OpenCL API the 2.0 C++ bindings include an updated approach to defining supported feature versions and the range of valid underlying OpenCL runtime versions supported.</p>
<p>The combination of preprocessor macros CL_HPP_TARGET_OPENCL_VERSION and CL_HPP_MINIMUM_OPENCL_VERSION control this range. These are three digit decimal values representing OpenCL runime versions. The default for the target is 200, representing OpenCL 2.0 and the minimum is also defined as 200. These settings would use 2.0 API calls only. If backward compatibility with a 1.2 runtime is required, the minimum version may be set to 120.</p>
<p>Note that this is a compile-time setting, and so affects linking against a particular SDK version rather than the versioning of the loaded runtime.</p>
<p>The earlier versions of the header included basic vector and string classes based loosely on STL versions. These were difficult to maintain and very rarely used. For the 2.0 header we now assume the presence of the standard library unless requested otherwise. We use std::array, std::vector, std::shared_ptr and std::string throughout to safely manage memory and reduce the chance of a recurrance of earlier memory management bugs.</p>
<p>These classes are used through typedefs in the cl namespace: cl::array, cl::vector, cl::pointer and cl::string. In addition <a class="el" href="namespacecl.html#a8e1fce10cd1b8118f51aa91ce0a589e5">cl::allocate_pointer</a> forwards to std::allocate_shared by default. In all cases these standard library classes can be replaced with custom interface-compatible versions using the CL_HPP_NO_STD_ARRAY, CL_HPP_NO_STD_VECTOR, CL_HPP_NO_STD_UNIQUE_PTR and CL_HPP_NO_STD_STRING macros.</p>
<p>The OpenCL 1.x versions of the C++ bindings included a size_t wrapper class to interface with kernel enqueue. This caused unpleasant interactions with the standard size_t declaration and led to namespacing bugs. In the 2.0 version we have replaced this with a std::array-based interface. However, the old behaviour can be regained for backward compatibility using the CL_HPP_ENABLE_SIZE_T_COMPATIBILITY macro.</p>
<p>Finally, the program construction interface used a clumsy vector-of-pairs design in the earlier versions. We have replaced that with a cleaner vector-of-vectors and vector-of-strings design. However, for backward compatibility old behaviour can be regained with the CL_HPP_ENABLE_PROGRAM_CONSTRUCTION_FROM_ARRAY_COMPATIBILITY macro.</p>
<p>In OpenCL 2.0 OpenCL C is not entirely backward compatibility with earlier versions. As a result a flag must be passed to the OpenCL C compiled to request OpenCL 2.0 compilation of kernels with 1.2 as the default in the absence of the flag. In some cases the C++ bindings automatically compile code for ease. For those cases the compilation defaults to OpenCL C 2.0. If this is not wanted, the CL_HPP_CL_1_2_DEFAULT_BUILD macro may be specified to assume 1.2 compilation. If more fine-grained decisions on a per-kernel bases are required then explicit build operations that take the flag should be used.</p>
<h1><a class="anchor" id="parameterization"></a>
Parameters</h1>
<p>This header may be parameterized by a set of preprocessor macros.</p>
<ul>
<li><p class="startli">CL_HPP_TARGET_OPENCL_VERSION</p>
<p class="startli">Defines the target OpenCL runtime version to build the header against. Defaults to 200, representing OpenCL 2.0.</p>
</li>
<li><p class="startli">CL_HPP_NO_STD_STRING</p>
<p class="startli">Do not use the standard library string class. cl::string is not defined and may be defined by the user before <a class="el" href="opencl_8hpp.html" title="C++ bindings for OpenCL 1.0, OpenCL 1.1, OpenCL 1.2, OpenCL 2.0, OpenCL 2.1, OpenCL 2....">opencl.hpp</a> is included.</p>
</li>
<li><p class="startli">CL_HPP_NO_STD_VECTOR</p>
<p class="startli">Do not use the standard library vector class. cl::vector is not defined and may be defined by the user before <a class="el" href="opencl_8hpp.html" title="C++ bindings for OpenCL 1.0, OpenCL 1.1, OpenCL 1.2, OpenCL 2.0, OpenCL 2.1, OpenCL 2....">opencl.hpp</a> is included.</p>
</li>
<li><p class="startli">CL_HPP_NO_STD_ARRAY</p>
<p class="startli">Do not use the standard library array class. cl::array is not defined and may be defined by the user before <a class="el" href="opencl_8hpp.html" title="C++ bindings for OpenCL 1.0, OpenCL 1.1, OpenCL 1.2, OpenCL 2.0, OpenCL 2.1, OpenCL 2....">opencl.hpp</a> is included.</p>
</li>
<li><p class="startli">CL_HPP_NO_STD_UNIQUE_PTR</p>
<p class="startli">Do not use the standard library unique_ptr class. cl::pointer and the <a class="el" href="namespacecl.html#a8e1fce10cd1b8118f51aa91ce0a589e5">cl::allocate_pointer</a> functions are not defined and may be defined by the user before <a class="el" href="opencl_8hpp.html" title="C++ bindings for OpenCL 1.0, OpenCL 1.1, OpenCL 1.2, OpenCL 2.0, OpenCL 2.1, OpenCL 2....">opencl.hpp</a> is included.</p>
</li>
<li><p class="startli">CL_HPP_ENABLE_EXCEPTIONS</p>
<p class="startli">Enable exceptions for use in the C++ bindings header. This is the preferred error handling mechanism but is not required.</p>
</li>
<li><p class="startli">CL_HPP_ENABLE_SIZE_T_COMPATIBILITY</p>
<p class="startli">Backward compatibility option to support cl.hpp-style size_t class. Replaces the updated std::array derived version and removal of size_t from the namespace. Note that in this case the new size_t class is placed in the cl::compatibility namespace and thus requires an additional using declaration for direct backward compatibility.</p>
</li>
<li><p class="startli">CL_HPP_ENABLE_PROGRAM_CONSTRUCTION_FROM_ARRAY_COMPATIBILITY</p>
<p class="startli">Enable older vector of pairs interface for construction of programs.</p>
</li>
<li><p class="startli">CL_HPP_CL_1_2_DEFAULT_BUILD</p>
<p class="startli">Default to OpenCL C 1.2 compilation rather than OpenCL C 2.0 applies to use of <a class="el" href="classcl_1_1_program.html" title="Program interface that implements cl_program.">cl::Program</a> construction and other program build variants.</p>
</li>
<li><p class="startli">CL_HPP_USE_CL_DEVICE_FISSION</p>
<p class="startli">Enable the cl_ext_device_fission extension.</p>
</li>
<li><p class="startli">CL_HPP_USE_CL_IMAGE2D_FROM_BUFFER_KHR</p>
<p class="startli">Enable the cl_khr_image2d_from_buffer extension.</p>
</li>
<li><p class="startli">CL_HPP_USE_CL_SUB_GROUPS_KHR</p>
<p class="startli">Enable the cl_khr_subgroups extension.</p>
</li>
<li><p class="startli">CL_HPP_USE_DX_INTEROP</p>
<p class="startli">Enable the cl_khr_d3d10_sharing extension.</p>
</li>
<li><p class="startli">CL_HPP_USE_IL_KHR</p>
<p class="startli">Enable the cl_khr_il_program extension.</p>
</li>
</ul>
<h1><a class="anchor" id="example"></a>
Example</h1>
<p>The following example shows a general use case for the C++ bindings, including support for the optional exception feature and also the supplied vector and string classes, see following sections for decriptions of these features.</p>
<p>Note: the C++ bindings use std::call_once and therefore may need to be compiled using special command-line options (such as "-pthread") on some platforms!</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define CL_HPP_ENABLE_EXCEPTIONS</span></div>
<div class="line"><span class="preprocessor">#define CL_HPP_TARGET_OPENCL_VERSION 200</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="opencl_8hpp.html">CL/opencl.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> numElements = 32;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Filter for a 2.0 or newer platform and set it as the default</span></div>
<div class="line">    std::vector&lt;cl::Platform&gt; platforms;</div>
<div class="line">    <a class="code hl_function" href="classcl_1_1_platform.html#af15bd8dced161daee0c5289178c8a0e1">cl::Platform::get</a>(&amp;platforms);</div>
<div class="line">    <a class="code hl_class" href="classcl_1_1_platform.html">cl::Platform</a> plat;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;p : platforms) {</div>
<div class="line">        std::string platver = p.<a class="code hl_function" href="classcl_1_1_platform.html#af19b9194c46f545ffe62950f6e7cf377">getInfo</a>&lt;CL_PLATFORM_VERSION&gt;();</div>
<div class="line">        <span class="keywordflow">if</span> (platver.find(<span class="stringliteral">"OpenCL 2."</span>) != std::string::npos ||</div>
<div class="line">            platver.find(<span class="stringliteral">"OpenCL 3."</span>) != std::string::npos) {</div>
<div class="line">            <span class="comment">// Note: an OpenCL 3.x platform may not support all required features!</span></div>
<div class="line">            plat = p;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (plat() == 0) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">"No OpenCL 2.0 or newer platform found.\n"</span>;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classcl_1_1_platform.html">cl::Platform</a> newP = <a class="code hl_function" href="classcl_1_1_platform.html#afcf93176bebefc3add081c2d93935453">cl::Platform::setDefault</a>(plat);</div>
<div class="line">    <span class="keywordflow">if</span> (newP != plat) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">"Error setting default platform.\n"</span>;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// C++11 raw string literal for the first kernel</span></div>
<div class="line">    std::string kernel1{R<span class="stringliteral">"CLC(</span></div>
<div class="line"><span class="stringliteral">        global int globalA;</span></div>
<div class="line"><span class="stringliteral">        kernel void updateGlobal()</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">          globalA = 75;</span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral">    )CLC"};</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    </span><span class="comment">// Raw string literal for the second kernel</span></div>
<div class="line">    std::string kernel2{R<span class="stringliteral">"CLC(</span></div>
<div class="line"><span class="stringliteral">        typedef struct { global int *bar; } Foo;</span></div>
<div class="line"><span class="stringliteral">        kernel void vectorAdd(global const Foo* aNum, global const int *inputA, global const int *inputB,</span></div>
<div class="line"><span class="stringliteral">                              global int *output, int val, write_only pipe int outPipe, queue_t childQueue)</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">          output[get_global_id(0)] = inputA[get_global_id(0)] + inputB[get_global_id(0)] + val + *(aNum-&gt;bar);</span></div>
<div class="line"><span class="stringliteral">          write_pipe(outPipe, &amp;val);</span></div>
<div class="line"><span class="stringliteral">          queue_t default_queue = get_default_queue();</span></div>
<div class="line"><span class="stringliteral">          ndrange_t ndrange = ndrange_1D(get_global_size(0)/2, get_global_size(0)/2);</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">          // Have a child kernel write into third quarter of output</span></div>
<div class="line"><span class="stringliteral">          enqueue_kernel(default_queue, CLK_ENQUEUE_FLAGS_WAIT_KERNEL, ndrange,</span></div>
<div class="line"><span class="stringliteral">            ^{</span></div>
<div class="line"><span class="stringliteral">                output[get_global_size(0)*2 + get_global_id(0)] =</span></div>
<div class="line"><span class="stringliteral">                  inputA[get_global_size(0)*2 + get_global_id(0)] + inputB[get_global_size(0)*2 + get_global_id(0)] + globalA;</span></div>
<div class="line"><span class="stringliteral">            });</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">          // Have a child kernel write into last quarter of output</span></div>
<div class="line"><span class="stringliteral">          enqueue_kernel(childQueue, CLK_ENQUEUE_FLAGS_WAIT_KERNEL, ndrange,</span></div>
<div class="line"><span class="stringliteral">            ^{</span></div>
<div class="line"><span class="stringliteral">                output[get_global_size(0)*3 + get_global_id(0)] =</span></div>
<div class="line"><span class="stringliteral">                  inputA[get_global_size(0)*3 + get_global_id(0)] + inputB[get_global_size(0)*3 + get_global_id(0)] + globalA + 2;</span></div>
<div class="line"><span class="stringliteral">            });</span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral">    )CLC"};</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    std::vector&lt;std::string&gt; programStrings;</span></div>
<div class="line"><span class="stringliteral">    programStrings.push_back(kernel1);</span></div>
<div class="line"><span class="stringliteral">    programStrings.push_back(kernel2);</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classcl_1_1_program.html">cl::Program</a> vectorAddProgram(programStrings);</span></div>
<div class="line"><span class="stringliteral">    </span><span class="keywordflow">try</span> {</div>
<div class="line">        vectorAddProgram.build(<span class="stringliteral">"-cl-std=CL2.0"</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (...) {</div>
<div class="line">        <span class="comment">// Print build info for all devices</span></div>
<div class="line">        cl_int buildErr = CL_SUCCESS;</div>
<div class="line">        <span class="keyword">auto</span> buildInfo = vectorAddProgram.getBuildInfo&lt;CL_PROGRAM_BUILD_LOG&gt;(&amp;buildErr);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;pair : buildInfo) {</div>
<div class="line">            std::cerr &lt;&lt; pair.second &lt;&lt; std::endl &lt;&lt; std::endl;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">typedef</span> <span class="keyword">struct </span>{ <span class="keywordtype">int</span> *bar; } Foo;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get and run kernel that initializes the program-scope global</span></div>
<div class="line">    <span class="comment">// A test for kernels that take no arguments</span></div>
<div class="line">    <span class="keyword">auto</span> program2Kernel =</div>
<div class="line">        <a class="code hl_class" href="classcl_1_1_kernel_functor.html">cl::KernelFunctor&lt;&gt;</a>(vectorAddProgram, <span class="stringliteral">"updateGlobal"</span>);</div>
<div class="line">    program2Kernel(</div>
<div class="line">        <a class="code hl_class" href="classcl_1_1_enqueue_args.html">cl::EnqueueArgs</a>(</div>
<div class="line">        <a class="code hl_class" href="classcl_1_1_n_d_range.html">cl::NDRange</a>(1)));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// SVM allocations</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> anSVMInt = cl::allocate_svm&lt;int, cl::SVMTraitCoarse&lt;&gt;&gt;();</div>
<div class="line">    *anSVMInt = 5;</div>
<div class="line">    <a class="code hl_class" href="classcl_1_1_s_v_m_allocator.html">cl::SVMAllocator&lt;Foo, cl::SVMTraitCoarse&lt;cl::SVMTraitReadOnly&lt;&gt;</a>&gt;&gt; svmAllocReadOnly;</div>
<div class="line">    <span class="keyword">auto</span> fooPointer = cl::allocate_pointer&lt;Foo&gt;(svmAllocReadOnly);</div>
<div class="line">    fooPointer-&gt;bar = anSVMInt.get();</div>
<div class="line">    <a class="code hl_class" href="classcl_1_1_s_v_m_allocator.html">cl::SVMAllocator&lt;int, cl::SVMTraitCoarse&lt;&gt;</a>&gt; svmAlloc;</div>
<div class="line">    std::vector&lt;int, cl::SVMAllocator&lt;int, cl::SVMTraitCoarse&lt;&gt;&gt;&gt; inputA(numElements, 1, svmAlloc);</div>
<div class="line">    <a class="code hl_typedef" href="namespacecl.html#abd957be3ad58ee2932a99ed8bc6cc049">cl::coarse_svm_vector&lt;int&gt;</a> inputB(numElements, 2, svmAlloc);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Traditional cl_mem allocations</span></div>
<div class="line"> </div>
<div class="line">    std::vector&lt;int&gt; output(numElements, 0xdeadbeef);</div>
<div class="line">    <a class="code hl_class" href="classcl_1_1_buffer.html">cl::Buffer</a> outputBuffer(begin(output), end(output), <span class="keyword">false</span>);</div>
<div class="line">    <a class="code hl_class" href="classcl_1_1_pipe.html">cl::Pipe</a> aPipe(<span class="keyword">sizeof</span>(cl_int), numElements / 2);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Default command queue, also passed in as a parameter</span></div>
<div class="line">    <a class="code hl_class" href="classcl_1_1_device_command_queue.html">cl::DeviceCommandQueue</a> defaultDeviceQueue = <a class="code hl_function" href="classcl_1_1_device_command_queue.html#acf98d7e70d84afc31789a6f26a95d14b">cl::DeviceCommandQueue::makeDefault</a>(</div>
<div class="line">        <a class="code hl_function" href="classcl_1_1_context.html#ad180f6f7d8b5a95710ab72f96162b051">cl::Context::getDefault</a>(), <a class="code hl_function" href="classcl_1_1_device.html#a7428cf3cdccc824c414730ed65e40a0d">cl::Device::getDefault</a>());</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> vectorAddKernel =</div>
<div class="line">        <a class="code hl_class" href="classcl_1_1_kernel_functor.html">cl::KernelFunctor</a>&lt;</div>
<div class="line">            <span class="keyword">decltype</span>(fooPointer)&amp;,</div>
<div class="line">            <span class="keywordtype">int</span>*,</div>
<div class="line">            <a class="code hl_typedef" href="namespacecl.html#abd957be3ad58ee2932a99ed8bc6cc049">cl::coarse_svm_vector&lt;int&gt;</a>&amp;,</div>
<div class="line">            <a class="code hl_class" href="classcl_1_1_buffer.html">cl::Buffer</a>,</div>
<div class="line">            <span class="keywordtype">int</span>,</div>
<div class="line">            <a class="code hl_class" href="classcl_1_1_pipe.html">cl::Pipe</a>&amp;,</div>
<div class="line">            <a class="code hl_class" href="classcl_1_1_device_command_queue.html">cl::DeviceCommandQueue</a></div>
<div class="line">            &gt;(vectorAddProgram, <span class="stringliteral">"vectorAdd"</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Ensure that the additional SVM pointer is available to the kernel</span></div>
<div class="line">    <span class="comment">// This one was not passed as a parameter</span></div>
<div class="line">    vectorAddKernel.setSVMPointers(anSVMInt);</div>
<div class="line"> </div>
<div class="line">    cl_int error;</div>
<div class="line">    vectorAddKernel(</div>
<div class="line">        <a class="code hl_class" href="classcl_1_1_enqueue_args.html">cl::EnqueueArgs</a>(</div>
<div class="line">            <a class="code hl_class" href="classcl_1_1_n_d_range.html">cl::NDRange</a>(numElements/2),</div>
<div class="line">            <a class="code hl_class" href="classcl_1_1_n_d_range.html">cl::NDRange</a>(numElements/2)),</div>
<div class="line">        fooPointer,</div>
<div class="line">        inputA.data(),</div>
<div class="line">        inputB,</div>
<div class="line">        outputBuffer,</div>
<div class="line">        3,</div>
<div class="line">        aPipe,</div>
<div class="line">        defaultDeviceQueue,</div>
<div class="line">        error</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="namespacecl.html#a1197a833cdd6664f206b079f2bebd2eb">cl::copy</a>(outputBuffer, begin(output), end(output));</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classcl_1_1_device.html">cl::Device</a> d = <a class="code hl_function" href="classcl_1_1_device.html#a7428cf3cdccc824c414730ed65e40a0d">cl::Device::getDefault</a>();</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">"Output:\n"</span>;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; numElements; ++i) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">"\t"</span> &lt;&lt; output[i] &lt;&lt; <span class="stringliteral">"\n"</span>;</div>
<div class="line">    }</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">"\n\n"</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclasscl_1_1_buffer_html"><div class="ttname"><a href="classcl_1_1_buffer.html">cl::Buffer</a></div><div class="ttdoc">Class interface for Buffer Memory Objects.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l03923">opencl.hpp:3924</a></div></div>
<div class="ttc" id="aclasscl_1_1_context_html_ad180f6f7d8b5a95710ab72f96162b051"><div class="ttname"><a href="classcl_1_1_context.html#ad180f6f7d8b5a95710ab72f96162b051">cl::Context::getDefault</a></div><div class="ttdeci">static Context getDefault(cl_int *err=NULL)</div><div class="ttdoc">Returns a singleton context including all devices of CL_DEVICE_TYPE_DEFAULT.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l03090">opencl.hpp:3090</a></div></div>
<div class="ttc" id="aclasscl_1_1_device_command_queue_html"><div class="ttname"><a href="classcl_1_1_device_command_queue.html">cl::DeviceCommandQueue</a></div><div class="ttdoc">DeviceCommandQueue interface for device cl_command_queues.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l08870">opencl.hpp:8871</a></div></div>
<div class="ttc" id="aclasscl_1_1_device_command_queue_html_acf98d7e70d84afc31789a6f26a95d14b"><div class="ttname"><a href="classcl_1_1_device_command_queue.html#acf98d7e70d84afc31789a6f26a95d14b">cl::DeviceCommandQueue::makeDefault</a></div><div class="ttdeci">static DeviceCommandQueue makeDefault(cl_int *err=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l09024">opencl.hpp:9024</a></div></div>
<div class="ttc" id="aclasscl_1_1_device_html"><div class="ttname"><a href="classcl_1_1_device.html">cl::Device</a></div><div class="ttdoc">Class interface for cl_device_id.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l02175">opencl.hpp:2176</a></div></div>
<div class="ttc" id="aclasscl_1_1_device_html_a7428cf3cdccc824c414730ed65e40a0d"><div class="ttname"><a href="classcl_1_1_device.html#a7428cf3cdccc824c414730ed65e40a0d">cl::Device::getDefault</a></div><div class="ttdeci">static Device getDefault(cl_int *errResult=NULL)</div><div class="ttdoc">Returns the first device on the default context.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l02225">opencl.hpp:2225</a></div></div>
<div class="ttc" id="aclasscl_1_1_enqueue_args_html"><div class="ttname"><a href="classcl_1_1_enqueue_args.html">cl::EnqueueArgs</a></div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l09904">opencl.hpp:9905</a></div></div>
<div class="ttc" id="aclasscl_1_1_kernel_functor_html"><div class="ttname"><a href="classcl_1_1_kernel_functor.html">cl::KernelFunctor</a></div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l10095">opencl.hpp:10096</a></div></div>
<div class="ttc" id="aclasscl_1_1_n_d_range_html"><div class="ttname"><a href="classcl_1_1_n_d_range.html">cl::NDRange</a></div><div class="ttdoc">Class interface for specifying NDRange values.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l05784">opencl.hpp:5785</a></div></div>
<div class="ttc" id="aclasscl_1_1_pipe_html"><div class="ttname"><a href="classcl_1_1_pipe.html">cl::Pipe</a></div><div class="ttdoc">Class interface for Pipe Memory Objects.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l05514">opencl.hpp:5515</a></div></div>
<div class="ttc" id="aclasscl_1_1_platform_html"><div class="ttname"><a href="classcl_1_1_platform.html">cl::Platform</a></div><div class="ttdoc">Class interface for cl_platform_id.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l02455">opencl.hpp:2456</a></div></div>
<div class="ttc" id="aclasscl_1_1_platform_html_af15bd8dced161daee0c5289178c8a0e1"><div class="ttname"><a href="classcl_1_1_platform.html#af15bd8dced161daee0c5289178c8a0e1">cl::Platform::get</a></div><div class="ttdeci">static cl_int get(vector&lt; Platform &gt; *platforms)</div><div class="ttdoc">Gets a list of available platforms.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l02732">opencl.hpp:2732</a></div></div>
<div class="ttc" id="aclasscl_1_1_platform_html_af19b9194c46f545ffe62950f6e7cf377"><div class="ttname"><a href="classcl_1_1_platform.html#af19b9194c46f545ffe62950f6e7cf377">cl::Platform::getInfo</a></div><div class="ttdeci">cl_int getInfo(cl_platform_info name, T *param) const</div><div class="ttdoc">Wrapper for clGetPlatformInfo().</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l02577">opencl.hpp:2577</a></div></div>
<div class="ttc" id="aclasscl_1_1_platform_html_afcf93176bebefc3add081c2d93935453"><div class="ttname"><a href="classcl_1_1_platform.html#afcf93176bebefc3add081c2d93935453">cl::Platform::setDefault</a></div><div class="ttdeci">static Platform setDefault(const Platform &amp;default_platform)</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l02568">opencl.hpp:2568</a></div></div>
<div class="ttc" id="aclasscl_1_1_program_html"><div class="ttname"><a href="classcl_1_1_program.html">cl::Program</a></div><div class="ttdoc">Program interface that implements cl_program.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l06270">opencl.hpp:6271</a></div></div>
<div class="ttc" id="aclasscl_1_1_s_v_m_allocator_html"><div class="ttname"><a href="classcl_1_1_s_v_m_allocator.html">cl::SVMAllocator</a></div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l03659">opencl.hpp:3659</a></div></div>
<div class="ttc" id="anamespacecl_html_a1197a833cdd6664f206b079f2bebd2eb"><div class="ttname"><a href="namespacecl.html#a1197a833cdd6664f206b079f2bebd2eb">cl::copy</a></div><div class="ttdeci">cl_int copy(IteratorType startIterator, IteratorType endIterator, cl::Buffer &amp;buffer)</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l09514">opencl.hpp:9514</a></div></div>
<div class="ttc" id="anamespacecl_html_abd957be3ad58ee2932a99ed8bc6cc049"><div class="ttname"><a href="namespacecl.html#abd957be3ad58ee2932a99ed8bc6cc049">cl::coarse_svm_vector</a></div><div class="ttdeci">vector&lt; T, cl::SVMAllocator&lt; int, cl::SVMTraitCoarse&lt;&gt; &gt; &gt; coarse_svm_vector</div><div class="ttdoc">Vector alias to simplify contruction of coarse-grained SVM containers.</div><div class="ttdef"><b>Definition:</b> <a href="opencl_8hpp_source.html#l03900">opencl.hpp:3900</a></div></div>
<div class="ttc" id="aopencl_8hpp_html"><div class="ttname"><a href="opencl_8hpp.html">opencl.hpp</a></div><div class="ttdoc">C++ bindings for OpenCL 1.0, OpenCL 1.1, OpenCL 1.2, OpenCL 2.0, OpenCL 2.1, OpenCL 2....</div></div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jan 25 2022 12:01:04 for OpenCL C++ Bindings by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen" /></a> 1.9.3 </li>
  </ul>
</div>


<div id="powerTip"></div></body></html>
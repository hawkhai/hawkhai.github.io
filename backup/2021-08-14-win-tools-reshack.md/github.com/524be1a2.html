---
title : 自动快照存档
---

* TIME: 2022-06-28 14:32:56
* URL: <https://github.com/pyinstaller/pyinstaller/issues/5579>

-----

Skip to content

[ ](https://github.com/)

[ Sign up
](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-
name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo)

  * Product 

    * [ Features ](/features)
    * [ Mobile ](/mobile)
    * [ Actions ](/features/actions)
    * [ Codespaces ](/features/codespaces)
    * [ Copilot ](/features/copilot)
    * [ Packages ](/features/packages)
    * [ Security ](/features/security)
    * [ Code review ](/features/code-review)
    * [ Issues ](/features/issues)
    * [ Integrations ](/features/integrations)
    * [ GitHub Sponsors ](/sponsors)
    * [ Customer stories ](/customer-stories)

  * [Team](/team)
  * [Enterprise](/enterprise)
  * Explore 

    * [ Explore GitHub ](/explore)
    * Learn and contribute
    * [ Topics ](/topics)
    * [ Collections ](/collections)
    * [ Trending ](/trending)
    * [ Skills ](https://skills.github.com/)
    * [ GitHub Sponsors ](/sponsors/explore)
    * [ Open source guides ](https://opensource.guide)
    * Connect with others
    * [ The ReadME Project ](/readme)
    * [ Events ](/events)
    * [ Community forum ](https://github.community)
    * [ GitHub Education ](https://education.github.com)
    * [ GitHub Stars program ](https://stars.github.com)

  * [Marketplace](/marketplace)
  * Pricing 

    * [ Plans ](/pricing)
    * [ Compare plans ](/pricing#compare-features)
    * [ Contact Sales ](https://github.com/enterprise/contact)
    * [ Education ](https://education.github.com)

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

  * No suggested jump to results

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this organization  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

[ Sign in
](/login?return_to=https%3A%2F%2Fgithub.com%2Fpyinstaller%2Fpyinstaller%2Fissues%2F5579)

[ Sign up
](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-
name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-
repo&source_repo=pyinstaller%2Fpyinstaller)

{{ message }}

[pyinstaller](/pyinstaller) / **[pyinstaller](/pyinstaller/pyinstaller) **
Public

  * [ Sponsor ](/sponsors/Legorooj)
  * [ Notifications ](/login?return_to=%2Fpyinstaller%2Fpyinstaller)
  * [ Fork 1.8k ](/login?return_to=%2Fpyinstaller%2Fpyinstaller)
  * [ Star  9.3k ](/login?return_to=%2Fpyinstaller%2Fpyinstaller)

  * [ Code ](/pyinstaller/pyinstaller)
  * [ Issues 266 ](/pyinstaller/pyinstaller/issues)
  * [ Pull requests 16 ](/pyinstaller/pyinstaller/pulls)
  * [ Discussions ](/pyinstaller/pyinstaller/discussions)
  * [ Actions ](/pyinstaller/pyinstaller/actions)
  * [ Projects 1 ](/pyinstaller/pyinstaller/projects?type=beta)
  * [ Wiki ](/pyinstaller/pyinstaller/wiki)
  * [ Security 1 ](/pyinstaller/pyinstaller/security)
  * [ Insights ](/pyinstaller/pyinstaller/pulse)

More

  * [ Code ](/pyinstaller/pyinstaller)
  * [ Issues ](/pyinstaller/pyinstaller/issues)
  * [ Pull requests ](/pyinstaller/pyinstaller/pulls)
  * [ Discussions ](/pyinstaller/pyinstaller/discussions)
  * [ Actions ](/pyinstaller/pyinstaller/actions)
  * [ Projects ](/pyinstaller/pyinstaller/projects?type=beta)
  * [ Wiki ](/pyinstaller/pyinstaller/wiki)
  * [ Security ](/pyinstaller/pyinstaller/security)
  * [ Insights ](/pyinstaller/pyinstaller/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to
open an issue and contact its maintainers and the community.

Pick a username

    

Email Address

    

Password

    
Sign up for GitHub

By clicking “Sign up for GitHub”, you agree to our [terms of
service](https://docs.github.com/terms) and [privacy
statement](https://docs.github.com/privacy). We’ll occasionally send you
account related emails.

Already on GitHub? [Sign
in](/login?return_to=%2Fpyinstaller%2Fpyinstaller%2Fissues%2Fnew) to your
account

Jump to bottom

#  Set correct PE checksum for .exe files (helps with virus false-positives)
#5579

Closed

[The-Compiler](/The-Compiler) opened this issue on 22 Feb 2021 · 12 comments
· Fixed by [#5580](https://github.com/pyinstaller/pyinstaller/pull/5580)

Closed

#  Set correct PE checksum for .exe files (helps with virus false-positives)
#5579

[The-Compiler](/The-Compiler) opened this issue on 22 Feb 2021 · 12 comments
· Fixed by [#5580](https://github.com/pyinstaller/pyinstaller/pull/5580)

Assignees

[ ![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=40&v=4)
](/bwoodsend)

Labels

[ feature ](/pyinstaller/pyinstaller/labels/feature) Feature request

## Comments

[![@The-
Compiler](https://avatars.githubusercontent.com/u/625793?s=88&u=e7536338cfb5f42fbca34ce43c4304693ada7112&v=4)](/The-
Compiler)

Copy link

Contributor

###  [![@The-
Compiler](https://avatars.githubusercontent.com/u/625793?s=60&u=e7536338cfb5f42fbca34ce43c4304693ada7112&v=4)](/The-
Compiler) **[The-Compiler](/The-Compiler) ** commented on 22 Feb 2021 •

edited

**Is your feature request related to a problem? Please describe.**  
As you've probably all seen before, virus scanner false-positives are a
recurring problem for PyInstaller-generated executables, as well as
PyInstaller's bootloader (see e.g.
[#5490](https://github.com/pyinstaller/pyinstaller/issues/5490),
[#5474](https://github.com/pyinstaller/pyinstaller/issues/5474),
[#5479](https://github.com/pyinstaller/pyinstaller/issues/5479), ...).

One piece of information virus scanners seem to use is the [PE
checksum](https://practicalsecurityanalytics.com/pe-checksum/). Quoting from
that article:

>   * 83% of malware had invalid checksums
>   * 90% of legitimate files had valid checksums.
>

It looks like anything generated from PyInstaller (as well as the Windows
bootloader in the release?) seems to have a checksum of `00 00 00 00`, which
is thus invalid.

**Describe the solution you'd like**  
PyInstaller should set a correct PE checksum. This is possible using `pefile`,
which it already seems to depend on:

    
    
    import pefile
    pe = pefile.PE('filename.exe')
    pe.OPTIONAL_HEADER.CheckSum = pe.generate_checksum()
    pe.close()
    pe.write('filename.exe')

(You can use `pe.verify_checksum()` to verify that it is correct)

After doing this, e.g. PyInstaller's `Windows-64bit/runw.exe` (in the 4.2
release) goes down from [12 false-
positives](https://www.virustotal.com/gui/file/749666ba5af516692ff3716000b992cbcf2857e825c9c1d94fac7ac8ba11759e/detection)
to [only
5](https://www.virustotal.com/gui/file/f4d86605cf8d8070c9bc4b0e6ad6c6170a6cdec9d44c8fba20f614b7005c2129/detection)
\- most notably, McAfee and Avast (which are the two affected engines I've
actually heard of before...) now are happy with the file.

Doing this with my own project (which is built with PyInstaller),
[@bitraid](https://github.com/bitraid) found that:

> the number of false positives for v2.0.2 goes down from
> [31](https://www.virustotal.com/gui/file/cb416f27e5dead44499a7e4d7e35c49697bfea262b28308a7a4f5eb7579670ef/detection)
> to
> [7](https://www.virustotal.com/gui/file/6ff31f225fc3a7386aea976ca27c457eb35b9788d7fb0737abec3abda7cbe353/detection).
> Similarly v2.0.0 goes down to
> [6](https://www.virustotal.com/gui/file/484840b3821f039bc32e773fc8da2506c75d6476066cbfe72b109fbcdd611b58/detection)
> from
> [29](https://www.virustotal.com/gui/file/e9da9077e793cde92bd6bc101659fec8238a74149b14c06dc4b1810141f8cd50/detection)
> and v2.0.1 goes down to
> [8](https://www.virustotal.com/gui/file/bb2aab3cf8a401d619a0d47177fd6e394dadc3089bf26b4cd85c846504ddd46d/detection)
> from
> [15](https://www.virustotal.com/gui/file/1f1be4d41a03d059dd87583cabcd8d93b2631c117bff3dcb988f91f268c8787d/detection).

**Describe alternatives you've considered**  
Submitting false-positive reports to antivirus vendors. A pain.

Also, doing this after PyInstaller has generated the exe - that works, but it
seems to me like this should be done in PyInstaller itself.

**Additional context**  
See
[qutebrowser/qutebrowser#6194](https://github.com/qutebrowser/qutebrowser/issues/6194)  
  
---  
  
The text was updated successfully, but these errors were encountered:

  
  
👍 1 timmsGithub reacted with thumbs up emoji ❤️ 9 BoboTiG, andyshinn,
Legorooj, heuripedes, sjackman, chrissimpkins, Technetium1, KyleKing, and
timmsGithub reacted with heart emoji All reactions

  * 👍 1 reaction
  * ❤️ 9 reactions

[![@The-
Compiler](https://avatars.githubusercontent.com/u/625793?s=60&u=e7536338cfb5f42fbca34ce43c4304693ada7112&v=4)](/The-
Compiler) [The-Compiler](/The-Compiler) added the [ feature
](/pyinstaller/pyinstaller/labels/feature) Feature request label on 22 Feb
2021

[![@The-
Compiler](https://avatars.githubusercontent.com/u/625793?s=60&u=e7536338cfb5f42fbca34ce43c4304693ada7112&v=4)](/The-
Compiler) [The-Compiler](/The-Compiler) mentioned this issue  on 22 Feb 2021

[ PyInstaller 4.2 run.exe contains a virus? #5490
](/pyinstaller/pyinstaller/issues/5490)

Closed

[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=88&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)

Copy link

Member

###
[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=60&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)
**[bwoodsend](/bwoodsend) ** commented on 22 Feb 2021

Ah yes! Nice one. How that makes an executable any more trustworthy seeing as
anyone could do it is beyond me but if it shuts up the bogus AV software then
great.  
  
---  
  
😄 1 The-Compiler reacted with laugh emoji All reactions

  * 😄 1 reaction

Sorry, something went wrong.

[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=88&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)

Copy link

Member

###
[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=60&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)
**[bwoodsend](/bwoodsend) ** commented on 22 Feb 2021

[@The-Compiler](https://github.com/The-Compiler) Fancy making the changes or
shall I?  
  
---  
  
All reactions

Sorry, something went wrong.

[![@The-
Compiler](https://avatars.githubusercontent.com/u/625793?s=88&u=e7536338cfb5f42fbca34ce43c4304693ada7112&v=4)](/The-
Compiler)

Copy link

Contributor  Author

###  [![@The-
Compiler](https://avatars.githubusercontent.com/u/625793?s=60&u=e7536338cfb5f42fbca34ce43c4304693ada7112&v=4)](/The-
Compiler) **[The-Compiler](/The-Compiler) ** commented on 22 Feb 2021 •

edited

Feel free! ~~I don't think I've contributed before~~ ([looks like I did
😆](https://github.com/pyinstaller/pyinstaller/pulls?q=is%3Apr+author%3Athe-
compiler+is%3Aclosed))

I'm not really sure what the best place for such a change would be - but I
also try to avoid working on Windows stuff if I can, so if you don't mind, go
ahead. 👍  
  
---  
  
All reactions

Sorry, something went wrong.

[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=88&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)

Copy link

Member

###
[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=60&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)
**[bwoodsend](/bwoodsend) ** commented on 22 Feb 2021

Alright then. I'll blow the cobwebs off my own Windows partition and do it...  
  
---  
  
All reactions

Sorry, something went wrong.

[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=60&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)
[bwoodsend](/bwoodsend) self-assigned this on 22 Feb 2021

[![@The-
Compiler](https://avatars.githubusercontent.com/u/625793?s=60&u=e7536338cfb5f42fbca34ce43c4304693ada7112&v=4)](/The-
Compiler) [The-Compiler](/The-Compiler) mentioned this issue  on 23 Feb 2021

[ Fix PE checksums in Windows release qutebrowser/qutebrowser#6194
](/qutebrowser/qutebrowser/issues/6194)

Closed

[The-Compiler](/The-Compiler) added a commit to qutebrowser/qutebrowser that
referenced this issue  on 23 Feb 2021

[ ![@The-
Compiler](https://avatars.githubusercontent.com/u/625793?s=40&u=e7536338cfb5f42fbca34ce43c4304693ada7112&v=4)
](/The-Compiler)

` [scripts: Fix PE checksum for Windows
releases](/qutebrowser/qutebrowser/commit/2b9108113d93284cbb84879dbf3d768abe513056
"scripts: Fix PE checksum for Windows releases

This should help with virus scanner false positives.

See https://github.com/pyinstaller/pyinstaller/issues/5579

Fixes #6081

Fixes #6194") ` …

Loading status checks…

`
[2b91081](/qutebrowser/qutebrowser/commit/2b9108113d93284cbb84879dbf3d768abe513056)
`

    
    
    This should help with virus scanner false positives.
    
    See [pyinstaller/pyinstaller#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)
    Fixes [#6081](https://github.com/qutebrowser/qutebrowser/issues/6081)
    Fixes [#6194](https://github.com/qutebrowser/qutebrowser/issues/6194)

[The-Compiler](/The-Compiler) added a commit to qutebrowser/qutebrowser that
referenced this issue  on 23 Feb 2021

[ ![@The-
Compiler](https://avatars.githubusercontent.com/u/625793?s=40&u=e7536338cfb5f42fbca34ce43c4304693ada7112&v=4)
](/The-Compiler)

` [scripts: Fix PE checksum for Windows
releases](/qutebrowser/qutebrowser/commit/449fbb94ac9515d6084361c9a3a2e0189249d79a
"scripts: Fix PE checksum for Windows releases

This should help with virus scanner false positives.

See https://github.com/pyinstaller/pyinstaller/issues/5579

Fixes #6081

Fixes #6194

\(cherry picked from commit 2b9108113d93284cbb84879dbf3d768abe513056\)") ` …

Loading status checks…

`
[449fbb9](/qutebrowser/qutebrowser/commit/449fbb94ac9515d6084361c9a3a2e0189249d79a)
`

    
    
    This should help with virus scanner false positives.
    
    See [pyinstaller/pyinstaller#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)
    Fixes [#6081](https://github.com/qutebrowser/qutebrowser/issues/6081)
    Fixes [#6194](https://github.com/qutebrowser/qutebrowser/issues/6194)
    
    (cherry picked from commit [2b91081](https://github.com/qutebrowser/qutebrowser/commit/2b9108113d93284cbb84879dbf3d768abe513056))

[bwoodsend](/bwoodsend) added a commit to bwoodsend/pyinstaller that
referenced this issue  on 23 Feb 2021

[
![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=40&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)
](/bwoodsend)

` [Building: Windows: Set EXE checksums
(](/bwoodsend/pyinstaller/commit/99bd1b532086748e3281cccc3fc04171d1972b0e
"Building: Windows: Set EXE checksums \(#5579\).

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for
Windows.")[pyinstaller#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)[).](/bwoodsend/pyinstaller/commit/99bd1b532086748e3281cccc3fc04171d1972b0e
"Building: Windows: Set EXE checksums \(#5579\).

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for Windows.") ` …

Unverified

This commit is not signed, but one or more authors requires that any commit
attributed to them is signed.

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-
github/displaying-verification-statuses-for-all-of-your-commits).

`
[99bd1b5](/bwoodsend/pyinstaller/commit/99bd1b532086748e3281cccc3fc04171d1972b0e)
`

    
    
    Windows executables contain an optional checksum to protect
    against corruption. It turns out that several of antiviral programs
    raise false positives if this checksum is missing or wrong.
    Setting this checksum appeases McAfee and inconsistently fixes
    MS Defender which are probably the most common (and also dumbest)
    AVs for Windows.

[![@andyshinn](https://avatars.githubusercontent.com/u/315485?s=88&v=4)](/andyshinn)

Copy link

###
[![@andyshinn](https://avatars.githubusercontent.com/u/315485?s=60&v=4)](/andyshinn)
**[andyshinn](/andyshinn) ** commented on 23 Feb 2021 •

edited

I've been following the virus false-positive stuff for a while and struggling
with it myself. Here are the before VirusTotal Windows bootloader analysis so
we can compare after. The bigger one I have issues with (that I am mot sure
the source for) is Windows Defender. Will be interesting to see if this helps
that case.

Windows 32bit:

  * `run_d.exe` 1/70: <https://www.virustotal.com/gui/file/5c8ddb668b8fa768d2037879a22214db104e48cf26136cc311e159f007e6436e/detection>
  * `run.exe` 11/70: <https://www.virustotal.com/gui/file/2e4dc3fd4cb960cdc0dd0c8abc176fe80209dbf353c789e79dd0f271ad02a785/detection>
  * `runw_d.exe` 2/70: <https://www.virustotal.com/gui/file/e70c7cfb63a9ca41c55cbca60ff7acd521b67606ab33ccf2661400e876268c7a/detection>
  * `runw.exe` 14/70: <https://www.virustotal.com/gui/file/ddab59c787d9673a8098a1338098effeedca938dc338e96c5fd4654ed0b76dfa/detection>

Windows 64bit:

  * `run_d.exe` 2/71: <https://www.virustotal.com/gui/file/8ef748a59cd81d99b0ee3f5008c2275b5630d5bf8e1aecc2ed7b8a288bea21d7/detection>
  * `run.exe` 4/70: <https://www.virustotal.com/gui/file/0367cd6d43be86912de0f30dd118087ac9e79a9b5f7440e496703b1de4c44fd7/detection>
  * `runw_d.exe` 5/70: <https://www.virustotal.com/gui/file/c27d3749d3614e1b3022c84ff240fbcb3605ba6b72fcc1cf9729088fc4345ccc/detection>
  * `runw.exe` 12/71: <https://www.virustotal.com/gui/file/749666ba5af516692ff3716000b992cbcf2857e825c9c1d94fac7ac8ba11759e/detection>

  
---  
  
All reactions

Sorry, something went wrong.

[bwoodsend](/bwoodsend) added a commit to bwoodsend/pyinstaller that
referenced this issue  on 23 Feb 2021

[
![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=40&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)
](/bwoodsend)

` [Building: Windows: Set EXE checksums
(](/bwoodsend/pyinstaller/commit/06452eb433b4e0dd28b6c12864ab521511db10f1
"Building: Windows: Set EXE checksums \(#5579\).

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for
Windows.")[pyinstaller#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)[).](/bwoodsend/pyinstaller/commit/06452eb433b4e0dd28b6c12864ab521511db10f1
"Building: Windows: Set EXE checksums \(#5579\).

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for Windows.") ` …

Unverified

This commit is not signed, but one or more authors requires that any commit
attributed to them is signed.

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-
github/displaying-verification-statuses-for-all-of-your-commits).

`
[06452eb](/bwoodsend/pyinstaller/commit/06452eb433b4e0dd28b6c12864ab521511db10f1)
`

    
    
    Windows executables contain an optional checksum to protect
    against corruption. It turns out that several of antiviral programs
    raise false positives if this checksum is missing or wrong.
    Setting this checksum appeases McAfee and inconsistently fixes
    MS Defender which are probably the most common (and also dumbest)
    AVs for Windows.

[bwoodsend](/bwoodsend) added a commit to bwoodsend/pyinstaller that
referenced this issue  on 23 Feb 2021

[
![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=40&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)
](/bwoodsend)

` [Building: Windows: Set EXE checksums
(](/bwoodsend/pyinstaller/commit/fcc87d58d4030eaaed8bc06836f74c74a8749ece
"Building: Windows: Set EXE checksums \(#5579\).

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for
Windows.")[pyinstaller#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)[).](/bwoodsend/pyinstaller/commit/fcc87d58d4030eaaed8bc06836f74c74a8749ece
"Building: Windows: Set EXE checksums \(#5579\).

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for Windows.") ` …

Unverified

This commit is not signed, but one or more authors requires that any commit
attributed to them is signed.

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-
github/displaying-verification-statuses-for-all-of-your-commits).

`
[fcc87d5](/bwoodsend/pyinstaller/commit/fcc87d58d4030eaaed8bc06836f74c74a8749ece)
`

    
    
    Windows executables contain an optional checksum to protect
    against corruption. It turns out that several of antiviral programs
    raise false positives if this checksum is missing or wrong.
    Setting this checksum appeases McAfee and inconsistently fixes
    MS Defender which are probably the most common (and also dumbest)
    AVs for Windows.

[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=60&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)
[bwoodsend](/bwoodsend) mentioned this issue  on 23 Feb 2021

[ Building: Windows: Set EXE checksums (#5579). #5580
](/pyinstaller/pyinstaller/pull/5580)

Merged

[bwoodsend](/bwoodsend) added a commit to bwoodsend/pyinstaller that
referenced this issue  on 23 Feb 2021

[
![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=40&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)
](/bwoodsend)

` [Building: Windows: Set EXE checksums
(](/bwoodsend/pyinstaller/commit/c0d4e3f33421bcba3138829bed45e011c5b80c87
"Building: Windows: Set EXE checksums \(#5579\).

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for
Windows.")[pyinstaller#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)[).](/bwoodsend/pyinstaller/commit/c0d4e3f33421bcba3138829bed45e011c5b80c87
"Building: Windows: Set EXE checksums \(#5579\).

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for Windows.") ` …

Unverified

This commit is not signed, but one or more authors requires that any commit
attributed to them is signed.

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-
github/displaying-verification-statuses-for-all-of-your-commits).

`
[c0d4e3f](/bwoodsend/pyinstaller/commit/c0d4e3f33421bcba3138829bed45e011c5b80c87)
`

    
    
    Windows executables contain an optional checksum to protect
    against corruption. It turns out that several of antiviral programs
    raise false positives if this checksum is missing or wrong.
    Setting this checksum appeases McAfee and inconsistently fixes
    MS Defender which are probably the most common (and also dumbest)
    AVs for Windows.

[bwoodsend](/bwoodsend) added a commit to bwoodsend/pyinstaller that
referenced this issue  on 23 Feb 2021

[
![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=40&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)
](/bwoodsend)

` [Building: Windows: Set EXE checksums
(](/bwoodsend/pyinstaller/commit/60186047c2a6c59acfcba847e70169c570ab77ab
"Building: Windows: Set EXE checksums \(#5579\).

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for
Windows.")[pyinstaller#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)[).](/bwoodsend/pyinstaller/commit/60186047c2a6c59acfcba847e70169c570ab77ab
"Building: Windows: Set EXE checksums \(#5579\).

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for Windows.") ` …

Unverified

This commit is not signed, but one or more authors requires that any commit
attributed to them is signed.

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-
github/displaying-verification-statuses-for-all-of-your-commits).

`
[6018604](/bwoodsend/pyinstaller/commit/60186047c2a6c59acfcba847e70169c570ab77ab)
`

    
    
    Windows executables contain an optional checksum to protect
    against corruption. It turns out that several of antiviral programs
    raise false positives if this checksum is missing or wrong.
    Setting this checksum appeases McAfee and inconsistently fixes
    MS Defender which are probably the most common (and also dumbest)
    AVs for Windows.

[![@Legorooj](https://avatars.githubusercontent.com/u/50370070?s=60&u=07ee2196554cc9a89b1860d3bbe690e50e1ee34c&v=4)](/Legorooj)
[Legorooj](/Legorooj) closed this as
[completed](/pyinstaller/pyinstaller/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in [ #5580 ](/pyinstaller/pyinstaller/pull/5580) on 23 Feb 2021

[Legorooj](/Legorooj) pushed a commit that referenced this issue  on 23 Feb
2021

[
![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=40&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)
](/bwoodsend)

` [Building: Windows: Set EXE checksums
(](/pyinstaller/pyinstaller/commit/93285ece5a02932c6dac8f018bf107e7618d7d3c
"Building: Windows: Set EXE checksums \(#5579\). \(#5580\)

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for
Windows.")[#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)[).
(](/pyinstaller/pyinstaller/commit/93285ece5a02932c6dac8f018bf107e7618d7d3c
"Building: Windows: Set EXE checksums \(#5579\). \(#5580\)

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for
Windows.")[#5580](https://github.com/pyinstaller/pyinstaller/pull/5580)[)](/pyinstaller/pyinstaller/commit/93285ece5a02932c6dac8f018bf107e7618d7d3c
"Building: Windows: Set EXE checksums \(#5579\). \(#5580\)

Windows executables contain an optional checksum to protect

against corruption. It turns out that several of antiviral programs

raise false positives if this checksum is missing or wrong.

Setting this checksum appeases McAfee and inconsistently fixes

MS Defender which are probably the most common \(and also dumbest\)

AVs for Windows.") ` …

Verified

This commit was created on GitHub.com and signed with GitHub’s **verified
signature**.

GPG key ID: 4AEE18F83AFDEB23

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-
github/displaying-verification-statuses-for-all-of-your-commits).

Loading status checks…

`
[93285ec](/pyinstaller/pyinstaller/commit/93285ece5a02932c6dac8f018bf107e7618d7d3c)
`

    
    
    Windows executables contain an optional checksum to protect
    against corruption. It turns out that several of antiviral programs
    raise false positives if this checksum is missing or wrong.
    Setting this checksum appeases McAfee and inconsistently fixes
    MS Defender which are probably the most common (and also dumbest)
    AVs for Windows.

[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=88&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)

Copy link

Member

###
[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=60&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)
**[bwoodsend](/bwoodsend) ** commented on 23 Feb 2021

I've done it ([#5580](https://github.com/pyinstaller/pyinstaller/pull/5580)).
EXEs built by PyInstaller will now have the checksum set. The bootloaders
won't until we rebuild them so unless you rebuild the bootloaders yourself,
there is no point submitting those to virustotal yet. Instead submit your
built applications. I have tried rebuilding a bootloader then submitting it
and [it came back all
green](https://www.virustotal.com/gui/file/46ca75e577bd26439175d69f6f260d4687953c8e0f1933c9383e2b4de2bef583/detection).  
  
---  
  
🎉 5 The-Compiler, andyshinn, Legorooj, sjackman, and AIWintermuteAI reacted
with hooray emoji All reactions

  * 🎉 5 reactions

Sorry, something went wrong.

[bwoodsend](/bwoodsend) pushed a commit to bwoodsend/pyinstaller that
referenced this issue  on 24 Feb 2021

` [cli: Switched pyinstaller CLI from argparse to
click.](/bwoodsend/pyinstaller/commit/cd1001b341758760fa6aeba15ac2751a89ee6c5c
"cli: Switched pyinstaller CLI from argparse to click.

  

Switched the CLI to improve the user experience.

Fixes issue #5579") ` …

`
[cd1001b](/bwoodsend/pyinstaller/commit/cd1001b341758760fa6aeba15ac2751a89ee6c5c)
`

    
    
       
    Switched the CLI to improve the user experience.
    Fixes issue [pyinstaller#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)

[![@sjackman](https://avatars.githubusercontent.com/u/291551?s=88&v=4)](/sjackman)

Copy link

###
[![@sjackman](https://avatars.githubusercontent.com/u/291551?s=60&v=4)](/sjackman)
**[sjackman](/sjackman) ** commented on 27 Feb 2021 •

edited

The [Internet Archive](https://archive.org) flagged Pyinstaller as malware:
<https://www.virustotal.com/gui/file/af5a1b117ea14224d5993b74b45a42f8aab0a3230e1c81dc5a00d1a27ebe631c/detection/f-af5a1b117ea14224d5993b74b45a42f8aab0a3230e1c81dc5a00d1a27ebe631c-1614111479>  
  
---  
  
All reactions

Sorry, something went wrong.

[![@andyshinn](https://avatars.githubusercontent.com/u/315485?s=88&v=4)](/andyshinn)

Copy link

###
[![@andyshinn](https://avatars.githubusercontent.com/u/315485?s=60&v=4)](/andyshinn)
**[andyshinn](/andyshinn) ** commented on 27 Feb 2021 •

edited

I tried with the new PE changes and it's still blocked in Defender and flagged
by a bunch in Virus Total, unfortunately.

<https://www.virustotal.com/gui/file/a70a7c7b5682abe70dfe7bd186e6f48b636e2a59908bcbdfc0184a4e52cc1635/detection>  
  
---  
  
All reactions

Sorry, something went wrong.

[![@Legorooj](https://avatars.githubusercontent.com/u/50370070?s=88&u=07ee2196554cc9a89b1860d3bbe690e50e1ee34c&v=4)](/Legorooj)

Copy link

Member

###
[![@Legorooj](https://avatars.githubusercontent.com/u/50370070?s=60&u=07ee2196554cc9a89b1860d3bbe690e50e1ee34c&v=4)](/Legorooj)
**[Legorooj](/Legorooj) ** commented on 27 Feb 2021

Interesting, using commit
[`f078351`](https://github.com/pyinstaller/pyinstaller/commit/f078351e4218e0130eac94c213be67af9e4992cf),
I get the following result:

<https://www.virustotal.com/gui/file/f5587397e6ce11d659e3b4cfe1637991b9b5547a3f280873ef48948e606f7434/detection>

Just a build of `print('Hello world!')` as a onefile was what I used.  
  
---  
  
👍 1 conlacda reacted with thumbs up emoji All reactions

  * 👍 1 reaction

Sorry, something went wrong.

[![@Legorooj](https://avatars.githubusercontent.com/u/50370070?s=88&u=07ee2196554cc9a89b1860d3bbe690e50e1ee34c&v=4)](/Legorooj)

Copy link

Member

###
[![@Legorooj](https://avatars.githubusercontent.com/u/50370070?s=60&u=07ee2196554cc9a89b1860d3bbe690e50e1ee34c&v=4)](/Legorooj)
**[Legorooj](/Legorooj) ** commented on 27 Feb 2021 •

edited

[@sjackman](https://github.com/sjackman) that's Internet Archive flag is on
version 3.6... a little out of date.  
  
---  
  
👍 1 sjackman reacted with thumbs up emoji All reactions

  * 👍 1 reaction

Sorry, something went wrong.

[![@Kethsar](https://avatars.githubusercontent.com/u/5915757?s=60&v=4)](/Kethsar)
[Kethsar](/Kethsar) mentioned this issue  on 16 Mar 2021

[ Is it unsafe software? Kethsar/ytarchive#9 ](/Kethsar/ytarchive/issues/9)

Closed

[![@srkn](https://avatars.githubusercontent.com/u/20341589?s=88&u=be5df01fc9af7b972b7348f7c1b3ce4d83cfc9e8&v=4)](/srkn)

Copy link

###
[![@srkn](https://avatars.githubusercontent.com/u/20341589?s=60&u=be5df01fc9af7b972b7348f7c1b3ce4d83cfc9e8&v=4)](/srkn)
**[srkn](/srkn) ** commented on 23 Mar 2021

> I've done it
> ([#5580](https://github.com/pyinstaller/pyinstaller/pull/5580)). EXEs built
> by PyInstaller will now have the checksum set. The bootloaders won't until
> we rebuild them so unless you rebuild the bootloaders yourself, there is no
> point submitting those to virustotal yet. Instead submit your built
> applications. I have tried rebuilding a bootloader then submitting it and
> [it came back all
> green](https://www.virustotal.com/gui/file/46ca75e577bd26439175d69f6f260d4687953c8e0f1933c9383e2b4de2bef583/detection).

Would you please give a little more detail regarding this? How should we
rebuild bootloader to prevent being flagged as malware?  
  
---  
  
All reactions

Sorry, something went wrong.

[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=88&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)

Copy link

Member

###
[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=60&u=32718acefb9bdcb5e37dc6b6dec2034081c9a0cb&v=4)](/bwoodsend)
**[bwoodsend](/bwoodsend) ** commented on 23 Mar 2021

Rebuilding the bootloader only affects people who can't install pyinstaller.
If that includes you then the [docs are
here](https://pyinstaller.readthedocs.io/en/stable/bootloader-building.html).  
  
---  
  
All reactions

Sorry, something went wrong.

[![@phw](https://avatars.githubusercontent.com/u/29852?s=60&v=4)](/phw)
[phw](/phw) mentioned this issue  on 19 Apr 2021

[ Upgrade to PyInstaller 4.3 metabrainz/picard#1797
](/metabrainz/picard/pull/1797)

Merged

5 tasks

[![@chrissimpkins](https://avatars.githubusercontent.com/u/4249591?s=60&v=4)](/chrissimpkins)
[chrissimpkins](/chrissimpkins) mentioned this issue  on 24 Apr 2021

[ Address Win executable VirusTotal false positives source-foundry/Slice#25
](/source-foundry/Slice/issues/25)

Closed

[wlach](/wlach) added a commit to mozilla/mozregression that referenced this
issue  on 7 May 2021

[
![@wlach](https://avatars.githubusercontent.com/u/20569?s=40&u=8618184d8e4e546fd68ac815007d9260c31790da&v=4)
](/wlach)

` [Bug 1647533 - Upgrade to pyinstaller
4.3](/mozilla/mozregression/commit/85fb8c5a1aea5e7b8d8f59627b722422c7ecc85c
"Bug 1647533 - Upgrade to pyinstaller 4.3

Has a change that should help with anti-virus false-postiives on

Windows: https://github.com/pyinstaller/pyinstaller/issues/5579") ` …

Loading status checks…

`
[85fb8c5](/mozilla/mozregression/commit/85fb8c5a1aea5e7b8d8f59627b722422c7ecc85c)
`

    
    
    Has a change that should help with anti-virus false-postiives on
    Windows: [pyinstaller/pyinstaller#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)

[![@wlach](https://avatars.githubusercontent.com/u/20569?s=60&u=8618184d8e4e546fd68ac815007d9260c31790da&v=4)](/wlach)
[wlach](/wlach) mentioned this issue  on 7 May 2021

[ Bug 1647533 - Upgrade to pyinstaller 4.3 mozilla/mozregression#857
](/mozilla/mozregression/pull/857)

Merged

[wlach](/wlach) added a commit to mozilla/mozregression that referenced this
issue  on 7 May 2021

[
![@wlach](https://avatars.githubusercontent.com/u/20569?s=40&u=8618184d8e4e546fd68ac815007d9260c31790da&v=4)
](/wlach)

` [Bug 1647533 - Upgrade to pyinstaller 4.3
(](/mozilla/mozregression/commit/bfc9e65492aa0bca8697363227e26849ff7a5f24 "Bug
1647533 - Upgrade to pyinstaller 4.3 \(#857\)

Has a change that should help with anti-virus false-postiives on

Windows:
https://github.com/pyinstaller/pyinstaller/issues/5579")[#857](https://github.com/mozilla/mozregression/pull/857)[)](/mozilla/mozregression/commit/bfc9e65492aa0bca8697363227e26849ff7a5f24
"Bug 1647533 - Upgrade to pyinstaller 4.3 \(#857\)

Has a change that should help with anti-virus false-postiives on

Windows: https://github.com/pyinstaller/pyinstaller/issues/5579") ` …

Verified

This commit was created on GitHub.com and signed with GitHub’s **verified
signature**.

GPG key ID: 4AEE18F83AFDEB23

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-
github/displaying-verification-statuses-for-all-of-your-commits).

Loading status checks…

`
[bfc9e65](/mozilla/mozregression/commit/bfc9e65492aa0bca8697363227e26849ff7a5f24)
`

    
    
    Has a change that should help with anti-virus false-postiives on
    Windows: [pyinstaller/pyinstaller#5579](https://github.com/pyinstaller/pyinstaller/issues/5579)

[![@yunjilee123](https://avatars.githubusercontent.com/u/88022108?s=60&v=4)](/yunjilee123)
[yunjilee123](/yunjilee123) mentioned this issue  on 27 Jul 2021

[ Not here! Click "Preview" below for what to do instead. #6062
](/pyinstaller/pyinstaller/issues/6062)

Closed

[![@jarkowski](https://avatars.githubusercontent.com/u/4302314?s=60&v=4)](/jarkowski)
[jarkowski](/jarkowski) mentioned this issue  on 15 Mar

[ Fix problem that compiled exe from PyInstaller triggers AV software false
alarm jarkowski/extreme-zipper#8 ](/jarkowski/extreme-zipper/issues/8)

Open

[Sign up for free](/join?source=comment-repo) **to join this conversation on
GitHub**. Already have an account? [Sign in to
comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fpyinstaller%2Fpyinstaller%2Fissues%2F5579)

Assignees

[ ![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=40&v=4)
](/bwoodsend) [ bwoodsend ](/bwoodsend)

Labels

[ feature ](/pyinstaller/pyinstaller/labels/feature) Feature request

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

[ Building: Windows: Set EXE checksums (#5579).
](/pyinstaller/pyinstaller/pull/5580) [ bwoodsend/pyinstaller
](/bwoodsend/pyinstaller)

6 participants

[ ![@sjackman](https://avatars.githubusercontent.com/u/291551?s=52&v=4)
](/sjackman) [
![@andyshinn](https://avatars.githubusercontent.com/u/315485?s=52&v=4)
](/andyshinn) [ ![@The-
Compiler](https://avatars.githubusercontent.com/u/625793?s=52&v=4) ](/The-
Compiler) [
![@srkn](https://avatars.githubusercontent.com/u/20341589?s=52&v=4) ](/srkn) [
![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=52&v=4)
](/bwoodsend) [
![@Legorooj](https://avatars.githubusercontent.com/u/50370070?s=52&v=4)
](/Legorooj)

[ ](https://github.com "GitHub") © 2022 GitHub, Inc.

### Footer navigation

  * [Terms](https://docs.github.com/en/github/site-policy/github-terms-of-service)
  * [Privacy](https://docs.github.com/en/github/site-policy/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Docs](https://docs.github.com)
  * [Contact GitHub](https://support.github.com?tags=dotcom-footer)
  * [Pricing](https://github.com/pricing)
  * [API](https://docs.github.com)
  * [Training](https://services.github.com)
  * [Blog](https://github.blog)
  * [About](https://github.com/about)

You can’t perform that action at this time.

You signed in with another tab or window. [Reload]() to refresh your session.
You signed out in another tab or window. [Reload]() to refresh your session.


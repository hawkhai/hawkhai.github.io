---
title : 自动快照存档
---

* TIME: 2022-08-11 00:48:41
* URL: <https://github.com/lainswork/raw_pdb>

-----

Skip to content

[ ](https://github.com/)

[ Sign up
](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E&source=header-repo)

  * Product 

    * [ Features ](/features)
    * [ Mobile ](/mobile)
    * [ Actions ](/features/actions)
    * [ Codespaces ](/features/codespaces)
    * [ Copilot ](/features/copilot)
    * [ Packages ](/features/packages)
    * [ Security ](/features/security)
    * [ Code review ](/features/code-review)
    * [ Issues ](/features/issues)
    * [ Discussions ](/features/discussions)
    * [ Integrations ](/features/integrations)
    * [ GitHub Sponsors ](/sponsors)
    * [ Customer stories ](/customer-stories)

  * [Team](/team)
  * [Enterprise](/enterprise)
  * Explore 

    * [ Explore GitHub ](/explore)
    * Learn and contribute
    * [ Topics ](/topics)
    * [ Collections ](/collections)
    * [ Trending ](/trending)
    * [ Skills ](https://skills.github.com/)
    * [ GitHub Sponsors ](/sponsors/explore)
    * [ Open source guides ](https://opensource.guide)
    * Connect with others
    * [ The ReadME Project ](/readme)
    * [ Events ](/events)
    * [ Community forum ](https://github.community)
    * [ GitHub Education ](https://education.github.com)
    * [ GitHub Stars program ](https://stars.github.com)

  * [Marketplace](/marketplace)
  * Pricing 

    * [ Plans ](/pricing)
    * [ Compare plans ](/pricing#compare-features)
    * [ Contact Sales ](https://github.com/enterprise/contact)
    * [ Education ](https://education.github.com)

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

  * No suggested jump to results

  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this user  All GitHub  ↵ Jump to ↵ ]()
  * [ ![]() In this repository  All GitHub  ↵ Jump to ↵ ]()

[ Sign in ](/login?return_to=https%3A%2F%2Fgithub.com%2Flainswork%2Fraw_pdb)

[ Sign up
](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-
name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=lainswork%2Fraw_pdb)

{{ message }}

[lainswork](/lainswork) / **[raw_pdb](/lainswork/raw_pdb) ** Public

forked from [MolecularMatters/raw_pdb](/MolecularMatters/raw_pdb)

  * [ Notifications ](/login?return_to=%2Flainswork%2Fraw_pdb)
  * [ Fork 47 ](/login?return_to=%2Flainswork%2Fraw_pdb)
  * [ Star  5 ](/login?return_to=%2Flainswork%2Fraw_pdb)

A C++11 library for reading Microsoft Program DataBase PDB files

### License

[ BSD-2-Clause license ](/lainswork/raw_pdb/blob/main/LICENSE)

[ 5 stars ](/lainswork/raw_pdb/stargazers) [ 47 forks
](/lainswork/raw_pdb/network/members)

[ Star  ](/login?return_to=%2Flainswork%2Fraw_pdb)

[ Notifications ](/login?return_to=%2Flainswork%2Fraw_pdb)

  * [ Code ](/lainswork/raw_pdb)
  * [ Pull requests 0 ](/lainswork/raw_pdb/pulls)
  * [ Actions ](/lainswork/raw_pdb/actions)
  * [ Projects 0 ](/lainswork/raw_pdb/projects?type=new)
  * [ Wiki ](/lainswork/raw_pdb/wiki)
  * [ Security ](/lainswork/raw_pdb/security)
  * [ Insights ](/lainswork/raw_pdb/pulse)

More

  * [ Code ](/lainswork/raw_pdb)
  * [ Pull requests ](/lainswork/raw_pdb/pulls)
  * [ Actions ](/lainswork/raw_pdb/actions)
  * [ Projects ](/lainswork/raw_pdb/projects?type=new)
  * [ Wiki ](/lainswork/raw_pdb/wiki)
  * [ Security ](/lainswork/raw_pdb/security)
  * [ Insights ](/lainswork/raw_pdb/pulse)

# lainswork/raw_pdb

This commit does not belong to any branch on this repository, and may belong
to a fork outside of the repository.

main

Switch branches/tags

Branches Tags

Could not load branches

Nothing to show

[ {{ refName }} default ](https://github.com/lainswork/raw_pdb/tree/{{
urlEncodedRefName }}) [View all branches](/lainswork/raw_pdb/branches)

Could not load tags

Nothing to show

[ {{ refName }} default ](https://github.com/lainswork/raw_pdb/tree/{{
urlEncodedRefName }})

[View all tags](/lainswork/raw_pdb/tags)

[ **1** branch ](/lainswork/raw_pdb/branches) [ **0** tags
](/lainswork/raw_pdb/tags)

[ Go to file ](/lainswork/raw_pdb/find/main) Code

  * [ ](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone

HTTPS  GitHub CLI

Use Git or checkout with SVN using the web URL.

Work fast with our official CLI. [Learn more](https://cli.github.com).

  * [ Open with GitHub Desktop ](https://desktop.github.com)
  * [ Download ZIP ](/lainswork/raw_pdb/archive/refs/heads/main.zip)

#### Launching GitHub Desktop

If nothing happens, [download GitHub Desktop](https://desktop.github.com/) and
try again.

#### Launching GitHub Desktop

If nothing happens, [download GitHub Desktop](https://desktop.github.com/) and
try again.

#### Launching Xcode

If nothing happens, [download Xcode](https://developer.apple.com/xcode/) and
try again.

#### Launching Visual Studio Code

Your codespace will open once ready.

There was a problem preparing your codespace, please try again.

This branch is [2 commits
ahead](/lainswork/raw_pdb/compare/MolecularMatters:raw_pdb:main...main), [71
commits
behind](/lainswork/raw_pdb/compare/main...MolecularMatters:raw_pdb:main)
MolecularMatters:main.

Contribute

  * This branch is 2 commits ahead of MolecularMatters:main. 

Open a pull request to contribute your changes upstream.

  * [ Open pull request ](/lainswork/raw_pdb/compare/MolecularMatters:raw_pdb:main...main?expand=1)

## Latest commit

[ ![@lainswork](https://avatars.githubusercontent.com/u/46841563?s=48&v=4)
](/lainswork)

[lainswork](/lainswork/raw_pdb/commits?author=lainswork "View all commits by
lainswork")
[nothing](/lainswork/raw_pdb/commit/7a839b842cb107f0d0e8356288ecc6dd7e047a1a
"nothing")

…

[ 7a839b8
](/lainswork/raw_pdb/commit/7a839b842cb107f0d0e8356288ecc6dd7e047a1a) [ on 21
Mar ](/lainswork/raw_pdb/commit/7a839b842cb107f0d0e8356288ecc6dd7e047a1a)

[nothing](/lainswork/raw_pdb/commit/7a839b842cb107f0d0e8356288ecc6dd7e047a1a)

`7a839b8`

## Git stats

  * [ **35** commits  ](/lainswork/raw_pdb/commits/main)

## Files

[Permalink](/lainswork/raw_pdb/tree/7a839b842cb107f0d0e8356288ecc6dd7e047a1a)

Failed to load latest commit information.

Type

Name

Latest commit message

Commit time

[build](/lainswork/raw_pdb/tree/main/build "build")

[nothing](/lainswork/raw_pdb/commit/7a839b842cb107f0d0e8356288ecc6dd7e047a1a
"nothing")

5 months ago

[src](/lainswork/raw_pdb/tree/main/src "src")

[Fixed handling of directory block
indices](/lainswork/raw_pdb/commit/66dccb0ba06952691c1fc0b1635f87f109099ee9
"Fixed handling of directory block indices

Some PDBs have their directory block indices split over several blocks, and
these blocks are not necessarily contiguous.")

5 months ago

[.gitignore](/lainswork/raw_pdb/blob/main/.gitignore ".gitignore")

[to
configure](/lainswork/raw_pdb/commit/ac07ddcefa1e323ab6fe4cd5c4a61b93d5b8410b
"to configure

修改了输出目录配置，自动拷贝头文件")

5 months ago

[LICENSE](/lainswork/raw_pdb/blob/main/LICENSE "LICENSE")

[initial
upload](/lainswork/raw_pdb/commit/53afd68384074b05d7c6da2cba3852c9d6bde02c
"initial upload")

6 months ago

[README.md](/lainswork/raw_pdb/blob/main/README.md "README.md")

[/DEBUG:FASTLINK is not
supported](/lainswork/raw_pdb/commit/8509b101fac3a4767fe9d959a00b7335718fb480
"/DEBUG:FASTLINK is not supported

PDBs produced with /DEBUG:FASTLINK don't contain much useful information, and
are not supported.

The README has been updated accordingly, and the example code now checks for
this.")

5 months ago

View code

RawPDB Design Goal Features Building Performance Supported streams
Documentation Directory structure Examples Symbols (ExampleSymbols.cpp)
Contributions (ExampleContributions.cpp) Function symbols
(ExampleFunctionSymbols.cpp) Sponsoring or supporting RawPDB

##  README.md

# RawPDB

**RawPDB** is a C++11 library that directly reads Microsoft Program DataBase
PDB files. The code is extracted almost directly from the upcoming 2.0 release
of [Live++](https://liveplusplus.tech/).

## Design

**RawPDB** gives you direct access to the stream data contained in a PDB file.
It does not attempt to offer abstractions for iterating symbols, translation
units, contributions, etc.

Building a high-level abstraction over the provided low-level data is an ill-
fated attempt that can never really be performant for everybody, because
different tools like debuggers, hot-reload tools (e.g.
[Live++](https://liveplusplus.tech/)), profilers (e.g.
[Superluminal](https://superluminal.eu/)), need to perform different queries
against the stored data.

We therefore believe the best solution is to offer direct access to the
underlying data, with applications bringing that data into their own
structures.

## Goal

Eventually, we want **RawPDB** to become the de-facto replacement of
[Microsoft's DIA SDK](https://docs.microsoft.com/en-
us/visualstudio/debugger/debug-interface-access/debug-interface-access-sdk)
that most C++ developers (have to) use.

## Features

  * Fast - **RawPDB** works directly with memory-mapped data, so only the data from the streams you touch affect performance. It is orders of magnitudes faster than the DIA SDK, and faster than comparable LLVM code
  * Scalable - **RawPDB's** API gives you access to individual streams that can all be read concurrently in a trivial fashion, since all returned data structures are immutable. There are no locks or waits anywhere inside the library
  * Lightweight - **RawPDB** is small and compiles in roughly 1 second
  * Allocation-friendly - **RawPDB** performs only a few allocations, and those can be overridden easily by changing the underlying macro
  * No STL - **RawPDB** does not need any STL containers or algorithms
  * No exceptions - **RawPDB** does not use exceptions
  * No RTTI - **RawPDB** does not need RTTI or use class hierarchies
  * High-quality code - **RawPDB** compiles clean under -Wall

## Building

The code compiles clean under Visual Studio 2015, 2017, 2019, or 2022. A
solution for Visual Studio 2019 is included.

## Performance

Running the **Symbols** and **Contributions** examples on a 1GiB PDB yields
the following output:

    
    
    Opening PDB file C:\Development\llvm-project\build\tools\clang\unittests\Tooling\RelWithDebInfo\ToolingTests.pdb
    
    Running example "Symbols"
    | Reading image section stream
    | ---> done in 0.066ms
    | Reading module info stream
    | ---> done in 0.562ms
    | Reading symbol record stream
    | ---> done in 25.185ms
    | Reading public symbol stream
    | ---> done in 1.133ms
    | Storing public symbols
    | ---> done in 46.171ms (212023 elements)
    | Reading global symbol stream
    | ---> done in 1.381ms
    | Storing global symbols
    | ---> done in 12.769ms (448957 elements)
    | Storing symbols from modules
    | ---> done in 145.849ms (2243 elements)
    ---> done in 233.694ms (539611 elements)
    
    
    
    Opening PDB file C:\Development\llvm-project\build\tools\clang\unittests\Tooling\RelWithDebInfo\ToolingTests.pdb
    
    Running example "Contributions"
    | Reading image section stream
    | ---> done in 0.066ms
    | Reading module info stream
    | ---> done in 0.594ms
    | Reading section contribution stream
    | ---> done in 9.839ms
    | Storing contributions
    | ---> done in 67.346ms (630924 elements)
    | std::sort contributions
    | ---> done in 19.218ms
    ---> done in 97.283ms
    20 largest contributions:
    1: 1896496 bytes from LLVMAMDGPUCodeGen.dir\RelWithDebInfo\AMDGPUInstructionSelector.obj
    2: 1700720 bytes from LLVMHexagonCodeGen.dir\RelWithDebInfo\HexagonInstrInfo.obj
    3: 1536470 bytes from LLVMRISCVCodeGen.dir\RelWithDebInfo\RISCVISelDAGToDAG.obj
    4: 1441408 bytes from LLVMAArch64CodeGen.dir\RelWithDebInfo\AArch64InstructionSelector.obj
    5: 1187048 bytes from LLVMRISCVCodeGen.dir\RelWithDebInfo\RISCVInstructionSelector.obj
    6: 1026504 bytes from LLVMARMCodeGen.dir\RelWithDebInfo\ARMInstructionSelector.obj
    7: 952080 bytes from LLVMAMDGPUDesc.dir\RelWithDebInfo\AMDGPUMCTargetDesc.obj
    8: 849888 bytes from LLVMX86Desc.dir\RelWithDebInfo\X86MCTargetDesc.obj
    9: 712176 bytes from LLVMHexagonCodeGen.dir\RelWithDebInfo\HexagonInstrInfo.obj
    10: 679035 bytes from LLVMX86CodeGen.dir\RelWithDebInfo\X86ISelDAGToDAG.obj
    11: 525174 bytes from LLVMAMDGPUDesc.dir\RelWithDebInfo\AMDGPUMCTargetDesc.obj
    12: 523035 bytes from * Linker *
    13: 519312 bytes from LLVMRISCVDesc.dir\RelWithDebInfo\RISCVMCTargetDesc.obj
    14: 512496 bytes from LLVMVEDesc.dir\RelWithDebInfo\VEMCTargetDesc.obj
    15: 498768 bytes from LLVMX86CodeGen.dir\RelWithDebInfo\X86InstructionSelector.obj
    16: 483528 bytes from LLVMMipsCodeGen.dir\RelWithDebInfo\MipsInstructionSelector.obj
    17: 449472 bytes from LLVMAMDGPUCodeGen.dir\RelWithDebInfo\AMDGPUISelDAGToDAG.obj
    18: 444246 bytes from C:\Development\llvm-project\build\tools\clang\lib\Basic\obj.clangBasic.dir\RelWithDebInfo\DiagnosticIDs.obj
    19: 371584 bytes from LLVMAArch64CodeGen.dir\RelWithDebInfo\AArch64ISelDAGToDAG.obj
    20: 370272 bytes from LLVMNVPTXDesc.dir\RelWithDebInfo\NVPTXMCTargetDesc.obj
    

This is at least an order of magnitude faster than DIA, even though the
example code is completely serial and uses std::vector, std::string, and
std::sort, which are used for illustration purposes only.

When reading streams in a concurrent fashion, you will most likely be limited
by the speed at which the OS can bring the data into your process.

## Supported streams

**RawPDB** gives you access to the following PDB stream data:

  * DBI stream data

    * Public symbols
    * Global symbols
    * Modules
    * Module symbols
    * Image sections
    * Info stream
    * Section contributions
    * Source files
  * IPI stream data

At the moment, there is no support for C13 line information and the TPI type
stream data, because Live++ does not make use of that information yet.
However, we will gladly accept PRs, or implement support in the future.

Furthermore, PDBs linked using /DEBUG:FASTLINK are not supported. These PDBs
do not contain much information, since private symbol information is
distributed among object files and library files.

## Documentation

If you are unfamiliar with the basic structure of a PDB file, the [LLVM
documentation](https://llvm.org/docs/PDB/index.html) serves as a good
introduction.

Consult the example code to see how to read and parse the PDB streams.

## Directory structure

  * bin: contains final binary output files (.exe and .pdb)
  * build: contains Visual Studio 2019 solution and project files
  * lib: contains the RawPDB library output files (.lib and .pdb)
  * src: contains the RawPDB source code, as well as example code
  * temp: contains intermediate build artefacts

## Examples

### Symbols
([ExampleSymbols.cpp](https://github.com/MolecularMatters/raw_pdb/blob/main/src/Examples/ExampleSymbols.cpp))

A basic example that shows how to load and symbols from public, global, and
module streams.

### Contributions
([ExampleContributions.cpp](https://github.com/MolecularMatters/raw_pdb/blob/main/src/Examples/ExampleContributions.cpp))

A basic example that shows how to load contributions, sort them by size, and
output the 20 largest ones along with the object file they originated from.

### Function symbols
([ExampleFunctionSymbols.cpp](https://github.com/MolecularMatters/raw_pdb/blob/main/src/Examples/ExampleFunctionSymbols.cpp))

An example intended for profiler developers that shows how to enumerate all
function symbols and retrieve or compute their code size.

## Sponsoring or supporting RawPDB

We have chosen a very liberal license to let **RawPDB** be used in as many
scenarios as possible, including commercial applications. If you would like to
support its development, consider licensing
[Live++](https://liveplusplus.tech/) instead. Not only do you give something
back, but get a great productivity enhancement on top!

## About

A C++11 library for reading Microsoft Program DataBase PDB files

### Resources

Readme

### License

[ BSD-2-Clause license ](/lainswork/raw_pdb/blob/main/LICENSE)

### Stars

[ **5** stars ](/lainswork/raw_pdb/stargazers)

### Watchers

[ **0** watching ](/lainswork/raw_pdb/watchers)

### Forks

[ **47** forks ](/lainswork/raw_pdb/network/members)

##  [ Releases ](/lainswork/raw_pdb/releases)

No releases published

##  [ Packages 0 ](/users/lainswork/packages?repo_name=raw_pdb)

No packages published  

## Languages

  * C++ 96.1%
  * C 3.9%

## Footer

[ ](https://github.com "GitHub") © 2022 GitHub, Inc.

### Footer navigation

  * [Terms](https://docs.github.com/en/github/site-policy/github-terms-of-service)
  * [Privacy](https://docs.github.com/en/github/site-policy/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Docs](https://docs.github.com)
  * [Contact GitHub](https://support.github.com?tags=dotcom-footer)
  * [Pricing](https://github.com/pricing)
  * [API](https://docs.github.com)
  * [Training](https://services.github.com)
  * [Blog](https://github.blog)
  * [About](https://github.com/about)

You can’t perform that action at this time.

You signed in with another tab or window. [Reload]() to refresh your session.
You signed out in another tab or window. [Reload]() to refresh your session.


define(function(){function d(){}return function(e,n,t){if(!e.url)throw"URL not provided";var o=new XMLHttpRequest;n=n||e.done||d,t=t||e.fail||d,o.addEventListener&&o.addEventListener("readystatechange",function(){var e;4===o.readyState&&(200===(e=o.status)?n.call(o,o.responseText):t.call(o,e,o.responseText))});var a,r=e.data?(a=e.data,Object.keys(a).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])}).join("&")):null;"POST"===e.method?(o.open("POST",e.url,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(r)):(o.open("GET",e.url+(r?"?"+r:""),!0),o.send(null))}});